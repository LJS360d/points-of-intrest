(function(Ae){typeof define=="function"&&define.amd?define(Ae):Ae()})(function(){"use strict";var Ae=document.createElement("style");Ae.textContent=`/*! tailwindcss v4.1.5 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-font-weight:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--spacing:.25rem;--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--font-weight-bold:700;--radius-lg:.5rem;--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}:where(:root),:root:has(input.theme-controller[value=aqua]:checked),[data-theme=aqua]{color-scheme:dark;--color-base-100:oklch(37% .146 265.522);--color-base-200:oklch(28% .091 267.935);--color-base-300:oklch(22% .091 267.935);--color-base-content:oklch(90% .058 230.902);--color-primary:oklch(85.661% .144 198.645);--color-primary-content:oklch(40.124% .068 197.603);--color-secondary:oklch(60.682% .108 309.782);--color-secondary-content:oklch(96% .016 293.756);--color-accent:oklch(93.426% .102 94.555);--color-accent-content:oklch(18.685% .02 94.555);--color-neutral:oklch(27% .146 265.522);--color-neutral-content:oklch(80% .146 265.522);--color-info:oklch(54.615% .215 262.88);--color-info-content:oklch(90.923% .043 262.88);--color-success:oklch(62.705% .169 149.213);--color-success-content:oklch(12.541% .033 149.213);--color-warning:oklch(66.584% .157 58.318);--color-warning-content:oklch(27% .077 45.635);--color-error:oklch(73.95% .19 27.33);--color-error-content:oklch(14.79% .038 27.33);--radius-selector:1rem;--radius-field:.5rem;--radius-box:1rem;--size-selector:.25rem;--size-field:.25rem;--border:1px;--depth:1;--noise:0}:root:has(.modal-open,.modal[open],.modal:target,.modal-toggle:checked,.drawer:not([class*=drawer-open])>.drawer-toggle:checked){overflow:hidden}:root,[data-theme]{background-color:var(--root-bg,var(--color-base-100));color:var(--color-base-content)}:root{scrollbar-color:currentColor #0000}@supports (color:color-mix(in lab,red,red)){:root{scrollbar-color:color-mix(in oklch,currentColor 35%,#0000)#0000}}@property --radialprogress{syntax: "<percentage>"; inherits: true; initial-value: 0%;}:where(:root:has(.modal-open,.modal[open],.modal:target,.modal-toggle:checked,.drawer:not(.drawer-open)>.drawer-toggle:checked)){scrollbar-gutter:stable;background-image:linear-gradient(var(--color-base-100),var(--color-base-100));--root-bg:var(--color-base-100)}@supports (color:color-mix(in lab,red,red)){:where(:root:has(.modal-open,.modal[open],.modal:target,.modal-toggle:checked,.drawer:not(.drawer-open)>.drawer-toggle:checked)){--root-bg:color-mix(in srgb,var(--color-base-100),oklch(0% 0 0) 40%)}}:where(.modal[open],.modal-open,.modal-toggle:checked+.modal):not(.modal-start,.modal-end){scrollbar-gutter:stable}:root{--fx-noise:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='a'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.34' numOctaves='4' stitchTiles='stitch'%3E%3C/feTurbulence%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23a)' opacity='0.2'%3E%3C/rect%3E%3C/svg%3E")}.chat{--mask-chat:url("data:image/svg+xml,%3csvg width='13' height='13' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill='black' d='M0 11.5004C0 13.0004 2 13.0004 2 13.0004H12H13V0.00036329L12.5 0C12.5 0 11.977 2.09572 11.8581 2.50033C11.6075 3.35237 10.9149 4.22374 9 5.50036C6 7.50036 0 10.0004 0 11.5004Z'/%3e%3c/svg%3e")}}@layer components;@layer utilities{.btn{cursor:pointer;text-align:center;vertical-align:middle;outline-offset:2px;webkit-user-select:none;-webkit-user-select:none;user-select:none;padding-inline:var(--btn-p);color:var(--btn-fg);--tw-prose-links:var(--btn-fg);height:var(--size);font-size:var(--fontsize,.875rem);outline-color:var(--btn-color,var(--color-base-content));background-color:var(--btn-bg);background-size:auto,calc(var(--noise)*100%);background-image:none,var(--btn-noise);border-width:var(--border);border-style:solid;border-color:var(--btn-border);text-shadow:0 .5px oklch(100% 0 0/calc(var(--depth)*.15));touch-action:manipulation;box-shadow:0 .5px 0 .5px oklch(100% 0 0/calc(var(--depth)*6%)) inset,var(--btn-shadow);--size:calc(var(--size-field,.25rem)*10);--btn-bg:var(--btn-color,var(--color-base-200));--btn-fg:var(--color-base-content);--btn-p:1rem;--btn-border:var(--btn-bg);--btn-shadow:0 3px 2px -2px var(--btn-bg),0 4px 3px -2px var(--btn-bg);--btn-noise:var(--fx-noise);border-start-start-radius:var(--join-ss,var(--radius-field));border-start-end-radius:var(--join-se,var(--radius-field));border-end-end-radius:var(--join-ee,var(--radius-field));border-end-start-radius:var(--join-es,var(--radius-field));flex-wrap:nowrap;flex-shrink:0;justify-content:center;align-items:center;gap:.375rem;font-weight:600;transition-property:color,background-color,border-color,box-shadow;transition-duration:.2s;transition-timing-function:cubic-bezier(0,0,.2,1);display:inline-flex}:where(.btn){width:unset}@supports (color:color-mix(in lab,red,red)){.btn{--btn-border:color-mix(in oklab,var(--btn-bg),#000 calc(var(--depth)*5%));--btn-shadow:0 3px 2px -2px color-mix(in oklab,var(--btn-bg)calc(var(--depth)*30%),#0000),0 4px 3px -2px color-mix(in oklab,var(--btn-bg)calc(var(--depth)*30%),#0000)}}.prose .btn{text-decoration-line:none}@media (hover:hover){.btn:hover{--btn-bg:var(--btn-color,var(--color-base-200))}@supports (color:color-mix(in lab,red,red)){.btn:hover{--btn-bg:color-mix(in oklab,var(--btn-color,var(--color-base-200)),#000 7%)}}}.btn:focus-visible{isolation:isolate;outline-width:2px;outline-style:solid}.btn:active:not(.btn-active){--btn-bg:var(--btn-color,var(--color-base-200));--btn-border:var(--btn-color,var(--color-base-200));--btn-shadow:0 0 0 0 oklch(0% 0 0/0),0 0 0 0 oklch(0% 0 0/0);translate:0 .5px}@supports (color:color-mix(in lab,red,red)){.btn:active:not(.btn-active){--btn-bg:color-mix(in oklab,var(--btn-color,var(--color-base-200)),#000 5%);--btn-border:color-mix(in oklab,var(--btn-color,var(--color-base-200)),#000 7%)}}.btn:is(:disabled,[disabled],.btn-disabled){pointer-events:none;--btn-border:#0000;--btn-noise:none;--btn-fg:var(--color-base-content)}.btn:is(:disabled,[disabled],.btn-disabled):not(.btn-link,.btn-ghost){background-color:var(--color-base-content);box-shadow:none}@supports (color:color-mix(in lab,red,red)){.btn:is(:disabled,[disabled],.btn-disabled):not(.btn-link,.btn-ghost){background-color:color-mix(in oklab,var(--color-base-content)10%,transparent)}.btn:is(:disabled,[disabled],.btn-disabled){--btn-fg:color-mix(in oklch,var(--color-base-content)20%,#0000)}}@media (hover:hover){.btn:is(:disabled,[disabled],.btn-disabled):hover{pointer-events:none;background-color:var(--color-neutral);--btn-border:#0000;--btn-fg:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.btn:is(:disabled,[disabled],.btn-disabled):hover{background-color:color-mix(in oklab,var(--color-neutral)20%,transparent);--btn-fg:color-mix(in oklch,var(--color-base-content)20%,#0000)}}}.btn:is(input[type=checkbox],input[type=radio]){-webkit-appearance:none;-moz-appearance:none;appearance:none}.btn:is(input[type=checkbox],input[type=radio]):after{content:attr(aria-label)}.btn:where(input:checked:not(.filter .btn)){--btn-color:var(--color-primary);--btn-fg:var(--color-primary-content);isolation:isolate}.input{cursor:text;border:var(--border)solid #0000;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--color-base-100);vertical-align:middle;white-space:nowrap;width:clamp(3rem,20rem,100%);height:var(--size);border-color:var(--input-color);box-shadow:0 1px var(--input-color) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset;--size:calc(var(--size-field,.25rem)*10);--input-color:var(--color-base-content);border-start-start-radius:var(--join-ss,var(--radius-field));border-start-end-radius:var(--join-se,var(--radius-field));border-end-end-radius:var(--join-ee,var(--radius-field));border-end-start-radius:var(--join-es,var(--radius-field));flex-shrink:1;align-items:center;gap:.5rem;padding-inline:.75rem;font-size:.875rem;display:inline-flex;position:relative}@supports (color:color-mix(in lab,red,red)){.input{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset;--input-color:color-mix(in oklab,var(--color-base-content)20%,#0000)}}.input:where(input){display:inline-flex}.input :where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#0000;border:none;width:100%;height:100%;display:inline-flex}.input :where(input):focus,.input :where(input):focus-within{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){:is(.input :where(input):focus,.input :where(input):focus-within){outline-offset:2px;outline:2px solid #0000}}.input :where(input[type=date]){display:inline-block}.input:focus,.input:focus-within{--input-color:var(--color-base-content);box-shadow:0 1px var(--input-color);outline:2px solid var(--input-color);outline-offset:2px;isolation:isolate;z-index:1}@supports (color:color-mix(in lab,red,red)){:is(.input:focus,.input:focus-within){box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000)}}.input:has(>input[disabled]),.input:is(:disabled,[disabled]){cursor:not-allowed;border-color:var(--color-base-200);background-color:var(--color-base-200);color:var(--color-base-content);box-shadow:none}@supports (color:color-mix(in lab,red,red)){:is(.input:has(>input[disabled]),.input:is(:disabled,[disabled])){color:color-mix(in oklab,var(--color-base-content)40%,transparent)}}:is(.input:has(>input[disabled]),.input:is(:disabled,[disabled]))::placeholder{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){:is(.input:has(>input[disabled]),.input:is(:disabled,[disabled]))::placeholder{color:color-mix(in oklab,var(--color-base-content)20%,transparent)}}.input:has(>input[disabled])>input[disabled]{cursor:not-allowed}.input::-webkit-date-and-time-value{text-align:inherit}.input[type=number]::-webkit-inner-spin-button{margin-block:-.75rem;margin-inline-end:-.75rem}.input::-webkit-calendar-picker-indicator{position:absolute;inset-inline-end:.75em}.steps{counter-reset:step;grid-auto-columns:1fr;grid-auto-flow:column;display:inline-grid;overflow:auto hidden}.steps .step{text-align:center;--step-bg:var(--color-base-300);--step-fg:var(--color-base-content);grid-template-rows:40px 1fr;grid-template-columns:auto;place-items:center;min-width:4rem;display:grid}.steps .step:before{width:100%;height:.5rem;color:var(--step-bg);background-color:var(--step-bg);--tw-content:"";content:var(--tw-content);border:1px solid;grid-row-start:1;grid-column-start:1;margin-inline-start:-100%;top:0}.steps .step>.step-icon,.steps .step:not(:has(.step-icon)):after{content:counter(step);counter-increment:step;z-index:1;color:var(--step-fg);background-color:var(--step-bg);border:1px solid var(--step-bg);border-radius:3.40282e38px;grid-row-start:1;grid-column-start:1;place-self:center;place-items:center;width:2rem;height:2rem;display:grid;position:relative}.steps .step:first-child:before{content:none}.steps .step[data-content]:after{content:attr(data-content)}.steps .step-neutral+.step-neutral:before,.steps .step-neutral:after,.steps .step-neutral>.step-icon{--step-bg:var(--color-neutral);--step-fg:var(--color-neutral-content)}.steps .step-primary+.step-primary:before,.steps .step-primary:after,.steps .step-primary>.step-icon{--step-bg:var(--color-primary);--step-fg:var(--color-primary-content)}.steps .step-secondary+.step-secondary:before,.steps .step-secondary:after,.steps .step-secondary>.step-icon{--step-bg:var(--color-secondary);--step-fg:var(--color-secondary-content)}.steps .step-accent+.step-accent:before,.steps .step-accent:after,.steps .step-accent>.step-icon{--step-bg:var(--color-accent);--step-fg:var(--color-accent-content)}.steps .step-info+.step-info:before,.steps .step-info:after,.steps .step-info>.step-icon{--step-bg:var(--color-info);--step-fg:var(--color-info-content)}.steps .step-success+.step-success:before,.steps .step-success:after,.steps .step-success>.step-icon{--step-bg:var(--color-success);--step-fg:var(--color-success-content)}.steps .step-warning+.step-warning:before,.steps .step-warning:after,.steps .step-warning>.step-icon{--step-bg:var(--color-warning);--step-fg:var(--color-warning-content)}.steps .step-error+.step-error:before,.steps .step-error:after,.steps .step-error>.step-icon{--step-bg:var(--color-error);--step-fg:var(--color-error-content)}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:calc(var(--spacing)*0)}.textarea{border:var(--border)solid #0000;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--radius-field);background-color:var(--color-base-100);vertical-align:middle;border-color:var(--input-color);width:clamp(3rem,20rem,100%);min-height:5rem;box-shadow:0 1px var(--input-color) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset;--input-color:var(--color-base-content);flex-shrink:1;padding-block:.5rem;padding-inline:.75rem;font-size:.875rem}@supports (color:color-mix(in lab,red,red)){.textarea{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset;--input-color:color-mix(in oklab,var(--color-base-content)20%,#0000)}}.textarea textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#0000;border:none}.textarea textarea:focus,.textarea textarea:focus-within{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){:is(.textarea textarea:focus,.textarea textarea:focus-within){outline-offset:2px;outline:2px solid #0000}}.textarea:focus,.textarea:focus-within{--input-color:var(--color-base-content);box-shadow:0 1px var(--input-color);outline:2px solid var(--input-color);outline-offset:2px;isolation:isolate}@supports (color:color-mix(in lab,red,red)){:is(.textarea:focus,.textarea:focus-within){box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000)}}.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]){cursor:not-allowed;border-color:var(--color-base-200);background-color:var(--color-base-200);color:var(--color-base-content);box-shadow:none}@supports (color:color-mix(in lab,red,red)){:is(.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled])){color:color-mix(in oklab,var(--color-base-content)40%,transparent)}}:is(.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]))::placeholder{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){:is(.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]))::placeholder{color:color-mix(in oklab,var(--color-base-content)20%,transparent)}}.textarea:has(>textarea[disabled])>textarea[disabled]{cursor:not-allowed}.btn-active{--btn-bg:var(--btn-color,var(--color-base-200));--btn-shadow:0 0 0 0 oklch(0% 0 0/0),0 0 0 0 oklch(0% 0 0/0);isolation:isolate}@supports (color:color-mix(in lab,red,red)){.btn-active{--btn-bg:color-mix(in oklab,var(--btn-color,var(--color-base-200)),#000 7%)}}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.divider{white-space:nowrap;height:1rem;margin:var(--divider-m,1rem 0);--divider-color:var(--color-base-content);flex-direction:row;align-self:stretch;align-items:center;display:flex}@supports (color:color-mix(in lab,red,red)){.divider{--divider-color:color-mix(in oklab,var(--color-base-content)10%,transparent)}}.divider:before,.divider:after{content:"";background-color:var(--divider-color);flex-grow:1;width:100%;height:.125rem}@media print{.divider:before,.divider:after{border:.5px solid}}.divider:not(:empty){gap:1rem}.label{white-space:nowrap;color:currentColor;align-items:center;gap:.375rem;display:inline-flex}@supports (color:color-mix(in lab,red,red)){.label{color:color-mix(in oklab,currentColor 60%,transparent)}}.label:has(input){cursor:pointer}.label:is(.input>*,.select>*){white-space:nowrap;height:calc(100% - .5rem);font-size:inherit;align-items:center;padding-inline:.75rem;display:flex}.label:is(.input>*,.select>*):first-child{border-inline-end:var(--border)solid currentColor;margin-inline:-.75rem .75rem}@supports (color:color-mix(in lab,red,red)){.label:is(.input>*,.select>*):first-child{border-inline-end:var(--border)solid color-mix(in oklab,currentColor 10%,#0000)}}.label:is(.input>*,.select>*):last-child{border-inline-start:var(--border)solid currentColor;margin-inline:.75rem -.75rem}@supports (color:color-mix(in lab,red,red)){.label:is(.input>*,.select>*):last-child{border-inline-start:var(--border)solid color-mix(in oklab,currentColor 10%,#0000)}}.contents{display:contents}.flex{display:flex}.h-5{height:calc(var(--spacing)*5)}.h-10{height:calc(var(--spacing)*10)}.h-full{height:100%}.h-svh{height:100svh}.w-5{width:calc(var(--spacing)*5)}.w-full{width:100%}.w-svw{width:100svw}.max-w-64{max-width:calc(var(--spacing)*64)}.max-w-\\[calc\\(100svw-560px\\)\\]{max-width:calc(100svw - 560px)}.flex-1{flex:1}.link{cursor:pointer;text-decoration-line:underline}.link:focus{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.link:focus{outline-offset:2px;outline:2px solid #0000}}.link:focus-visible{outline-offset:2px;outline:2px solid}.cursor-grab{cursor:grab}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.gap-2{gap:calc(var(--spacing)*2)}.gap-4{gap:calc(var(--spacing)*4)}.overflow-hidden{overflow:hidden}.rounded-lg{border-radius:var(--radius-lg)}.bg-base-100{background-color:var(--color-base-100)}.bg-base-300{background-color:var(--color-base-300)}.p-2{padding:calc(var(--spacing)*2)}.p-4{padding:calc(var(--spacing)*4)}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,#00000040);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.btn-error{--btn-color:var(--color-error);--btn-fg:var(--color-error-content)}.btn-info{--btn-color:var(--color-info);--btn-fg:var(--color-info-content)}.btn-primary{--btn-color:var(--color-primary);--btn-fg:var(--color-primary-content)}.btn-success{--btn-color:var(--color-success);--btn-fg:var(--color-success-content)}.btn-warning{--btn-color:var(--color-warning);--btn-fg:var(--color-warning-content)}@media (min-width:40rem){.sm\\:p-4{padding:calc(var(--spacing)*4)}}@media (min-width:48rem){.md\\:p-8{padding:calc(var(--spacing)*8)}}}@keyframes dropdown{0%{opacity:0}}@keyframes progress{50%{background-position-x:-115%}}@keyframes toast{0%{opacity:0;scale:.9}to{opacity:1;scale:1}}@keyframes rating{0%,40%{filter:brightness(1.05)contrast(1.05);scale:1.1}}@keyframes radio{0%{padding:5px}50%{padding:3px}}@keyframes skeleton{0%{background-position:150%}to{background-position:-50%}}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}
/*$vite$:1*/`,document.head.appendChild(Ae);const J={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return tr(this.context.count)},getNextContextId(){return tr(this.context.count++)}};function tr(t){const n=String(t),e=n.length-1;return J.context.id+(e?String.fromCharCode(96+e):"")+n}function Te(t){J.context=t}const uo=!1,fo=(t,n)=>t===n,Tt=Symbol("solid-proxy"),er=typeof Proxy=="function",nr=Symbol("solid-track"),Ln={equals:fo};let Ee=null,ir=dr;const Ot=1,On=2,rr={owned:null,cleanups:null,context:null,owner:null},ci={};var rt=null;let Nn=null,go=null,st=null,gt=null,Pt=null,Dn=0;function sr(t,n){const e=st,i=rt,a=t.length===0,r=n===void 0?i:n,s=a?rr:{owned:null,cleanups:null,context:r?r.context:null,owner:r},o=a?t:()=>t(()=>ft(()=>Oe(s)));rt=s,st=null;try{return Ut(o,!0)}finally{st=e,rt=i}}function kt(t,n){n=n?Object.assign({},Ln,n):Ln;const e={value:t,observers:null,observerSlots:null,comparator:n.equals||void 0},i=a=>(typeof a=="function"&&(a=a(e.value)),hr(e,a));return[cr.bind(e),i]}function or(t,n,e){const i=Le(t,n,!0,Ot);ge(i)}function mt(t,n,e){const i=Le(t,n,!1,Ot);ge(i)}function Zt(t,n,e){ir=xo;const i=Le(t,n,!1,Ot),a=fe&&ue(fe);a&&(i.suspense=a),(!e||!e.render)&&(i.user=!0),Pt?Pt.push(i):ge(i)}function dt(t,n,e){e=e?Object.assign({},Ln,e):Ln;const i=Le(t,n,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=e.equals||void 0,ge(i),cr.bind(i)}function po(t){return t&&typeof t=="object"&&"then"in t}function hi(t,n,e){let i,a,r;typeof n=="function"?(i=t,a=n,r={}):(i=!0,a=t,r=n||{});let s=null,o=ci,c=null,h=!1,l="initialValue"in r,u=typeof i=="function"&&dt(i);const p=new Set,[f,g]=(r.storage||kt)(r.initialValue),[y,S]=kt(void 0),[P,m]=kt(void 0,{equals:!1}),[d,v]=kt(l?"ready":"unresolved");J.context&&(c=J.getNextContextId(),r.ssrLoadFrom==="initial"?o=r.initialValue:J.load&&J.has(c)&&(o=J.load(c)));function C(x,A,T,N){return s===x&&(s=null,N!==void 0&&(l=!0),(x===o||A===o)&&r.onHydrated&&queueMicrotask(()=>r.onHydrated(N,{value:A})),o=ci,k(A,T)),A}function k(x,A){Ut(()=>{A===void 0&&g(()=>x),v(A!==void 0?"errored":l?"ready":"unresolved"),S(A);for(const T of p.keys())T.decrement();p.clear()},!1)}function L(){const x=fe&&ue(fe),A=f(),T=y();if(T!==void 0&&!s)throw T;return st&&!st.user&&x&&or(()=>{P(),s&&(x.resolved&&Nn||p.has(x)||(x.increment(),p.add(x)))}),A}function b(x=!0){if(x!==!1&&h)return;h=!1;const A=u?u():i;if(A==null||A===!1){C(s,ft(f));return}const T=o!==ci?o:ft(()=>a(A,{value:f(),refetching:x}));return po(T)?(s=T,"value"in T?(T.status==="success"?C(s,T.value,void 0,A):C(s,void 0,ui(T.value),A),T):(h=!0,queueMicrotask(()=>h=!1),Ut(()=>{v(l?"refreshing":"pending"),m()},!1),T.then(N=>C(T,N,void 0,A),N=>C(T,void 0,ui(N),A)))):(C(s,T,void 0,A),T)}Object.defineProperties(L,{state:{get:()=>d()},error:{get:()=>y()},loading:{get(){const x=d();return x==="pending"||x==="refreshing"}},latest:{get(){if(!l)return L();const x=y();if(x&&!s)throw x;return f()}}});let _=rt;return u?or(()=>(_=rt,b(!1))):b(!1),[L,{refetch:x=>_o(_,()=>b(x)),mutate:g}]}function mo(t){return Ut(t,!1)}function ft(t){if(st===null)return t();const n=st;st=null;try{return t()}finally{st=n}}function Me(t,n,e){const i=Array.isArray(t);let a,r=e&&e.defer;return s=>{let o;if(i){o=Array(t.length);for(let h=0;h<t.length;h++)o[h]=t[h]()}else o=t();if(r)return r=!1,s;const c=ft(()=>n(o,a,s));return a=o,c}}function ar(t){Zt(()=>ft(t))}function de(t){return rt===null||(rt.cleanups===null?rt.cleanups=[t]:rt.cleanups.push(t)),t}function yo(t,n){Ee||(Ee=Symbol("error")),rt=Le(void 0,void 0,!0),rt.context={...rt.context,[Ee]:[n]};try{return t()}catch(e){Ne(e)}finally{rt=rt.owner}}function di(){return st}function bo(){return rt}function _o(t,n){const e=rt,i=st;rt=t,st=null;try{return Ut(n,!0)}catch(a){Ne(a)}finally{rt=e,st=i}}const[vc,wc]=kt(!1);function vo(t){Pt.push.apply(Pt,t),t.length=0}function Fe(t,n){const e=Symbol("context");return{id:e,Provider:Po(e),defaultValue:t}}function ue(t){let n;return rt&&rt.context&&(n=rt.context[t.id])!==void 0?n:t.defaultValue}function lr(t){const n=dt(t),e=dt(()=>fi(n()));return e.toArray=()=>{const i=e();return Array.isArray(i)?i:i!=null?[i]:[]},e}let fe;function wo(){return fe||(fe=Fe())}function cr(){if(this.sources&&this.state)if(this.state===Ot)ge(this);else{const t=gt;gt=null,Ut(()=>In(this),!1),gt=t}if(st){const t=this.observers?this.observers.length:0;st.sources?(st.sources.push(this),st.sourceSlots.push(t)):(st.sources=[this],st.sourceSlots=[t]),this.observers?(this.observers.push(st),this.observerSlots.push(st.sources.length-1)):(this.observers=[st],this.observerSlots=[st.sources.length-1])}return this.value}function hr(t,n,e){let i=t.value;return(!t.comparator||!t.comparator(i,n))&&(t.value=n,t.observers&&t.observers.length&&Ut(()=>{for(let a=0;a<t.observers.length;a+=1){const r=t.observers[a],s=Nn&&Nn.running;s&&Nn.disposed.has(r),(s?!r.tState:!r.state)&&(r.pure?gt.push(r):Pt.push(r),r.observers&&ur(r)),s||(r.state=Ot)}if(gt.length>1e6)throw gt=[],new Error},!1)),n}function ge(t){if(!t.fn)return;Oe(t);const n=Dn;So(t,t.value,n)}function So(t,n,e){let i;const a=rt,r=st;st=rt=t;try{i=t.fn(n)}catch(s){return t.pure&&(t.state=Ot,t.owned&&t.owned.forEach(Oe),t.owned=null),t.updatedAt=e+1,Ne(s)}finally{st=r,rt=a}(!t.updatedAt||t.updatedAt<=e)&&(t.updatedAt!=null&&"observers"in t?hr(t,i):t.value=i,t.updatedAt=e)}function Le(t,n,e,i=Ot,a){const r={fn:t,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:rt,context:rt?rt.context:null,pure:e};return rt===null||rt!==rr&&(rt.owned?rt.owned.push(r):rt.owned=[r]),r}function Gn(t){if(t.state===0)return;if(t.state===On)return In(t);if(t.suspense&&ft(t.suspense.inFallback))return t.suspense.effects.push(t);const n=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Dn);)t.state&&n.push(t);for(let e=n.length-1;e>=0;e--)if(t=n[e],t.state===Ot)ge(t);else if(t.state===On){const i=gt;gt=null,Ut(()=>In(t,n[0]),!1),gt=i}}function Ut(t,n){if(gt)return t();let e=!1;n||(gt=[]),Pt?e=!0:Pt=[],Dn++;try{const i=t();return Co(e),i}catch(i){e||(Pt=null),gt=null,Ne(i)}}function Co(t){if(gt&&(dr(gt),gt=null),t)return;const n=Pt;Pt=null,n.length&&Ut(()=>ir(n),!1)}function dr(t){for(let n=0;n<t.length;n++)Gn(t[n])}function xo(t){let n,e=0;for(n=0;n<t.length;n++){const i=t[n];i.user?t[e++]=i:Gn(i)}if(J.context){if(J.count){J.effects||(J.effects=[]),J.effects.push(...t.slice(0,e));return}Te()}for(J.effects&&(J.done||!J.count)&&(t=[...J.effects,...t],e+=J.effects.length,delete J.effects),n=0;n<e;n++)Gn(t[n])}function In(t,n){t.state=0;for(let e=0;e<t.sources.length;e+=1){const i=t.sources[e];if(i.sources){const a=i.state;a===Ot?i!==n&&(!i.updatedAt||i.updatedAt<Dn)&&Gn(i):a===On&&In(i,n)}}}function ur(t){for(let n=0;n<t.observers.length;n+=1){const e=t.observers[n];e.state||(e.state=On,e.pure?gt.push(e):Pt.push(e),e.observers&&ur(e))}}function Oe(t){let n;if(t.sources)for(;t.sources.length;){const e=t.sources.pop(),i=t.sourceSlots.pop(),a=e.observers;if(a&&a.length){const r=a.pop(),s=e.observerSlots.pop();i<a.length&&(r.sourceSlots[s]=i,a[i]=r,e.observerSlots[i]=s)}}if(t.tOwned){for(n=t.tOwned.length-1;n>=0;n--)Oe(t.tOwned[n]);delete t.tOwned}if(t.owned){for(n=t.owned.length-1;n>=0;n--)Oe(t.owned[n]);t.owned=null}if(t.cleanups){for(n=t.cleanups.length-1;n>=0;n--)t.cleanups[n]();t.cleanups=null}t.state=0}function ui(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function fr(t,n,e){try{for(const i of n)i(t)}catch(i){Ne(i,e&&e.owner||null)}}function Ne(t,n=rt){const e=Ee&&n&&n.context&&n.context[Ee],i=ui(t);if(!e)throw i;Pt?Pt.push({fn(){fr(i,e,n)},state:Ot}):fr(i,e,n)}function fi(t){if(typeof t=="function"&&!t.length)return fi(t());if(Array.isArray(t)){const n=[];for(let e=0;e<t.length;e++){const i=fi(t[e]);Array.isArray(i)?n.push.apply(n,i):n.push(i)}return n}return t}function Po(t,n){return function(i){let a;return mt(()=>a=ft(()=>(rt.context={...rt.context,[t]:i.value},lr(()=>i.children))),void 0),a}}function K(t,n){return ft(()=>t(n||{}))}function Bn(){return!0}const gi={get(t,n,e){return n===Tt?e:t.get(n)},has(t,n){return n===Tt?!0:t.has(n)},set:Bn,deleteProperty:Bn,getOwnPropertyDescriptor(t,n){return{configurable:!0,enumerable:!0,get(){return t.get(n)},set:Bn,deleteProperty:Bn}},ownKeys(t){return t.keys()}};function pi(t){return(t=typeof t=="function"?t():t)?t:{}}function ko(){for(let t=0,n=this.length;t<n;++t){const e=this[t]();if(e!==void 0)return e}}function pe(...t){let n=!1;for(let s=0;s<t.length;s++){const o=t[s];n=n||!!o&&Tt in o,t[s]=typeof o=="function"?(n=!0,dt(o)):o}if(er&&n)return new Proxy({get(s){for(let o=t.length-1;o>=0;o--){const c=pi(t[o])[s];if(c!==void 0)return c}},has(s){for(let o=t.length-1;o>=0;o--)if(s in pi(t[o]))return!0;return!1},keys(){const s=[];for(let o=0;o<t.length;o++)s.push(...Object.keys(pi(t[o])));return[...new Set(s)]}},gi);const e={},i=Object.create(null);for(let s=t.length-1;s>=0;s--){const o=t[s];if(!o)continue;const c=Object.getOwnPropertyNames(o);for(let h=c.length-1;h>=0;h--){const l=c[h];if(l==="__proto__"||l==="constructor")continue;const u=Object.getOwnPropertyDescriptor(o,l);if(!i[l])i[l]=u.get?{enumerable:!0,configurable:!0,get:ko.bind(e[l]=[u.get.bind(o)])}:u.value!==void 0?u:void 0;else{const p=e[l];p&&(u.get?p.push(u.get.bind(o)):u.value!==void 0&&p.push(()=>u.value))}}}const a={},r=Object.keys(i);for(let s=r.length-1;s>=0;s--){const o=r[s],c=i[o];c&&c.get?Object.defineProperty(a,o,c):a[o]=c?c.value:void 0}return a}function gr(t,...n){if(er&&Tt in t){const a=new Set(n.length>1?n.flat():n[0]),r=n.map(s=>new Proxy({get(o){return s.includes(o)?t[o]:void 0},has(o){return s.includes(o)&&o in t},keys(){return s.filter(o=>o in t)}},gi));return r.push(new Proxy({get(s){return a.has(s)?void 0:t[s]},has(s){return a.has(s)?!1:s in t},keys(){return Object.keys(t).filter(s=>!a.has(s))}},gi)),r}const e={},i=n.map(()=>({}));for(const a of Object.getOwnPropertyNames(t)){const r=Object.getOwnPropertyDescriptor(t,a),s=!r.get&&!r.set&&r.enumerable&&r.writable&&r.configurable;let o=!1,c=0;for(const h of n)h.includes(a)&&(o=!0,s?i[c][a]=r.value:Object.defineProperty(i[c],a,r)),++c;o||(s?e[a]=r.value:Object.defineProperty(e,a,r))}return[...i,e]}const pr=t=>`Stale read from <${t}>.`;function Ro(t){const n=t.keyed,e=dt(()=>t.when,void 0,void 0),i=n?e:dt(e,void 0,{equals:(a,r)=>!a==!r});return dt(()=>{const a=i();if(a){const r=t.children;return typeof r=="function"&&r.length>0?ft(()=>r(n?a:()=>{if(!ft(i))throw pr("Show");return e()})):r}return t.fallback},void 0,void 0)}function mr(t){const n=lr(()=>t.children),e=dt(()=>{const i=n(),a=Array.isArray(i)?i:[i];let r=()=>{};for(let s=0;s<a.length;s++){const o=s,c=a[s],h=r,l=dt(()=>h()?void 0:c.when,void 0,void 0),u=c.keyed?l:dt(l,void 0,{equals:(p,f)=>!p==!f});r=()=>h()||(u()?[o,l,c]:void 0)}return r});return dt(()=>{const i=e()();if(!i)return t.fallback;const[a,r,s]=i,o=s.children;return typeof o=="function"&&o.length>0?ft(()=>o(s.keyed?r():()=>{var h;if(((h=ft(e)())==null?void 0:h[0])!==a)throw pr("Match");return r()})):o},void 0,void 0)}function te(t){return t}let Un;function Ao(t){let n;J.context&&J.load&&(n=J.load(J.getContextId()));const[e,i]=kt(n,void 0);return Un||(Un=new Set),Un.add(i),de(()=>Un.delete(i)),dt(()=>{let a;if(a=e()){const r=t.fallback;return typeof r=="function"&&r.length?ft(()=>r(a,()=>i())):r}return yo(()=>t.children,i)},void 0,void 0)}const To=Fe();function mi(t){let n=0,e,i,a,r,s;const[o,c]=kt(!1),h=wo(),l={increment:()=>{++n===1&&c(!0)},decrement:()=>{--n===0&&c(!1)},inFallback:o,effects:[],resolved:!1},u=bo();if(J.context&&J.load){const g=J.getContextId();let y=J.load(g);if(y&&(typeof y!="object"||y.status!=="success"?a=y:J.gather(g)),a&&a!=="$$f"){const[S,P]=kt(void 0,{equals:!1});r=S,a.then(()=>{if(J.done)return P();J.gather(g),Te(i),P(),Te()},m=>{s=m,P()})}}const p=ue(To);p&&(e=p.register(l.inFallback));let f;return de(()=>f&&f()),K(h.Provider,{value:l,get children(){return dt(()=>{if(s)throw s;if(i=J.context,r)return r(),r=void 0;i&&a==="$$f"&&Te();const g=dt(()=>t.children);return dt(y=>{const S=l.inFallback(),{showContent:P=!0,showFallback:m=!0}=e?e():{};if((!S||a&&a!=="$$f")&&P)return l.resolved=!0,f&&f(),f=i=a=void 0,vo(l.effects),g();if(m)return f?y:sr(d=>(f=d,i&&(Te({id:i.id+"F",count:0}),i=void 0),t.fallback),u)})})}})}const Eo=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Mo=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...Eo]),Fo=new Set(["innerHTML","textContent","innerText","children"]),Lo=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Oo=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function No(t,n){const e=Oo[t];return typeof e=="object"?e[n]?e.$:void 0:e}const Do=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Go=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Io={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Et=t=>dt(()=>t());function Bo(t,n,e){let i=e.length,a=n.length,r=i,s=0,o=0,c=n[a-1].nextSibling,h=null;for(;s<a||o<r;){if(n[s]===e[o]){s++,o++;continue}for(;n[a-1]===e[r-1];)a--,r--;if(a===s){const l=r<i?o?e[o-1].nextSibling:e[r-o]:c;for(;o<r;)t.insertBefore(e[o++],l)}else if(r===o)for(;s<a;)(!h||!h.has(n[s]))&&n[s].remove(),s++;else if(n[s]===e[r-1]&&e[o]===n[a-1]){const l=n[--a].nextSibling;t.insertBefore(e[o++],n[s++].nextSibling),t.insertBefore(e[--r],l),n[a]=e[r]}else{if(!h){h=new Map;let u=o;for(;u<r;)h.set(e[u],u++)}const l=h.get(n[s]);if(l!=null)if(o<l&&l<r){let u=s,p=1,f;for(;++u<a&&u<r&&!((f=h.get(n[u]))==null||f!==l+p);)p++;if(p>l-o){const g=n[s];for(;o<l;)t.insertBefore(e[o++],g)}else t.replaceChild(e[o++],n[s++])}else s++;else n[s++].remove()}}}const yr="_$DX_DELEGATE";function Uo(t,n,e,i={}){let a;return sr(r=>{a=r,n===document?t():Rt(n,t(),n.firstChild?null:void 0,e)},i.owner),()=>{a(),n.textContent=""}}function Nt(t,n,e,i){let a;const r=()=>{const o=document.createElement("template");return o.innerHTML=t,o.content.firstChild},s=n?()=>ft(()=>document.importNode(a||(a=r()),!0)):()=>(a||(a=r())).cloneNode(!0);return s.cloneNode=s,s}function yi(t,n=window.document){const e=n[yr]||(n[yr]=new Set);for(let i=0,a=t.length;i<a;i++){const r=t[i];e.has(r)||(e.add(r),n.addEventListener(r,Yo))}}function bi(t,n,e){ee(t)||(e==null?t.removeAttribute(n):t.setAttribute(n,e))}function Vo(t,n,e,i){ee(t)||(i==null?t.removeAttributeNS(n,e):t.setAttributeNS(n,e,i))}function Ho(t,n,e){ee(t)||(e?t.setAttribute(n,""):t.removeAttribute(n))}function _i(t,n){ee(t)||(n==null?t.removeAttribute("class"):t.className=n)}function zo(t,n,e,i){if(i)Array.isArray(e)?(t[`$$${n}`]=e[0],t[`$$${n}Data`]=e[1]):t[`$$${n}`]=e;else if(Array.isArray(e)){const a=e[0];t.addEventListener(n,e[0]=r=>a.call(t,e[1],r))}else t.addEventListener(n,e,typeof e!="function"&&e)}function jo(t,n,e={}){const i=Object.keys(n||{}),a=Object.keys(e);let r,s;for(r=0,s=a.length;r<s;r++){const o=a[r];!o||o==="undefined"||n[o]||(_r(t,o,!1),delete e[o])}for(r=0,s=i.length;r<s;r++){const o=i[r],c=!!n[o];!o||o==="undefined"||e[o]===c||!c||(_r(t,o,!0),e[o]=c)}return e}function $o(t,n,e){if(!n)return e?bi(t,"style"):n;const i=t.style;if(typeof n=="string")return i.cssText=n;typeof e=="string"&&(i.cssText=e=void 0),e||(e={}),n||(n={});let a,r;for(r in e)n[r]==null&&i.removeProperty(r),delete e[r];for(r in n)a=n[r],a!==e[r]&&(i.setProperty(r,a),e[r]=a);return e}function br(t,n={},e,i){const a={};return i||mt(()=>a.children=De(t,n.children,a.children)),mt(()=>typeof n.ref=="function"&&vi(n.ref,t)),mt(()=>qo(t,n,e,!0,a,!0)),a}function vi(t,n,e){return ft(()=>t(n,e))}function Rt(t,n,e,i){if(e!==void 0&&!i&&(i=[]),typeof n!="function")return De(t,n,i,e);mt(a=>De(t,n(),a,e),i)}function qo(t,n,e,i,a={},r=!1){n||(n={});for(const s in a)if(!(s in n)){if(s==="children")continue;a[s]=vr(t,s,null,a[s],e,r,n)}for(const s in n){if(s==="children")continue;const o=n[s];a[s]=vr(t,s,o,a[s],e,r,n)}}function Wo(t){let n,e;return!ee()||!(n=J.registry.get(e=Xo()))?t():(J.completed&&J.completed.add(n),J.registry.delete(e),n)}function ee(t){return!!J.context&&!J.done&&(!t||t.isConnected)}function Ko(t){return t.toLowerCase().replace(/-([a-z])/g,(n,e)=>e.toUpperCase())}function _r(t,n,e){const i=n.trim().split(/\s+/);for(let a=0,r=i.length;a<r;a++)t.classList.toggle(i[a],e)}function vr(t,n,e,i,a,r,s){let o,c,h,l,u;if(n==="style")return $o(t,e,i);if(n==="classList")return jo(t,e,i);if(e===i)return i;if(n==="ref")r||e(t);else if(n.slice(0,3)==="on:"){const p=n.slice(3);i&&t.removeEventListener(p,i,typeof i!="function"&&i),e&&t.addEventListener(p,e,typeof e!="function"&&e)}else if(n.slice(0,10)==="oncapture:"){const p=n.slice(10);i&&t.removeEventListener(p,i,!0),e&&t.addEventListener(p,e,!0)}else if(n.slice(0,2)==="on"){const p=n.slice(2).toLowerCase(),f=Do.has(p);if(!f&&i){const g=Array.isArray(i)?i[0]:i;t.removeEventListener(p,g)}(f||e)&&(zo(t,p,e,f),f&&yi([p]))}else if(n.slice(0,5)==="attr:")bi(t,n.slice(5),e);else if(n.slice(0,5)==="bool:")Ho(t,n.slice(5),e);else if((u=n.slice(0,5)==="prop:")||(h=Fo.has(n))||!a&&((l=No(n,t.tagName))||(c=Mo.has(n)))||(o=t.nodeName.includes("-")||"is"in s)){if(u)n=n.slice(5),c=!0;else if(ee(t))return e;n==="class"||n==="className"?_i(t,e):o&&!c&&!h?t[Ko(n)]=e:t[l||n]=e}else{const p=a&&n.indexOf(":")>-1&&Io[n.split(":")[0]];p?Vo(t,p,n,e):bi(t,Lo[n]||n,e)}return e}function Yo(t){if(J.registry&&J.events&&J.events.find(([c,h])=>h===t))return;let n=t.target;const e=`$$${t.type}`,i=t.target,a=t.currentTarget,r=c=>Object.defineProperty(t,"target",{configurable:!0,value:c}),s=()=>{const c=n[e];if(c&&!n.disabled){const h=n[`${e}Data`];if(h!==void 0?c.call(n,h,t):c.call(n,t),t.cancelBubble)return}return n.host&&typeof n.host!="string"&&!n.host._$host&&n.contains(t.target)&&r(n.host),!0},o=()=>{for(;s()&&(n=n._$host||n.parentNode||n.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),J.registry&&!J.done&&(J.done=_$HY.done=!0),t.composedPath){const c=t.composedPath();r(c[0]);for(let h=0;h<c.length-2&&(n=c[h],!!s());h++){if(n._$host){n=n._$host,o();break}if(n.parentNode===a)break}}else o();r(i)}function De(t,n,e,i,a){const r=ee(t);if(r){!e&&(e=[...t.childNodes]);let c=[];for(let h=0;h<e.length;h++){const l=e[h];l.nodeType===8&&l.data.slice(0,2)==="!$"?l.remove():c.push(l)}e=c}for(;typeof e=="function";)e=e();if(n===e)return e;const s=typeof n,o=i!==void 0;if(t=o&&e[0]&&e[0].parentNode||t,s==="string"||s==="number"){if(r||s==="number"&&(n=n.toString(),n===e))return e;if(o){let c=e[0];c&&c.nodeType===3?c.data!==n&&(c.data=n):c=document.createTextNode(n),e=me(t,e,i,c)}else e!==""&&typeof e=="string"?e=t.firstChild.data=n:e=t.textContent=n}else if(n==null||s==="boolean"){if(r)return e;e=me(t,e,i)}else{if(s==="function")return mt(()=>{let c=n();for(;typeof c=="function";)c=c();e=De(t,c,e,i)}),()=>e;if(Array.isArray(n)){const c=[],h=e&&Array.isArray(e);if(wi(c,n,e,a))return mt(()=>e=De(t,c,e,i,!0)),()=>e;if(r){if(!c.length)return e;if(i===void 0)return e=[...t.childNodes];let l=c[0];if(l.parentNode!==t)return e;const u=[l];for(;(l=l.nextSibling)!==i;)u.push(l);return e=u}if(c.length===0){if(e=me(t,e,i),o)return e}else h?e.length===0?wr(t,c,i):Bo(t,e,c):(e&&me(t),wr(t,c));e=c}else if(n.nodeType){if(r&&n.parentNode)return e=o?[n]:n;if(Array.isArray(e)){if(o)return e=me(t,e,i,n);me(t,e,null,n)}else e==null||e===""||!t.firstChild?t.appendChild(n):t.replaceChild(n,t.firstChild);e=n}}return e}function wi(t,n,e,i){let a=!1;for(let r=0,s=n.length;r<s;r++){let o=n[r],c=e&&e[t.length],h;if(!(o==null||o===!0||o===!1))if((h=typeof o)=="object"&&o.nodeType)t.push(o);else if(Array.isArray(o))a=wi(t,o,c)||a;else if(h==="function")if(i){for(;typeof o=="function";)o=o();a=wi(t,Array.isArray(o)?o:[o],Array.isArray(c)?c:[c])||a}else t.push(o),a=!0;else{const l=String(o);c&&c.nodeType===3&&c.data===l?t.push(c):t.push(document.createTextNode(l))}}return a}function wr(t,n,e=null){for(let i=0,a=n.length;i<a;i++)t.insertBefore(n[i],e)}function me(t,n,e,i){if(e===void 0)return t.textContent="";const a=i||document.createTextNode("");if(n.length){let r=!1;for(let s=n.length-1;s>=0;s--){const o=n[s];if(a!==o){const c=o.parentNode===t;!r&&!s?c?t.replaceChild(a,o):t.insertBefore(a,e):c&&o.remove()}else r=!0}}else t.insertBefore(a,e);return[a]}function Xo(){return J.getNextContextId()}const Jo=!1,Qo="http://www.w3.org/2000/svg";function Zo(t,n=!1){return n?document.createElementNS(Qo,t):document.createElement(t)}function ta(t,n){const e=dt(t);return dt(()=>{const i=e();switch(typeof i){case"function":return ft(()=>i(n));case"string":const a=Go.has(i),r=J.context?Wo():Zo(i,a);return br(r,n,a),r}})}function Vt(t){const[,n]=gr(t,["component"]);return ta(()=>t.component,n)}var ea="Invariant failed";function Ht(t,n){if(!t)throw new Error(ea)}function Sc(t,n){}const ye=new WeakMap,Vn=new WeakMap,Hn={current:[]};let Si=!1,Ge=0;const Ie=new Set,zn=new Map;function Sr(t){const n=Array.from(t).sort((e,i)=>e instanceof be&&e.options.deps.includes(i)?1:i instanceof be&&i.options.deps.includes(e)?-1:0);for(const e of n){if(Hn.current.includes(e))continue;Hn.current.push(e),e.recompute();const i=Vn.get(e);if(i)for(const a of i){const r=ye.get(a);r&&Sr(r)}}}function na(t){t.listeners.forEach(n=>n({prevVal:t.prevState,currentVal:t.state}))}function ia(t){t.listeners.forEach(n=>n({prevVal:t.prevState,currentVal:t.state}))}function Cr(t){if(Ge>0&&!zn.has(t)&&zn.set(t,t.prevState),Ie.add(t),!(Ge>0)&&!Si)try{for(Si=!0;Ie.size>0;){const n=Array.from(Ie);Ie.clear();for(const e of n){const i=zn.get(e)??e.prevState;e.prevState=i,na(e)}for(const e of n){const i=ye.get(e);i&&(Hn.current.push(e),Sr(i))}for(const e of n){const i=ye.get(e);if(i)for(const a of i)ia(a)}}}finally{Si=!1,Hn.current=[],zn.clear()}}function Ci(t){Ge++;try{t()}finally{if(Ge--,Ge===0){const n=Array.from(Ie)[0];n&&Cr(n)}}}class xi{constructor(n,e){this.listeners=new Set,this.subscribe=i=>{var a,r;this.listeners.add(i);const s=(r=(a=this.options)==null?void 0:a.onSubscribe)==null?void 0:r.call(a,i,this);return()=>{this.listeners.delete(i),s==null||s()}},this.setState=i=>{var a,r,s;this.prevState=this.state,this.state=(a=this.options)!=null&&a.updateFn?this.options.updateFn(this.prevState)(i):i(this.prevState),(s=(r=this.options)==null?void 0:r.onUpdate)==null||s.call(r),Cr(this)},this.prevState=n,this.state=n,this.options=e}}class be{constructor(n){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const e=[],i=[];for(const a of this.options.deps)e.push(a.prevState),i.push(a.state);return this.lastSeenDepValues=i,{prevDepVals:e,currDepVals:i,prevVal:this.prevState??void 0}},this.recompute=()=>{var e,i;this.prevState=this.state;const{prevDepVals:a,currDepVals:r,prevVal:s}=this.getDepVals();this.state=this.options.fn({prevDepVals:a,currDepVals:r,prevVal:s}),(i=(e=this.options).onUpdate)==null||i.call(e)},this.checkIfRecalculationNeededDeeply=()=>{for(const r of this.options.deps)r instanceof be&&r.checkIfRecalculationNeededDeeply();let e=!1;const i=this.lastSeenDepValues,{currDepVals:a}=this.getDepVals();for(let r=0;r<a.length;r++)if(a[r]!==i[r]){e=!0;break}e&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const e of this._subscriptions)e()}),this.subscribe=e=>{var i,a;this.listeners.add(e);const r=(a=(i=this.options).onSubscribe)==null?void 0:a.call(i,e,this);return()=>{this.listeners.delete(e),r==null||r()}},this.options=n,this.state=n.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(n=this.options.deps){for(const e of n)if(e instanceof be)e.registerOnGraph(),this.registerOnGraph(e.options.deps);else if(e instanceof xi){let i=ye.get(e);i||(i=new Set,ye.set(e,i)),i.add(this);let a=Vn.get(this);a||(a=new Set,Vn.set(this,a)),a.add(e)}}unregisterFromGraph(n=this.options.deps){for(const e of n)if(e instanceof be)this.unregisterFromGraph(e.options.deps);else if(e instanceof xi){const i=ye.get(e);i&&i.delete(this);const a=Vn.get(this);a&&a.delete(e)}}}const Kt="__TSR_index",xr="popstate",Pr="beforeunload";function kr(t){let n=t.getLocation();const e=new Set,i=s=>{n=t.getLocation(),e.forEach(o=>o({location:n,action:s}))},a=s=>{t.notifyOnIndexChange??!0?i(s):n=t.getLocation()},r=async({task:s,navigateOpts:o,...c})=>{var h,l;if((o==null?void 0:o.ignoreBlocker)??!1){s();return}const p=((h=t.getBlockers)==null?void 0:h.call(t))??[],f=c.type==="PUSH"||c.type==="REPLACE";if(typeof document<"u"&&p.length&&f)for(const g of p){const y=Be(c.path,c.state);if(await g.blockerFn({currentLocation:n,nextLocation:y,action:c.type})){(l=t.onBlocked)==null||l.call(t);return}}s()};return{get location(){return n},get length(){return t.getLength()},subscribers:e,subscribe:s=>(e.add(s),()=>{e.delete(s)}),push:(s,o,c)=>{const h=n.state[Kt];o=Pi(h+1,o),r({task:()=>{t.pushState(s,o),i({type:"PUSH"})},navigateOpts:c,type:"PUSH",path:s,state:o})},replace:(s,o,c)=>{const h=n.state[Kt];o=Pi(h,o),r({task:()=>{t.replaceState(s,o),i({type:"REPLACE"})},navigateOpts:c,type:"REPLACE",path:s,state:o})},go:(s,o)=>{r({task:()=>{t.go(s),a({type:"GO",index:s})},navigateOpts:o,type:"GO"})},back:s=>{r({task:()=>{t.back((s==null?void 0:s.ignoreBlocker)??!1),a({type:"BACK"})},navigateOpts:s,type:"BACK"})},forward:s=>{r({task:()=>{t.forward((s==null?void 0:s.ignoreBlocker)??!1),a({type:"FORWARD"})},navigateOpts:s,type:"FORWARD"})},canGoBack:()=>n.state[Kt]!==0,createHref:s=>t.createHref(s),block:s=>{var o;if(!t.setBlockers)return()=>{};const c=((o=t.getBlockers)==null?void 0:o.call(t))??[];return t.setBlockers([...c,s]),()=>{var h,l;const u=((h=t.getBlockers)==null?void 0:h.call(t))??[];(l=t.setBlockers)==null||l.call(t,u.filter(p=>p!==s))}},flush:()=>{var s;return(s=t.flush)==null?void 0:s.call(t)},destroy:()=>{var s;return(s=t.destroy)==null?void 0:s.call(t)},notify:i}}function Pi(t,n){return n||(n={}),{...n,key:ki(),[Kt]:t}}function ra(t){var n;const e=typeof document<"u"?window:void 0,i=e.history.pushState,a=e.history.replaceState;let r=[];const s=()=>r,o=_=>r=_,c=_=>_,h=()=>Be(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);(n=e.history.state)!=null&&n.key||e.history.replaceState({[Kt]:0,key:ki()},"");let l=h(),u,p=!1,f=!1,g=!1,y=!1;const S=()=>l;let P,m;const d=()=>{P&&(b._ignoreSubscribers=!0,(P.isPush?e.history.pushState:e.history.replaceState)(P.state,"",P.href),b._ignoreSubscribers=!1,P=void 0,m=void 0,u=void 0)},v=(_,x,A)=>{const T=c(x);m||(u=l),l=Be(x,A),P={href:T,state:A,isPush:(P==null?void 0:P.isPush)||_==="push"},m||(m=Promise.resolve().then(()=>d()))},C=_=>{l=h(),b.notify({type:_})},k=async()=>{if(f){f=!1;return}const _=h(),x=_.state[Kt]-l.state[Kt],A=x===1,T=x===-1,N=!A&&!T||p;p=!1;const I=N?"GO":T?"BACK":"FORWARD",D=N?{type:"GO",index:x}:{type:T?"BACK":"FORWARD"};if(g)g=!1;else{const H=s();if(typeof document<"u"&&H.length){for(const w of H)if(await w.blockerFn({currentLocation:l,nextLocation:_,action:I})){f=!0,e.history.go(1),b.notify(D);return}}}l=h(),b.notify(D)},L=_=>{if(y){y=!1;return}let x=!1;const A=s();if(typeof document<"u"&&A.length)for(const T of A){const N=T.enableBeforeUnload??!0;if(N===!0){x=!0;break}if(typeof N=="function"&&N()===!0){x=!0;break}}if(x)return _.preventDefault(),_.returnValue=""},b=kr({getLocation:S,getLength:()=>e.history.length,pushState:(_,x)=>v("push",_,x),replaceState:(_,x)=>v("replace",_,x),back:_=>(_&&(g=!0),y=!0,e.history.back()),forward:_=>{_&&(g=!0),y=!0,e.history.forward()},go:_=>{p=!0,e.history.go(_)},createHref:_=>c(_),flush:d,destroy:()=>{e.history.pushState=i,e.history.replaceState=a,e.removeEventListener(Pr,L,{capture:!0}),e.removeEventListener(xr,k)},onBlocked:()=>{u&&l!==u&&(l=u)},getBlockers:s,setBlockers:o,notifyOnIndexChange:!1});return e.addEventListener(Pr,L,{capture:!0}),e.addEventListener(xr,k),e.history.pushState=function(..._){const x=i.apply(e.history,_);return b._ignoreSubscribers||C("PUSH"),x},e.history.replaceState=function(..._){const x=a.apply(e.history,_);return b._ignoreSubscribers||C("REPLACE"),x},b}function sa(t={initialEntries:["/"]}){const n=t.initialEntries;let e=t.initialIndex?Math.min(Math.max(t.initialIndex,0),n.length-1):n.length-1;const i=n.map((r,s)=>Pi(s,void 0));return kr({getLocation:()=>Be(n[e],i[e]),getLength:()=>n.length,pushState:(r,s)=>{e<n.length-1&&(n.splice(e+1),i.splice(e+1)),i.push(s),n.push(r),e=Math.max(n.length-1,0)},replaceState:(r,s)=>{i[e]=s,n[e]=r},back:()=>{e=Math.max(e-1,0)},forward:()=>{e=Math.min(e+1,n.length-1)},go:r=>{e=Math.min(Math.max(e+r,0),n.length-1)},createHref:r=>r})}function Be(t,n){const e=t.indexOf("#"),i=t.indexOf("?");return{href:t,pathname:t.substring(0,e>0?i>0?Math.min(e,i):e:i>0?i:t.length),hash:e>-1?t.substring(e):"",search:i>-1?t.slice(i,e===-1?void 0:e):"",state:n||{[Kt]:0,key:ki()}}}function ki(){return(Math.random()+1).toString(36).substring(7)}function _e(t){return t[t.length-1]}function oa(t){return typeof t=="function"}function Ue(t,n){return oa(t)?t(n):t}function Ri(t,n){return n.reduce((e,i)=>(e[i]=t[i],e),{})}function Mt(t,n){if(t===n)return t;const e=n,i=Ar(t)&&Ar(e);if(i||jn(t)&&jn(e)){const a=i?t:Object.keys(t),r=a.length,s=i?e:Object.keys(e),o=s.length,c=i?[]:{};let h=0;for(let l=0;l<o;l++){const u=i?l:s[l];(!i&&a.includes(u)||i)&&t[u]===void 0&&e[u]===void 0?(c[u]=void 0,h++):(c[u]=Mt(t[u],e[u]),c[u]===t[u]&&t[u]!==void 0&&h++)}return r===o&&h===r?t:c}return e}function jn(t){if(!Rr(t))return!1;const n=t.constructor;if(typeof n>"u")return!0;const e=n.prototype;return!(!Rr(e)||!e.hasOwnProperty("isPrototypeOf"))}function Rr(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ar(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Tr(t,n){let e=Object.keys(t);return n&&(e=e.filter(i=>t[i]!==void 0)),e}function Ve(t,n,e){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(jn(t)&&jn(n)){const i=(e==null?void 0:e.ignoreUndefined)??!0,a=Tr(t,i),r=Tr(n,i);return!(e!=null&&e.partial)&&a.length!==r.length?!1:r.every(s=>Ve(t[s],n[s],e))}return Array.isArray(t)&&Array.isArray(n)?t.length!==n.length?!1:!t.some((i,a)=>!Ve(i,n[a],e)):!1}function ve(t){let n,e;const i=new Promise((a,r)=>{n=a,e=r});return i.status="pending",i.resolve=a=>{i.status="resolved",i.value=a,n(a),t==null||t(a)},i.reject=a=>{i.status="rejected",e(a)},i}function aa(t){return/%[0-9A-Fa-f]{2}/.test(t)}function zt(t){return $n(t.filter(n=>n!==void 0).join("/"))}function $n(t){return t.replace(/\/{2,}/g,"/")}function Ai(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function ne(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function la(t){return ne(Ai(t))}function ca({basepath:t,base:n,to:e,trailingSlash:i="never",caseSensitive:a}){var r,s;n=Kn(t,n,a),e=Kn(t,e,a);let o=we(n);const c=we(e);o.length>1&&((r=_e(o))==null?void 0:r.value)==="/"&&o.pop(),c.forEach((l,u)=>{l.value==="/"?u?u===c.length-1&&o.push(l):o=[l]:l.value===".."?o.pop():l.value==="."||o.push(l)}),o.length>1&&(((s=_e(o))==null?void 0:s.value)==="/"?i==="never"&&o.pop():i==="always"&&o.push({type:"pathname",value:"/"}));const h=zt([t,...o.map(l=>l.value)]);return $n(h)}function we(t){if(!t)return[];t=$n(t);const n=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),n.push({type:"pathname",value:"/"})),!t)return n;const e=t.split("/").filter(Boolean);return n.push(...e.map(i=>i==="$"||i==="*"?{type:"wildcard",value:i}:i.charAt(0)==="$"?{type:"param",value:i}:{type:"pathname",value:i.includes("%25")?i.split("%25").map(a=>decodeURI(a)).join("%25"):decodeURI(i)})),t.slice(-1)==="/"&&(t=t.substring(1),n.push({type:"pathname",value:"/"})),n}function qn({path:t,params:n,leaveWildcards:e,leaveParams:i,decodeCharMap:a}){const r=we(t);function s(l){const u=n[l],p=typeof u=="string";return["*","_splat"].includes(l)?p?encodeURI(u):u:p?ha(u,a):u}let o=!1;const c={},h=zt(r.map(l=>{if(l.type==="wildcard"){c._splat=n._splat;const u=s("_splat");return e?`${l.value}${u??""}`:u}if(l.type==="param"){const u=l.value.substring(1);if(!o&&!(u in n)&&(o=!0),c[u]=n[u],i){const p=s(l.value);return`${l.value}${p??""}`}return s(u)??"undefined"}return l.value}));return{usedParams:c,interpolatedPath:h,isMissingParams:o}}function ha(t,n){let e=encodeURIComponent(t);if(n)for(const[i,a]of n)e=e.replaceAll(i,a);return e}function Wn(t,n,e){const i=da(t,n,e);if(!(e.to&&!i))return i??{}}function Kn(t,n,e=!1){const i=e?t:t.toLowerCase(),a=e?n:n.toLowerCase();switch(!0){case i==="/":return n;case a===i:return"";case n.length<t.length:return n;case a[i.length]!=="/":return n;case a.startsWith(i):return n.slice(t.length);default:return n}}function da(t,n,e){if(t!=="/"&&!n.startsWith(t))return;n=Kn(t,n,e.caseSensitive);const i=Kn(t,`${e.to??"$"}`,e.caseSensitive),a=we(n),r=we(i);n.startsWith("/")||a.unshift({type:"pathname",value:"/"}),i.startsWith("/")||r.unshift({type:"pathname",value:"/"});const s={};return(()=>{for(let c=0;c<Math.max(a.length,r.length);c++){const h=a[c],l=r[c],u=c>=a.length-1,p=c>=r.length-1;if(l){if(l.type==="wildcard"){const f=decodeURI(zt(a.slice(c).map(g=>g.value)));return s["*"]=f,s._splat=f,!0}if(l.type==="pathname"){if(l.value==="/"&&!(h!=null&&h.value))return!0;if(h){if(e.caseSensitive){if(l.value!==h.value)return!1}else if(l.value.toLowerCase()!==h.value.toLowerCase())return!1}}if(!h)return!1;if(l.type==="param"){if(h.value==="/")return!1;h.value.charAt(0)!=="$"&&(s[l.value.substring(1)]=decodeURIComponent(h.value))}}if(!u&&p)return s["**"]=zt(a.slice(c+1).map(f=>f.value)),!!e.fuzzy&&(l==null?void 0:l.value)!=="/"}return!0})()?s:void 0}function At(t){return!!(t!=null&&t.isNotFound)}const Yn="tsr-scroll-restoration-v1_3";let Er=!1;try{Er=typeof window<"u"&&typeof window.sessionStorage=="object"}catch{}const ua=(t,n)=>{let e;return(...i)=>{e||(e=setTimeout(()=>{t(...i),e=null},n))}},Se=Er?{state:JSON.parse(window.sessionStorage.getItem(Yn)||"null")||{},set:n=>(Se.state=Ue(n,Se.state)||Se.state,window.sessionStorage.setItem(Yn,JSON.stringify(Se.state)))}:void 0,Ti=t=>t.state.key||t.href;function fa(t){const n=[];let e;for(;e=t.parentNode;)n.unshift(`${t.tagName}:nth-child(${[].indexOf.call(e.children,t)+1})`),t=e;return`${n.join(" > ")}`.toLowerCase()}let Xn=!1;function Mr(t,n,e,i,a){var r;let s;try{s=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(h){console.error(h);return}const o=n||((r=window.history.state)==null?void 0:r.key),c=s[o];Xn=!0,(()=>{if(i&&c){for(const l in c){const u=c[l];if(l==="window")window.scrollTo({top:u.scrollY,left:u.scrollX,behavior:e});else if(l){const p=document.querySelector(l);p&&(p.scrollLeft=u.scrollX,p.scrollTop=u.scrollY)}}return}const h=window.location.hash.split("#")[1];if(h){const l=(window.history.state||{}).__hashScrollIntoViewOptions??!0;if(l){const u=document.getElementById(h);u&&u.scrollIntoView(l)}return}["window",...(a==null?void 0:a.filter(l=>l!=="window"))??[]].forEach(l=>{const u=l==="window"?window:document.querySelector(l);u&&u.scrollTo({top:0,left:0,behavior:e})})})(),Xn=!1}function ga(t,n){if((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),typeof document>"u"||t.isScrollRestorationSetup)return;t.isScrollRestorationSetup=!0,Xn=!1;const i=t.options.getScrollRestorationKey||Ti;window.history.scrollRestoration="manual";const a=r=>{if(Xn||!t.isScrollRestoring)return;let s="";if(r.target===document||r.target===window)s="window";else{const c=r.target.getAttribute("data-scroll-restoration-id");c?s=`[data-scroll-restoration-id="${c}"]`:s=fa(r.target)}const o=i(t.state.location);Se.set(c=>{const h=c[o]=c[o]||{},l=h[s]=h[s]||{};if(s==="window")l.scrollX=window.scrollX||0,l.scrollY=window.scrollY||0;else if(s){const u=document.querySelector(s);u&&(l.scrollX=u.scrollLeft||0,l.scrollY=u.scrollTop||0)}return c})};typeof document<"u"&&document.addEventListener("scroll",ua(a,100),!0),t.subscribe("onRendered",r=>{const s=i(r.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}Mr(Yn,s,t.options.scrollRestorationBehavior||void 0,t.isScrollRestoring||void 0,t.options.scrollToTopSelectors||void 0),t.isScrollRestoring&&Se.set(o=>(o[s]=o[s]||{},o))})}function pa(t){if(typeof document<"u"&&document.querySelector){const n=t.state.location.state.__hashScrollIntoViewOptions??!0;if(n&&t.state.location.hash!==""){const e=document.getElementById(t.state.location.hash);e&&e.scrollIntoView(n)}}}function ma(t,n){const e=Object.entries(t).flatMap(([a,r])=>Array.isArray(r)?r.map(s=>[a,String(s)]):[[a,String(r)]]);return""+new URLSearchParams(e).toString()}function Ei(t){if(!t)return"";const n=aa(t)?decodeURIComponent(t):decodeURIComponent(encodeURIComponent(t));return n==="false"?!1:n==="true"?!0:+n*0===0&&+n+""===n?+n:n}function ya(t,n){const e=t;return[...new URLSearchParams(e).entries()].reduce((r,[s,o])=>{const c=r[s];return c==null?r[s]=Ei(o):r[s]=Array.isArray(c)?[...c,Ei(o)]:[c,Ei(o)],r},{})}const ba=va(JSON.parse),_a=wa(JSON.stringify,JSON.parse);function va(t){return n=>{n.substring(0,1)==="?"&&(n=n.substring(1));const e=ya(n);for(const i in e){const a=e[i];if(typeof a=="string")try{e[i]=t(a)}catch{}}return e}}function wa(t,n){function e(i){if(typeof i=="object"&&i!==null)try{return t(i)}catch{}else if(typeof i=="string"&&typeof n=="function")try{return n(i),t(i)}catch{}return i}return i=>{i={...i},Object.keys(i).forEach(r=>{const s=i[r];typeof s>"u"||s===void 0?delete i[r]:i[r]=e(s)});const a=ma(i).toString();return a?`?${a}`:""}}const Ft="__root__";function ie(t){return!!(t!=null&&t.isRedirect)}function Mi(t){return!!(t!=null&&t.isRedirect)&&t.href}function re(t){const n=t.resolvedLocation,e=t.location,i=(n==null?void 0:n.pathname)!==e.pathname,a=(n==null?void 0:n.href)!==e.href,r=(n==null?void 0:n.hash)!==e.hash;return{fromLocation:n,toLocation:e,pathChanged:i,hrefChanged:a,hashChanged:r}}class Sa{constructor(n){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=e=>e(),this.update=e=>{var i;e.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const a=this.options;this.options={...this.options,...e},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(r=>[encodeURIComponent(r),r])):void 0,(!this.basepath||e.basepath&&e.basepath!==a.basepath)&&(e.basepath===void 0||e.basepath===""||e.basepath==="/"?this.basepath="/":this.basepath=`/${la(e.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?sa({initialEntries:[this.basepath||"/"]}):ra()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new xi(xa(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(r=>!["redirected"].includes(r.status))}}}),ga(this)),typeof window<"u"&&"CSS"in window&&typeof((i=window.CSS)==null?void 0:i.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const e=this.options.notFoundRoute;e&&(e.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[e.id]=e);const i=s=>{s.forEach((o,c)=>{o.init({originalIndex:c,defaultSsr:this.options.defaultSsr});const h=this.routesById[o.id];if(Ht(!h,`Duplicate routes found with id: ${String(o.id)}`),this.routesById[o.id]=o,!o.isRoot&&o.path){const u=ne(o.fullPath);(!this.routesByPath[u]||o.fullPath.endsWith("/"))&&(this.routesByPath[u]=o)}const l=o.children;l!=null&&l.length&&i(l)})};i([this.routeTree]);const a=[];Object.values(this.routesById).forEach((s,o)=>{var c;if(s.isRoot||!s.path)return;const h=Ai(s.fullPath),l=we(h);for(;l.length>1&&((c=l[0])==null?void 0:c.value)==="/";)l.shift();const u=l.map(p=>p.value==="/"?.75:p.type==="param"?.5:p.type==="wildcard"?.25:1);a.push({child:s,trimmed:h,parsed:l,index:o,scores:u})}),this.flatRoutes=a.sort((s,o)=>{const c=Math.min(s.scores.length,o.scores.length);for(let h=0;h<c;h++)if(s.scores[h]!==o.scores[h])return o.scores[h]-s.scores[h];if(s.scores.length!==o.scores.length)return o.scores.length-s.scores.length;for(let h=0;h<c;h++)if(s.parsed[h].value!==o.parsed[h].value)return s.parsed[h].value>o.parsed[h].value?1:-1;return s.index-o.index}).map((s,o)=>(s.child.rank=o,s.child))},this.subscribe=(e,i)=>{const a={eventType:e,fn:i};return this.subscribers.add(a),()=>{this.subscribers.delete(a)}},this.emit=e=>{this.subscribers.forEach(i=>{i.eventType===e.type&&i.fn(e)})},this.parseLocation=(e,i)=>{const a=({pathname:c,search:h,hash:l,state:u})=>{const p=this.options.parseSearch(h),f=this.options.stringifySearch(p);return{pathname:c,searchStr:f,search:Mt(e==null?void 0:e.search,p),hash:l.split("#").reverse()[0]??"",href:`${c}${f}${l}`,state:Mt(e==null?void 0:e.state,u)}},r=a(i??this.history.location),{__tempLocation:s,__tempKey:o}=r.state;if(s&&(!o||o===this.tempLocationKey)){const c=a(s);return c.state.key=r.state.key,delete c.state.__tempLocation,{...c,maskedLocation:r}}return r},this.resolvePathWithBase=(e,i)=>ca({basepath:this.basepath,base:e,to:$n(i),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.matchRoutes=(e,i,a)=>typeof e=="string"?this.matchRoutesInternal({pathname:e,search:i},a):this.matchRoutesInternal(e,i),this.getMatchedRoutes=(e,i)=>{let a={};const r=ne(e.pathname),s=l=>Wn(this.basepath,r,{to:l.fullPath,caseSensitive:l.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let o=(i==null?void 0:i.to)!==void 0?this.routesByPath[i.to]:void 0;o?a=s(o):o=this.flatRoutes.find(l=>{const u=s(l);return u?(a=u,!0):!1});let c=o||this.routesById[Ft];const h=[c];for(;c.parentRoute;)c=c.parentRoute,h.unshift(c);return{matchedRoutes:h,routeParams:a,foundRoute:o}},this.cancelMatch=e=>{const i=this.getMatch(e);i&&(i.abortController.abort(),clearTimeout(i.pendingTimeout))},this.cancelMatches=()=>{var e;(e=this.state.pendingMatches)==null||e.forEach(i=>{this.cancelMatch(i.id)})},this.buildLocation=e=>{const i=(r={},s)=>{var o,c,h,l,u,p,f;const g=r._fromLocation?this.matchRoutes(r._fromLocation,{_buildLocation:!0}):this.state.matches,y=r.from!=null?g.find(T=>Wn(this.basepath,ne(T.pathname),{to:r.from,caseSensitive:!1,fuzzy:!1})):void 0,S=(y==null?void 0:y.pathname)||this.latestLocation.pathname;Ht(r.from==null||y!=null,"Could not find match for from: "+r.from);const P=(o=this.state.pendingMatches)!=null&&o.length?(c=_e(this.state.pendingMatches))==null?void 0:c.search:((h=_e(g))==null?void 0:h.search)||this.latestLocation.search,m=s==null?void 0:s.matchedRoutes.filter(T=>g.find(N=>N.routeId===T.id));let d;if(r.to){const T=(y==null?void 0:y.fullPath)||((l=_e(g))==null?void 0:l.fullPath)||this.latestLocation.pathname;d=this.resolvePathWithBase(T,`${r.to}`)}else{const T=this.routesById[(u=m==null?void 0:m.find(N=>{const I=qn({path:N.fullPath,params:(s==null?void 0:s.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;return zt([this.basepath,I])===S}))==null?void 0:u.id];d=this.resolvePathWithBase(S,(T==null?void 0:T.to)??S)}const v={...(p=_e(g))==null?void 0:p.params};let C=(r.params??!0)===!0?v:{...v,...Ue(r.params,v)};Object.keys(C).length>0&&(s==null||s.matchedRoutes.map(T=>{var N;return((N=T.options.params)==null?void 0:N.stringify)??T.options.stringifyParams}).filter(Boolean).forEach(T=>{C={...C,...T(C)}})),d=qn({path:d,params:C??{},leaveWildcards:!1,leaveParams:e.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;let k=P;if(e._includeValidateSearch&&((f=this.options.search)!=null&&f.strict)){let T={};s==null||s.matchedRoutes.forEach(N=>{try{N.options.validateSearch&&(T={...T,...Fi(N.options.validateSearch,{...T,...k})??{}})}catch{}}),k=T}k=(T=>{const N=(s==null?void 0:s.matchedRoutes.reduce((H,w)=>{var R;const F=[];if("search"in w.options)(R=w.options.search)!=null&&R.middlewares&&F.push(...w.options.search.middlewares);else if(w.options.preSearchFilters||w.options.postSearchFilters){const E=({search:O,next:V})=>{let G=O;"preSearchFilters"in w.options&&w.options.preSearchFilters&&(G=w.options.preSearchFilters.reduce(($,U)=>U($),O));const z=V(G);return"postSearchFilters"in w.options&&w.options.postSearchFilters?w.options.postSearchFilters.reduce(($,U)=>U($),z):z};F.push(E)}if(e._includeValidateSearch&&w.options.validateSearch){const E=({search:O,next:V})=>{const G=V(O);try{return{...G,...Fi(w.options.validateSearch,G)??{}}}catch{return G}};F.push(E)}return H.concat(F)},[]))??[],I=({search:H})=>r.search?r.search===!0?H:Ue(r.search,H):{};N.push(I);const D=(H,w)=>{if(H>=N.length)return w;const R=N[H];return R({search:w,next:E=>D(H+1,E)})};return D(0,T)})(k),k=Mt(P,k);const b=this.options.stringifySearch(k),_=r.hash===!0?this.latestLocation.hash:r.hash?Ue(r.hash,this.latestLocation.hash):void 0,x=_?`#${_}`:"";let A=r.state===!0?this.latestLocation.state:r.state?Ue(r.state,this.latestLocation.state):{};return A=Mt(this.latestLocation.state,A),{pathname:d,search:k,searchStr:b,state:A,hash:_??"",href:`${d}${b}${x}`,unmaskOnReload:r.unmaskOnReload}},a=(r={},s)=>{var o;const c=i(r);let h=s?i(s):void 0;if(!h){let p={};const f=(o=this.options.routeMasks)==null?void 0:o.find(g=>{const y=Wn(this.basepath,c.pathname,{to:g.from,caseSensitive:!1,fuzzy:!1});return y?(p=y,!0):!1});if(f){const{from:g,...y}=f;s={...Ri(e,["from"]),...y,params:p},h=i(s)}}const l=this.getMatchedRoutes(c,r),u=i(r,l);if(h){const p=this.getMatchedRoutes(h,s),f=i(s,p);u.maskedLocation=f}return u};return e.mask?a(e,{...Ri(e,["from"]),...e.mask}):a(e)},this.commitLocation=({viewTransition:e,ignoreBlocker:i,...a})=>{const r=()=>{const c=["key","__TSR_index","__hashScrollIntoViewOptions"];c.forEach(l=>{a.state[l]=this.latestLocation.state[l]});const h=Ve(a.state,this.latestLocation.state);return c.forEach(l=>{delete a.state[l]}),h},s=this.latestLocation.href===a.href,o=this.commitLocationPromise;if(this.commitLocationPromise=ve(()=>{o==null||o.resolve()}),s&&r())this.load();else{let{maskedLocation:c,hashScrollIntoView:h,...l}=a;c&&(l={...c,state:{...c.state,__tempKey:void 0,__tempLocation:{...l,search:l.searchStr,state:{...l.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(l.unmaskOnReload??this.options.unmaskOnReload??!1)&&(l.state.__tempKey=this.tempLocationKey)),l.state.__hashScrollIntoViewOptions=h??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=e,this.history[a.replace?"replace":"push"](l.href,l.state,{ignoreBlocker:i})}return this.resetNextScroll=a.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:e,resetScroll:i,hashScrollIntoView:a,viewTransition:r,ignoreBlocker:s,href:o,...c}={})=>{if(o){const l=this.history.location.state.__TSR_index,u=Be(o,{__TSR_index:e?l:l+1});c.to=u.pathname,c.search=this.options.parseSearch(u.search),c.hash=u.hash.slice(1)}const h=this.buildLocation({...c,_includeValidateSearch:!0});return this.commitLocation({...h,viewTransition:r,replace:e,resetScroll:i,hashScrollIntoView:a,ignoreBlocker:s})},this.navigate=({to:e,reloadDocument:i,href:a,...r})=>{if(i){if(!a){const s=this.buildLocation({to:e,...r});a=this.history.createHref(s.href)}r.replace?window.location.replace(a):window.location.href=a;return}return this.buildAndCommitLocation({...r,href:a,to:e})},this.load=async e=>{this.latestLocation=this.parseLocation(this.latestLocation);let i,a,r;for(r=new Promise(s=>{this.startTransition(async()=>{var o;try{const c=this.latestLocation,h=this.state.resolvedLocation;this.cancelMatches();let l;Ci(()=>{l=this.matchRoutes(c),this.__store.setState(u=>({...u,status:"pending",isLoading:!0,location:c,pendingMatches:l,cachedMatches:u.cachedMatches.filter(p=>!l.find(f=>f.id===p.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",...re({resolvedLocation:h,location:c})}),this.emit({type:"onBeforeLoad",...re({resolvedLocation:h,location:c})}),await this.loadMatches({sync:e==null?void 0:e.sync,matches:l,location:c,onReady:async()=>{this.startViewTransition(async()=>{let u,p,f;Ci(()=>{this.__store.setState(g=>{const y=g.matches,S=g.pendingMatches||g.matches;return u=y.filter(P=>!S.find(m=>m.id===P.id)),p=S.filter(P=>!y.find(m=>m.id===P.id)),f=y.filter(P=>S.find(m=>m.id===P.id)),{...g,isLoading:!1,loadedAt:Date.now(),matches:S,pendingMatches:void 0,cachedMatches:[...g.cachedMatches,...u.filter(P=>P.status!=="error")]}}),this.clearExpiredCache()}),[[u,"onLeave"],[p,"onEnter"],[f,"onStay"]].forEach(([g,y])=>{g.forEach(S=>{var P,m;(m=(P=this.looseRoutesById[S.routeId].options)[y])==null||m.call(P,S)})})})}})}catch(c){Mi(c)?(i=c,this.isServer||this.navigate({...i,replace:!0,ignoreBlocker:!0})):At(c)&&(a=c),this.__store.setState(h=>({...h,statusCode:i?i.statusCode:a?404:h.matches.some(l=>l.status==="error")?500:200,redirect:i}))}this.latestLoadPromise===r&&((o=this.commitLocationPromise)==null||o.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),s()})}),this.latestLoadPromise=r,await r;this.latestLoadPromise&&r!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(s=>({...s,statusCode:404}))},this.startViewTransition=e=>{const i=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,i&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let a;if(typeof i=="object"&&this.isViewTransitionTypesSupported){const r=this.latestLocation,s=this.state.resolvedLocation,o=typeof i.types=="function"?i.types(re({resolvedLocation:s,location:r})):i.types;a={update:e,types:o}}else a=e;document.startViewTransition(a)}else e()},this.updateMatch=(e,i)=>{var a;let r;const s=(a=this.state.pendingMatches)==null?void 0:a.find(l=>l.id===e),o=this.state.matches.find(l=>l.id===e),c=this.state.cachedMatches.find(l=>l.id===e),h=s?"pendingMatches":o?"matches":c?"cachedMatches":"";return h&&this.__store.setState(l=>{var u;return{...l,[h]:(u=l[h])==null?void 0:u.map(p=>p.id===e?r=i(p):p)}}),r},this.getMatch=e=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(i=>i.id===e),this.loadMatches=async({location:e,matches:i,preload:a,onReady:r,updateMatch:s=this.updateMatch,sync:o})=>{let c,h=!1;const l=async()=>{h||(h=!0,await(r==null?void 0:r()))},u=f=>!!(a&&!this.state.matches.find(g=>g.id===f)),p=(f,g)=>{var y,S,P,m;if(Mi(g)&&!g.reloadDocument)throw g;if(ie(g)||At(g)){if(s(f.id,d=>({...d,status:ie(g)?"redirected":At(g)?"notFound":"error",isFetching:!1,error:g,beforeLoadPromise:void 0,loaderPromise:void 0})),g.routeId||(g.routeId=f.routeId),(y=f.beforeLoadPromise)==null||y.resolve(),(S=f.loaderPromise)==null||S.resolve(),(P=f.loadPromise)==null||P.resolve(),ie(g))throw h=!0,g=this.resolveRedirect({...g,_fromLocation:e}),g;if(At(g))throw this._handleNotFound(i,g,{updateMatch:s}),(m=this.serverSsr)==null||m.onMatchSettled({router:this,match:this.getMatch(f.id)}),g}};try{await new Promise((f,g)=>{(async()=>{var y,S,P,m;try{const d=(k,L,b)=>{var _,x;const{id:A,routeId:T}=i[k],N=this.looseRoutesById[T];if(L instanceof Promise)throw L;L.routerCode=b,c=c??k,p(this.getMatch(A),L);try{(x=(_=N.options).onError)==null||x.call(_,L)}catch(I){L=I,p(this.getMatch(A),L)}s(A,I=>{var D,H;return(D=I.beforeLoadPromise)==null||D.resolve(),(H=I.loadPromise)==null||H.resolve(),{...I,error:L,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[k,{id:L,routeId:b}]of i.entries()){const _=this.getMatch(L),x=(y=i[k-1])==null?void 0:y.id,A=this.looseRoutesById[b],T=A.options.pendingMs??this.options.defaultPendingMs,N=!!(r&&!this.isServer&&!u(L)&&(A.options.loader||A.options.beforeLoad||Lr(A))&&typeof T=="number"&&T!==1/0&&(A.options.pendingComponent??((S=this.options)==null?void 0:S.defaultPendingComponent)));let I=!0;if((_.beforeLoadPromise||_.loaderPromise)&&(N&&setTimeout(()=>{try{l()}catch{}},T),await _.beforeLoadPromise,I=this.getMatch(L).status!=="success"),I){try{s(L,M=>{const B=M.loadPromise;return{...M,loadPromise:ve(()=>{B==null||B.resolve()}),beforeLoadPromise:ve()}});const D=new AbortController;let H;N&&(H=setTimeout(()=>{try{l()}catch{}},T));const{paramsError:w,searchError:R}=this.getMatch(L);w&&d(k,w,"PARSE_PARAMS"),R&&d(k,R,"VALIDATE_SEARCH");const F=()=>x?this.getMatch(x).context:this.options.context??{};s(L,M=>({...M,isFetching:"beforeLoad",fetchCount:M.fetchCount+1,abortController:D,pendingTimeout:H,context:{...F(),...M.__routeContext}}));const{search:E,params:O,context:V,cause:G}=this.getMatch(L),z=u(L),$={search:E,abortController:D,params:O,preload:z,context:V,location:e,navigate:M=>this.navigate({...M,_fromLocation:e}),buildLocation:this.buildLocation,cause:z?"preload":G,matches:i},U=await((m=(P=A.options).beforeLoad)==null?void 0:m.call(P,$))??{};(ie(U)||At(U))&&d(k,U,"BEFORE_LOAD"),s(L,M=>({...M,__beforeLoadContext:U,context:{...F(),...M.__routeContext,...U},abortController:D}))}catch(D){d(k,D,"BEFORE_LOAD")}s(L,D=>{var H;return(H=D.beforeLoadPromise)==null||H.resolve(),{...D,beforeLoadPromise:void 0,isFetching:!1}})}}const v=i.slice(0,c),C=[];v.forEach(({id:k,routeId:L},b)=>{C.push((async()=>{const{loaderPromise:_}=this.getMatch(k);let x=!1,A=!1;if(_){await _;const T=this.getMatch(k);T.error&&p(T,T.error)}else{const T=C[b-1],N=this.looseRoutesById[L],I=()=>{const{params:G,loaderDeps:z,abortController:$,context:U,cause:M}=this.getMatch(k),B=u(k);return{params:G,deps:z,preload:!!B,parentMatchPromise:T,abortController:$,context:U,location:e,navigate:j=>this.navigate({...j,_fromLocation:e}),cause:B?"preload":M,route:N}},D=Date.now()-this.getMatch(k).updatedAt,H=u(k),w=H?N.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:N.options.staleTime??this.options.defaultStaleTime??0,R=N.options.shouldReload,F=typeof R=="function"?R(I()):R;s(k,G=>({...G,loaderPromise:ve(),preload:!!H&&!this.state.matches.find(z=>z.id===k)}));const E=async()=>{var G,z,$,U,M,B,j,q,W,X,Q;try{const et=async()=>{const Y=this.getMatch(k);Y.minPendingPromise&&await Y.minPendingPromise};try{this.loadRouteChunk(N),s(k,pt=>({...pt,isFetching:"loader"}));const Y=await((z=(G=N.options).loader)==null?void 0:z.call(G,I()));p(this.getMatch(k),Y),await N._lazyPromise,await et();const ot={matches:i,match:this.getMatch(k),params:this.getMatch(k).params,loaderData:Y},Z=(U=($=N.options).head)==null?void 0:U.call($,ot),lt=Z==null?void 0:Z.meta,Jt=Z==null?void 0:Z.links,vt=Z==null?void 0:Z.scripts,ce=(B=(M=N.options).scripts)==null?void 0:B.call(M,ot),at=(q=(j=N.options).headers)==null?void 0:q.call(j,{loaderData:Y});await N._componentsPromise,s(k,pt=>({...pt,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Y,meta:lt,links:Jt,headScripts:vt,headers:at,scripts:ce}))}catch(Y){let ot=Y;await et(),p(this.getMatch(k),Y);try{(X=(W=N.options).onError)==null||X.call(W,Y)}catch(Z){ot=Z,p(this.getMatch(k),Z)}s(k,Z=>({...Z,error:ot,status:"error",isFetching:!1}))}(Q=this.serverSsr)==null||Q.onMatchSettled({router:this,match:this.getMatch(k)})}catch(et){s(k,Y=>({...Y,loaderPromise:void 0})),p(this.getMatch(k),et)}},{status:O,invalid:V}=this.getMatch(k);x=O==="success"&&(V||(F??D>w)),H&&N.options.preload===!1||(x&&!o?(A=!0,(async()=>{try{await E();const{loaderPromise:G,loadPromise:z}=this.getMatch(k);G==null||G.resolve(),z==null||z.resolve(),s(k,$=>({...$,loaderPromise:void 0}))}catch(G){Mi(G)&&await this.navigate(G)}})()):(O!=="success"||x&&o)&&await E())}if(!A){const{loaderPromise:T,loadPromise:N}=this.getMatch(k);T==null||T.resolve(),N==null||N.resolve()}return s(k,T=>({...T,isFetching:A?T.isFetching:!1,loaderPromise:A?T.loaderPromise:void 0,invalid:!1})),this.getMatch(k)})())}),await Promise.all(C),f()}catch(d){g(d)}})()}),await l()}catch(f){if(ie(f)||At(f))throw At(f)&&!a&&await l(),f}return i},this.invalidate=e=>{const i=a=>{var r;return((r=e==null?void 0:e.filter)==null?void 0:r.call(e,a))??!0?{...a,invalid:!0,...a.status==="error"?{status:"pending",error:void 0}:{}}:a};return this.__store.setState(a=>{var r;return{...a,matches:a.matches.map(i),cachedMatches:a.cachedMatches.map(i),pendingMatches:(r=a.pendingMatches)==null?void 0:r.map(i)}}),this.load({sync:e==null?void 0:e.sync})},this.resolveRedirect=e=>{const i=e;return i.href||(i.href=this.buildLocation(i).href),i},this.clearCache=e=>{const i=e==null?void 0:e.filter;i!==void 0?this.__store.setState(a=>({...a,cachedMatches:a.cachedMatches.filter(r=>!i(r))})):this.__store.setState(a=>({...a,cachedMatches:[]}))},this.clearExpiredCache=()=>{const e=i=>{const a=this.looseRoutesById[i.routeId];if(!a.options.loader)return!0;const r=(i.preload?a.options.preloadGcTime??this.options.defaultPreloadGcTime:a.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(i.status!=="error"&&Date.now()-i.updatedAt<r)};this.clearCache({filter:e})},this.loadRouteChunk=e=>(e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(i=>{const{id:a,...r}=i.options;Object.assign(e.options,r)}):e._lazyPromise=Promise.resolve()),e._componentsPromise===void 0&&(e._componentsPromise=e._lazyPromise.then(()=>Promise.all(Fr.map(async i=>{const a=e.options[i];a!=null&&a.preload&&await a.preload()})))),e._componentsPromise),this.preloadRoute=async e=>{const i=this.buildLocation(e);let a=this.matchRoutes(i,{throwOnError:!0,preload:!0,dest:e});const r=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(o=>o.id)),s=new Set([...r,...this.state.cachedMatches.map(o=>o.id)]);Ci(()=>{a.forEach(o=>{s.has(o.id)||this.__store.setState(c=>({...c,cachedMatches:[...c.cachedMatches,o]}))})});try{return a=await this.loadMatches({matches:a,location:i,preload:!0,updateMatch:(o,c)=>{r.has(o)?a=a.map(h=>h.id===o?c(h):h):this.updateMatch(o,c)}}),a}catch(o){if(ie(o))return o.reloadDocument?void 0:await this.preloadRoute({...o,_fromLocation:i});At(o)||console.error(o);return}},this.matchRoute=(e,i)=>{const a={...e,to:e.to?this.resolvePathWithBase(e.from||"",e.to):void 0,params:e.params||{},leaveParams:!0},r=this.buildLocation(a);if(i!=null&&i.pending&&this.state.status!=="pending")return!1;const o=((i==null?void 0:i.pending)===void 0?!this.state.isLoading:i.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,c=Wn(this.basepath,o.pathname,{...i,to:r.pathname});return!c||e.params&&!Ve(c,e.params,{partial:!0})?!1:c&&((i==null?void 0:i.includeSearch)??!0)?Ve(o.search,r.search,{partial:!0})?c:!1:c},this._handleNotFound=(e,i,{updateMatch:a=this.updateMatch}={})=>{var r;const s=this.routesById[i.routeId??""]??this.routeTree,o={};for(const h of e)o[h.routeId]=h;!s.options.notFoundComponent&&((r=this.options)!=null&&r.defaultNotFoundComponent)&&(s.options.notFoundComponent=this.options.defaultNotFoundComponent),Ht(s.options.notFoundComponent);const c=o[s.id];Ht(c,"Could not find match for route: "+s.id),a(c.id,h=>({...h,status:"notFound",error:i,isFetching:!1})),i.routerCode==="BEFORE_LOAD"&&s.parentRoute&&(i.routeId=s.parentRoute.id,this._handleNotFound(e,i,{updateMatch:a}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(e=>e.status==="notFound"||e.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...n,caseSensitive:n.caseSensitive??!1,notFoundMode:n.notFoundMode??"fuzzy",stringifySearch:n.stringifySearch??_a,parseSearch:n.parseSearch??ba}),typeof document<"u"&&(window.__TSR_ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(n,e){const{foundRoute:i,matchedRoutes:a,routeParams:r}=this.getMatchedRoutes(n,e==null?void 0:e.dest);let s=!1;(i?i.path!=="/"&&r["**"]:ne(n.pathname))&&(this.options.notFoundRoute?a.push(this.options.notFoundRoute):s=!0);const o=(()=>{if(s){if(this.options.notFoundMode!=="root")for(let u=a.length-1;u>=0;u--){const p=a[u];if(p.children)return p.id}return Ft}})(),c=a.map(u=>{var p;let f;const g=((p=u.options.params)==null?void 0:p.parse)??u.options.parseParams;if(g)try{const y=g(r);Object.assign(r,y)}catch(y){if(f=new Ca(y.message,{cause:y}),e!=null&&e.throwOnError)throw f;return f}}),h=[],l=u=>(u==null?void 0:u.id)?u.context??this.options.context??{}:this.options.context??{};return a.forEach((u,p)=>{var f,g;const y=h[p-1],[S,P,m]=(()=>{const N=(y==null?void 0:y.search)??n.search,I=(y==null?void 0:y._strictSearch)??{};try{const D=Fi(u.options.validateSearch,{...N})??{};return[{...N,...D},{...I,...D},void 0]}catch(D){let H=D;if(D instanceof Jn||(H=new Jn(D.message,{cause:D})),e!=null&&e.throwOnError)throw H;return[N,{},H]}})(),d=((g=(f=u.options).loaderDeps)==null?void 0:g.call(f,{search:S}))??"",v=d?JSON.stringify(d):"",{usedParams:C,interpolatedPath:k}=qn({path:u.fullPath,params:r,decodeCharMap:this.pathParamsDecodeCharMap}),L=qn({path:u.id,params:r,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath+v,b=this.getMatch(L),_=this.state.matches.find(N=>N.routeId===u.id),x=_?"stay":"enter";let A;if(b)A={...b,cause:x,params:_?Mt(_.params,r):r,_strictParams:C,search:Mt(_?_.search:b.search,S),_strictSearch:P};else{const N=u.options.loader||u.options.beforeLoad||u.lazyFn||Lr(u)?"pending":"success";A={id:L,index:p,routeId:u.id,params:_?Mt(_.params,r):r,_strictParams:C,pathname:zt([this.basepath,k]),updatedAt:Date.now(),search:_?Mt(_.search,S):S,_strictSearch:P,searchError:void 0,status:N,isFetching:!1,error:void 0,paramsError:c[p],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:x,loaderDeps:_?Mt(_.loaderDeps,d):d,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:u.options.staticData||{},loadPromise:ve(),fullPath:u.fullPath}}e!=null&&e.preload||(A.globalNotFound=o===u.id),A.searchError=m;const T=l(y);A.context={...T,...A.__routeContext,...A.__beforeLoadContext},h.push(A)}),h.forEach((u,p)=>{var f,g,y,S,P,m,d,v;const C=this.looseRoutesById[u.routeId];if(!this.getMatch(u.id)&&(e==null?void 0:e._buildLocation)!==!0){const L=h[p-1],b=l(L),_={deps:u.loaderDeps,params:u.params,context:b,location:n,navigate:x=>this.navigate({...x,_fromLocation:n}),buildLocation:this.buildLocation,cause:u.cause,abortController:u.abortController,preload:!!u.preload,matches:h};u.__routeContext=((g=(f=C.options).context)==null?void 0:g.call(f,_))??{},u.context={...b,...u.__routeContext,...u.__beforeLoadContext}}if(u.status==="success"){u.headers=(S=(y=C.options).headers)==null?void 0:S.call(y,{loaderData:u.loaderData});const L={matches:h,match:u,params:u.params,loaderData:u.loaderData},b=(m=(P=C.options).head)==null?void 0:m.call(P,L);u.links=b==null?void 0:b.links,u.headScripts=b==null?void 0:b.scripts,u.meta=b==null?void 0:b.meta,u.scripts=(v=(d=C.options).scripts)==null?void 0:v.call(d,L)}}),h}}class Jn extends Error{}class Ca extends Error{}function xa(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Fi(t,n){if(t==null)return{};if("~standard"in t){const e=t["~standard"].validate(n);if(e instanceof Promise)throw new Jn("Async validation not supported");if(e.issues)throw new Jn(JSON.stringify(e.issues,void 0,2),{cause:e});return e.value}return"parse"in t?t.parse(n):typeof t=="function"?t(n):{}}const Fr=["component","errorComponent","pendingComponent","notFoundComponent"];function Lr(t){var n;for(const e of Fr)if((n=t.options[e])!=null&&n.preload)return!0;return!1}class Or{constructor(n){if(this.init=e=>{var i,a;this.originalIndex=e.originalIndex;const r=this.options,s=!(r!=null&&r.path)&&!(r!=null&&r.id);if(this.parentRoute=(a=(i=this.options).getParentRoute)==null?void 0:a.call(i),s)this._path=Ft;else if(!this.parentRoute)throw new Error("Child Route instances must pass a 'getParentRoute: () => ParentRoute' option that returns a Route instance.");let o=s?Ft:r==null?void 0:r.path;o&&o!=="/"&&(o=Ai(o));const c=(r==null?void 0:r.id)||o;let h=s?Ft:zt([this.parentRoute.id===Ft?"":this.parentRoute.id,c]);o===Ft&&(o="/"),h!==Ft&&(h=zt(["/",h]));const l=h===Ft?"/":zt([this.parentRoute.fullPath,o]);this._path=o,this._id=h,this._fullPath=l,this._to=l,this._ssr=(r==null?void 0:r.ssr)??e.defaultSsr??!0},this.addChildren=e=>this._addFileChildren(e),this._addFileChildren=e=>(Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this),this._addFileTypes=()=>this,this.updateLoader=e=>(Object.assign(this.options,e),this),this.update=e=>(Object.assign(this.options,e),this),this.lazy=e=>(this.lazyFn=e,this),this.options=n||{},this.isRoot=!(n!=null&&n.getParentRoute),n!=null&&n.id&&(n!=null&&n.path))throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}}class Pa extends Or{constructor(n){super(n)}}var ka=Nt("<div><div><strong>Something went wrong!</strong><button></button></div><div>"),Ra=Nt("<div><pre>"),Aa=Nt("<code>");function Li(t){return K(Ao,{fallback:(n,e)=>{var i;return(i=t.onCatch)==null||i.call(t,n),Zt(Me([t.getResetKey],()=>e(),{defer:!0})),K(Vt,{get component(){return t.errorComponent??Qn},error:n,reset:e})},get children(){return t.children}})}function Qn({error:t}){const[n,e]=kt(!1);return(()=>{var i=ka(),a=i.firstChild,r=a.firstChild,s=r.nextSibling,o=a.nextSibling;return i.style.setProperty("padding",".5rem"),i.style.setProperty("max-width","100%"),a.style.setProperty("display","flex"),a.style.setProperty("align-items","center"),a.style.setProperty("gap",".5rem"),r.style.setProperty("font-size","1rem"),s.$$click=()=>e(c=>!c),s.style.setProperty("appearance","none"),s.style.setProperty("font-size",".6em"),s.style.setProperty("border","1px solid currentColor"),s.style.setProperty("padding",".1rem .2rem"),s.style.setProperty("font-weight","bold"),s.style.setProperty("border-radius",".25rem"),Rt(s,()=>n()?"Hide Error":"Show Error"),o.style.setProperty("height",".25rem"),Rt(i,(()=>{var c=Et(()=>!!n());return()=>c()?(()=>{var h=Ra(),l=h.firstChild;return l.style.setProperty("font-size",".7em"),l.style.setProperty("border","1px solid red"),l.style.setProperty("border-radius",".25rem"),l.style.setProperty("padding",".3rem"),l.style.setProperty("color","red"),l.style.setProperty("overflow","auto"),Rt(l,(()=>{var u=Et(()=>!!t.message);return()=>u()?(()=>{var p=Aa();return Rt(p,()=>t.message),p})():null})()),h})():null})(),null),i})()}yi(["click"]);function Ta(t){return Ea()?Et(()=>t.children):Et(()=>t.fallback)}function Ea(){const[t,n]=kt(!0);return Zt(()=>{n(!0)}),t}const Zn=Symbol("store-raw"),Ce=Symbol("store-node"),jt=Symbol("store-has"),Nr=Symbol("store-self");function Dr(t){let n=t[Tt];if(!n&&(Object.defineProperty(t,Tt,{value:n=new Proxy(t,La)}),!Array.isArray(t))){const e=Object.keys(t),i=Object.getOwnPropertyDescriptors(t);for(let a=0,r=e.length;a<r;a++){const s=e[a];i[s].get&&Object.defineProperty(t,s,{enumerable:i[s].enumerable,get:i[s].get.bind(n)})}}return n}function Dt(t){let n;return t!=null&&typeof t=="object"&&(t[Tt]||!(n=Object.getPrototypeOf(t))||n===Object.prototype||Array.isArray(t))}function se(t,n=new Set){let e,i,a,r;if(e=t!=null&&t[Zn])return e;if(!Dt(t)||n.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):n.add(t);for(let s=0,o=t.length;s<o;s++)a=t[s],(i=se(a,n))!==a&&(t[s]=i)}else{Object.isFrozen(t)?t=Object.assign({},t):n.add(t);const s=Object.keys(t),o=Object.getOwnPropertyDescriptors(t);for(let c=0,h=s.length;c<h;c++)r=s[c],!o[r].get&&(a=t[r],(i=se(a,n))!==a&&(t[r]=i))}return t}function ti(t,n){let e=t[n];return e||Object.defineProperty(t,n,{value:e=Object.create(null)}),e}function He(t,n,e){if(t[n])return t[n];const[i,a]=kt(e,{equals:!1,internal:!0});return i.$=a,t[n]=i}function Ma(t,n){const e=Reflect.getOwnPropertyDescriptor(t,n);return!e||e.get||!e.configurable||n===Tt||n===Ce||(delete e.value,delete e.writable,e.get=()=>t[Tt][n]),e}function Gr(t){di()&&He(ti(t,Ce),Nr)()}function Fa(t){return Gr(t),Reflect.ownKeys(t)}const La={get(t,n,e){if(n===Zn)return t;if(n===Tt)return e;if(n===nr)return Gr(t),e;const i=ti(t,Ce),a=i[n];let r=a?a():t[n];if(n===Ce||n===jt||n==="__proto__")return r;if(!a){const s=Object.getOwnPropertyDescriptor(t,n);di()&&(typeof r!="function"||t.hasOwnProperty(n))&&!(s&&s.get)&&(r=He(i,n,r)())}return Dt(r)?Dr(r):r},has(t,n){return n===Zn||n===Tt||n===nr||n===Ce||n===jt||n==="__proto__"?!0:(di()&&He(ti(t,jt),n)(),n in t)},set(){return!0},deleteProperty(){return!0},ownKeys:Fa,getOwnPropertyDescriptor:Ma};function yt(t,n,e,i=!1){if(!i&&t[n]===e)return;const a=t[n],r=t.length;e===void 0?(delete t[n],t[jt]&&t[jt][n]&&a!==void 0&&t[jt][n].$()):(t[n]=e,t[jt]&&t[jt][n]&&a===void 0&&t[jt][n].$());let s=ti(t,Ce),o;if((o=He(s,n,a))&&o.$(()=>e),Array.isArray(t)&&t.length!==r){for(let c=t.length;c<r;c++)(o=s[c])&&o.$();(o=He(s,"length",r))&&o.$(t.length)}(o=s[Nr])&&o.$()}function Ir(t,n){const e=Object.keys(n);for(let i=0;i<e.length;i+=1){const a=e[i];yt(t,a,n[a])}}function Oa(t,n){if(typeof n=="function"&&(n=n(t)),n=se(n),Array.isArray(n)){if(t===n)return;let e=0,i=n.length;for(;e<i;e++){const a=n[e];t[e]!==a&&yt(t,e,a)}yt(t,"length",i)}else Ir(t,n)}function ze(t,n,e=[]){let i,a=t;if(n.length>1){i=n.shift();const s=typeof i,o=Array.isArray(t);if(Array.isArray(i)){for(let c=0;c<i.length;c++)ze(t,[i[c]].concat(n),e);return}else if(o&&s==="function"){for(let c=0;c<t.length;c++)i(t[c],c)&&ze(t,[c].concat(n),e);return}else if(o&&s==="object"){const{from:c=0,to:h=t.length-1,by:l=1}=i;for(let u=c;u<=h;u+=l)ze(t,[u].concat(n),e);return}else if(n.length>1){ze(t[i],n,[i].concat(e));return}a=t[i],e=[i].concat(e)}let r=n[0];typeof r=="function"&&(r=r(a,e),r===a)||i===void 0&&r==null||(r=se(r),i===void 0||Dt(a)&&Dt(r)&&!Array.isArray(r)?Ir(a,r):yt(t,i,r))}function Br(...[t,n]){const e=se(t||{}),i=Array.isArray(e),a=Dr(e);function r(...s){mo(()=>{i&&s.length===1?Oa(e,s[0]):ze(e,s)})}return[a,r]}const Oi=Symbol("store-root");function xe(t,n,e,i,a){const r=n[e];if(t===r)return;const s=Array.isArray(t);if(e!==Oi&&(!Dt(t)||!Dt(r)||s!==Array.isArray(r)||a&&t[a]!==r[a])){yt(n,e,t);return}if(s){if(t.length&&r.length&&(!i||a&&t[0]&&t[0][a]!=null)){let h,l,u,p,f,g,y,S;for(u=0,p=Math.min(r.length,t.length);u<p&&(r[u]===t[u]||a&&r[u]&&t[u]&&r[u][a]===t[u][a]);u++)xe(t[u],r,u,i,a);const P=new Array(t.length),m=new Map;for(p=r.length-1,f=t.length-1;p>=u&&f>=u&&(r[p]===t[f]||a&&r[p]&&t[f]&&r[p][a]===t[f][a]);p--,f--)P[f]=r[p];if(u>f||u>p){for(l=u;l<=f;l++)yt(r,l,t[l]);for(;l<t.length;l++)yt(r,l,P[l]),xe(t[l],r,l,i,a);r.length>t.length&&yt(r,"length",t.length);return}for(y=new Array(f+1),l=f;l>=u;l--)g=t[l],S=a&&g?g[a]:g,h=m.get(S),y[l]=h===void 0?-1:h,m.set(S,l);for(h=u;h<=p;h++)g=r[h],S=a&&g?g[a]:g,l=m.get(S),l!==void 0&&l!==-1&&(P[l]=r[h],l=y[l],m.set(S,l));for(l=u;l<t.length;l++)l in P?(yt(r,l,P[l]),xe(t[l],r,l,i,a)):yt(r,l,t[l])}else for(let h=0,l=t.length;h<l;h++)xe(t[h],r,h,i,a);r.length>t.length&&yt(r,"length",t.length);return}const o=Object.keys(t);for(let h=0,l=o.length;h<l;h++)xe(t[o[h]],r,o[h],i,a);const c=Object.keys(r);for(let h=0,l=c.length;h<l;h++)t[c[h]]===void 0&&yt(r,c[h],void 0)}function Na(t,n={}){const{merge:e,key:i="id"}=n,a=se(t);return r=>{if(!Dt(r)||!Dt(a))return a;const s=xe(a,{[Oi]:r},Oi,e,i);return s===void 0?r:s}}const ei=new WeakMap,Ur={get(t,n){if(n===Zn)return t;const e=t[n];let i;return Dt(e)?ei.get(e)||(ei.set(e,i=new Proxy(e,Ur)),i):e},set(t,n,e){return yt(t,n,se(e)),!0},deleteProperty(t,n){return yt(t,n,void 0,!0),!0}};function oe(t){return n=>{if(Dt(n)){let e;(e=ei.get(n))||ei.set(n,e=new Proxy(n,Ur)),t(e)}return n}}function Da(t,n=e=>e){const[e,i]=Br({value:n(t.state)}),a=t.subscribe(()=>{const r=n(t.state);i("value",Na(r))});return de(()=>{a()}),()=>e.value}const Ni=Fe(null);function Vr(){return typeof document>"u"?Ni:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Ni,Ni)}function $t(t){const n=ue(Vr());return t==null||t.warn,n}function bt(t){const n=$t({warn:(t==null?void 0:t.router)===void 0}),e=(t==null?void 0:t.router)||n;return Da(e.__store,i=>t!=null&&t.select?t.select(i):i)}const ni=Fe(()=>{}),Ga=Fe(()=>{});function Yt(t){const n=ue(t.from?Ga:ni);return bt({select:i=>{const a=i.matches.find(r=>t.from?t.from===r.routeId:r.id===n());if(Ht(!((t.shouldThrow??!0)&&!a),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),a!==void 0)return t.select?t.select(a):a}})}function Hr(t){return Yt({from:t.from,strict:t.strict,select:n=>t.select?t.select(n.loaderData):n.loaderData})}function zr(t){const{select:n,...e}=t;return Yt({...e,select:i=>n?n(i.loaderDeps):i.loaderDeps})}function jr(t){return Yt({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,select:n=>t.select?t.select(n.params):n.params})}function $r(t){return Yt({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,select:n=>t.select?t.select(n.search):n.search})}function qr(t){const{navigate:n}=$t();return e=>n({from:t==null?void 0:t.from,...e})}let Ia=class extends Or{constructor(n){super(n),this.useMatch=e=>Yt({select:e==null?void 0:e.select,from:this.id}),this.useRouteContext=e=>Yt({...e,from:this.id,select:i=>e!=null&&e.select?e.select(i.context):i.context}),this.useSearch=e=>$r({select:e==null?void 0:e.select,from:this.id}),this.useParams=e=>jr({select:e==null?void 0:e.select,from:this.id}),this.useLoaderDeps=e=>zr({...e,from:this.id}),this.useLoaderData=e=>Hr({...e,from:this.id}),this.useNavigate=()=>qr({from:this.fullPath})}};function Ba(t){return new Ia(t)}function Ua(){return t=>Ha(t)}class Va extends Pa{constructor(n){super(n),this.useMatch=e=>Yt({select:e==null?void 0:e.select,from:this.id}),this.useRouteContext=e=>Yt({...e,from:this.id,select:i=>e!=null&&e.select?e.select(i.context):i.context}),this.useSearch=e=>$r({select:e==null?void 0:e.select,from:this.id}),this.useParams=e=>jr({select:e==null?void 0:e.select,from:this.id}),this.useLoaderDeps=e=>zr({...e,from:this.id}),this.useLoaderData=e=>Hr({...e,from:this.id}),this.useNavigate=()=>qr({from:this.fullPath})}}function Ha(t){return new Va(t)}function za(t){return new ja(t,{silent:!0}).createRoute}class ja{constructor(n,e){this.path=n,this.createRoute=i=>{this.silent;const a=Ba(i);return a.isRoot=!1,a},this.silent=e==null?void 0:e.silent}}var $a=Nt("<p>Not Found");function qa(t){const n=bt({select:e=>`not-found-${e.location.pathname}-${e.status}`});return K(Li,{getResetKey:()=>n(),onCatch:e=>{var i;if(At(e))(i=t.onCatch)==null||i.call(t,e);else throw e},errorComponent:({error:e})=>{var i;if(At(e))return(i=t.fallback)==null?void 0:i.call(t,e);throw e},get children(){return t.children}})}function Wa(){return $a()}function ii(t){return Et(()=>t.children)}function Wr(t,n,e){return n.options.notFoundComponent?K(n.options.notFoundComponent,{data:e}):t.options.defaultNotFoundComponent?K(t.options.defaultNotFoundComponent,{data:e}):K(Wa,{})}var Kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ka(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Di,Yr;function Ya(){if(Yr)return Di;Yr=1;const t={},n=t.hasOwnProperty,e=(b,_)=>{for(const x in b)n.call(b,x)&&_(x,b[x])},i=(b,_)=>(_&&e(_,(x,A)=>{b[x]=A}),b),a=(b,_)=>{const x=b.length;let A=-1;for(;++A<x;)_(b[A])},r=b=>"\\u"+("0000"+b).slice(-4),s=(b,_)=>{let x=b.toString(16);return _?x:x.toUpperCase()},o=t.toString,c=Array.isArray,h=b=>typeof Buffer=="function"&&Buffer.isBuffer(b),l=b=>o.call(b)=="[object Object]",u=b=>typeof b=="string"||o.call(b)=="[object String]",p=b=>typeof b=="number"||o.call(b)=="[object Number]",f=b=>typeof b=="bigint",g=b=>typeof b=="function",y=b=>o.call(b)=="[object Map]",S=b=>o.call(b)=="[object Set]",P={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},m=/[\\\b\f\n\r\t]/,d=/[0-9]/,v=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,C=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,k=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,L=(b,_)=>{const x=()=>{w=H,++_.indentLevel,H=_.indent.repeat(_.indentLevel)},A={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},T=_&&_.json;T&&(A.quotes="double",A.wrap=!0),_=i(A,_),_.quotes!="single"&&_.quotes!="double"&&_.quotes!="backtick"&&(_.quotes="single");const N=_.quotes=="double"?'"':_.quotes=="backtick"?"`":"'",I=_.compact,D=_.lowercaseHex;let H=_.indent.repeat(_.indentLevel),w="";const R=_.__inline1__,F=_.__inline2__,E=I?"":`
`;let O,V=!0;const G=_.numbers=="binary",z=_.numbers=="octal",$=_.numbers=="decimal",U=_.numbers=="hexadecimal";if(T&&b&&g(b.toJSON)&&(b=b.toJSON()),!u(b)){if(y(b))return b.size==0?"new Map()":(I||(_.__inline1__=!0,_.__inline2__=!1),"new Map("+L(Array.from(b),_)+")");if(S(b))return b.size==0?"new Set()":"new Set("+L(Array.from(b),_)+")";if(h(b))return b.length==0?"Buffer.from([])":"Buffer.from("+L(Array.from(b),_)+")";if(c(b))return O=[],_.wrap=!0,R&&(_.__inline1__=!1,_.__inline2__=!0),F||x(),a(b,B=>{V=!1,F&&(_.__inline2__=!1),O.push((I||F?"":H)+L(B,_))}),V?"[]":F?"["+O.join(", ")+"]":"["+E+O.join(","+E)+E+(I?"":w)+"]";if(p(b)||f(b)){if(T)return JSON.stringify(Number(b));let B;if($)B=String(b);else if(U){let j=b.toString(16);D||(j=j.toUpperCase()),B="0x"+j}else G?B="0b"+b.toString(2):z&&(B="0o"+b.toString(8));return f(b)?B+"n":B}else return f(b)?T?JSON.stringify(Number(b)):b+"n":l(b)?(O=[],_.wrap=!0,x(),e(b,(B,j)=>{V=!1,O.push((I?"":H)+L(B,_)+":"+(I?"":" ")+L(j,_))}),V?"{}":"{"+E+O.join(","+E)+E+(I?"":w)+"}"):T?JSON.stringify(b)||"null":String(b)}const M=_.escapeEverything?C:k;return O=b.replace(M,(B,j,q,W,X,Q)=>{if(j){if(_.minimal)return j;const Y=j.charCodeAt(0),ot=j.charCodeAt(1);if(_.es6){const Z=(Y-55296)*1024+ot-56320+65536;return"\\u{"+s(Z,D)+"}"}return r(s(Y,D))+r(s(ot,D))}if(q)return r(s(q.charCodeAt(0),D));if(B=="\0"&&!T&&!d.test(Q.charAt(X+1)))return"\\0";if(W)return W==N||_.escapeEverything?"\\"+W:W;if(m.test(B))return P[B];if(_.minimal&&!v.test(B))return B;const et=s(B.charCodeAt(0),D);return T||et.length>2?r(et):"\\x"+("00"+et).slice(-2)}),N=="`"&&(O=O.replace(/\$\{/g,"\\${")),_.isScriptContext&&(O=O.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,T?"\\u003C!--":"\\x3C!--")),_.wrap&&(O=N+O+N),O};return L.version="3.0.2",Di=L,Di}Ya();var Xa=Nt("<script class=tsr-once>");function Ja({children:t,log:n}){return typeof document<"u"?null:(()=>{var e=Xa();return mt(()=>e.innerHTML=[t,"",'if (typeof __TSR_SSR__ !== "undefined") __TSR_SSR__.cleanScripts()'].filter(Boolean).join(`
`)),e})()}function Qa(){const t=$t(),e=(t.options.getScrollRestorationKey||Ti)(t.latestLocation),i=e!==Ti(t.latestLocation)?e:null;return!t.isScrollRestoring||!t.isServer?null:K(Ja,{get children(){return`(${Mr.toString()})(${JSON.stringify(Yn)},${JSON.stringify(i)}, undefined, true)`},log:!1})}const Gi=t=>{const n=$t(),e=bt({select:f=>{var g;return(g=f.matches.find(y=>y.id===t.matchId))==null?void 0:g.routeId}});Ht(e,`Could not find routeId for matchId "${t.matchId}". Please file an issue!`);const i=()=>n.routesById[e()],a=()=>i().options.pendingComponent??n.options.defaultPendingComponent,r=()=>i().options.errorComponent??n.options.defaultErrorComponent,s=()=>i().options.onCatch??n.options.defaultOnCatch,o=()=>{var f;return i().isRoot?i().options.notFoundComponent??((f=n.options.notFoundRoute)==null?void 0:f.options.component):i().options.notFoundComponent},c=()=>{var f;return(!i().isRoot||i().options.wrapInSuspense)&&(i().options.wrapInSuspense??a()??((f=i().options.errorComponent)==null?void 0:f.preload))?mi:ii},h=()=>r()?Li:ii,l=()=>o()?qa:ii,u=bt({select:f=>f.loadedAt}),p=bt({select:f=>{var y;const g=f.matches.findIndex(S=>S.id===t.matchId);return(y=f.matches[g-1])==null?void 0:y.routeId}});return[K(ni.Provider,{value:()=>t.matchId,get children(){return K(Vt,{get component(){return c()},get fallback(){return K(Vt,{get component(){return a()}})},get children(){return K(Vt,{get component(){return h()},getResetKey:()=>u(),get errorComponent(){return r()||Qn},onCatch:f=>{var g;if(At(f))throw f;`${t.matchId}`,(g=s())==null||g(f)},get children(){return K(Vt,{get component(){return l()},fallback:f=>{if(!o()||f.routeId&&f.routeId!==e||!f.routeId&&!i().isRoot)throw f;return K(Vt,pe({get component(){return o()}},f))},get children(){return K(tl,{get matchId(){return t.matchId}})}})}})}})}}),Et(()=>Et(()=>p()===Ft)()?[K(Za,{}),K(Qa,{})]:null)]};function Za(){const t=$t(),n=bt({select:e=>{var i;return(i=e.resolvedLocation)==null?void 0:i.state.key}});return Zt(Me([n],()=>{t.emit({type:"onRendered",...re(t.state)})})),null}const tl=t=>{const n=$t(),e=bt({select:s=>{const o=s.matches.findIndex(f=>f.id===t.matchId),c=s.matches[o],h=c.routeId,l=n.routesById[h].options.remountDeps??n.options.defaultRemountDeps,u=l==null?void 0:l({routeId:h,loaderDeps:c.loaderDeps,params:c._strictParams,search:c._strictSearch});return{key:u?JSON.stringify(u):void 0,routeId:h,match:Ri(c,["id","status","error"])}}}),i=()=>n.routesById[e().routeId],a=()=>e().match,r=()=>{const s=i().options.component??n.options.defaultComponent;return s?K(s,{}):K(Ii,{})};return K(mr,{get children(){return[K(te,{get when(){return a().status==="notFound"},children:s=>(Ht(At(a().error)),Wr(n,i(),a().error))}),K(te,{get when(){return a().status==="redirected"},children:s=>{Ht(ie(a().error));const[o]=hi(async()=>{var c;return await new Promise(h=>setTimeout(h,0)),(c=n.getMatch(a().id))==null?void 0:c.loadPromise});return Et(o)}}),K(te,{get when(){return a().status==="error"},children:s=>{if(n.isServer){const o=(i().options.errorComponent??n.options.defaultErrorComponent)||Qn;return K(o,{get error(){return a().error},info:{componentStack:""}})}throw a().error}}),K(te,{get when(){return a().status==="pending"},children:s=>{var h;const o=i().options.pendingMinMs??n.options.defaultPendingMinMs;if(o&&!((h=n.getMatch(a().id))!=null&&h.minPendingPromise)&&!n.isServer){const l=ve();Promise.resolve().then(()=>{n.updateMatch(a().id,u=>({...u,minPendingPromise:l}))}),setTimeout(()=>{l.resolve(),n.updateMatch(a().id,u=>({...u,minPendingPromise:void 0}))},o)}const[c]=hi(async()=>{var l;return await new Promise(u=>setTimeout(u,0)),(l=n.getMatch(a().id))==null?void 0:l.loadPromise});return Et(c)}}),K(te,{get when(){return a().status==="success"},get children(){return r()}})]}})},Ii=()=>{const t=$t(),n=ue(ni),e=bt({select:s=>{var o;return(o=s.matches.find(c=>c.id===n()))==null?void 0:o.routeId}}),i=()=>t.routesById[e()],a=bt({select:s=>{const c=s.matches.find(h=>h.id===n());return Ht(c,`Could not find parent match for matchId "${n()}"`),c.globalNotFound}}),r=bt({select:s=>{var l;const o=s.matches,c=o.findIndex(u=>u.id===n());return(l=o[c+1])==null?void 0:l.id}});return K(mr,{get children(){return[K(te,{get when(){return a()},get children(){return Wr(t,i(),void 0)}}),K(te,{get when(){return r()},children:s=>K(Ro,{get when(){return s()===Ft},get fallback(){return K(Gi,{get matchId(){return s()}})},get children(){return K(mi,{get fallback(){return K(Vt,{get component(){return t.options.defaultPendingComponent}})},get children(){return K(Gi,{get matchId(){return s()}})}})}})})]}})};function el(t){return typeof(t==null?void 0:t.message)=="string"&&/Failed to fetch dynamically imported module/.test(t.message)}function nl(t,n,e){let i,a,r;const s=()=>typeof document>"u"&&(e==null?void 0:e())===!1?(a=()=>null,Promise.resolve(a)):(i||(i=t().then(c=>(i=void 0,a=c[n],a)).catch(c=>{r=c})),i),o=function(h){if(r){if(el(r)&&r instanceof Error&&typeof window<"u"&&typeof sessionStorage<"u"){const l=`tanstack_router_reload:${r.message}`;if(!sessionStorage.getItem(l))return sessionStorage.setItem(l,"1"),window.location.reload(),{default:()=>null}}throw r}if(!a){const[l]=hi(s,{initialValue:a,ssrLoadFrom:"initial"});return Et(l)}return(e==null?void 0:e())===!1?K(Ta,{get fallback(){return K(Ii,{})},get children(){return K(Vt,pe({component:a},h))}}):K(Vt,pe({component:a},h))};return o.preload=s,o}const Bi=t=>dt((n={current:null,previous:null})=>{const e=t();return n.current!==e&&(n.previous=n.current,n.current=e),n});function il(){const t=$t();let n={router:t,mounted:!1};const e=bt({select:({isLoading:u})=>u}),[i,a]=kt(!1),r=bt({select:u=>u.matches.some(p=>p.status==="pending")}),s=Bi(e),o=()=>e()||i()||r(),c=Bi(o),h=()=>e()||r(),l=Bi(h);return t.isServer||(t.startTransition=async u=>{a(!0),await u(),a(!1)}),ar(()=>{const u=t.history.subscribe(t.load),p=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});ne(t.latestLocation.href)!==ne(p.href)&&t.commitLocation({...p,replace:!0}),de(()=>{u()})}),mt(()=>{ft(()=>{if(typeof window<"u"&&t.clientSsr||n.router===t&&n.mounted)return;n={router:t,mounted:!0},(async()=>{try{await t.load()}catch(p){console.error(p)}})()})}),mt(Me([s,e],([u,p])=>{u.previous&&!p&&t.emit({type:"onLoad",...re(t.state)})})),mt(Me([h,l],([u,p])=>{p.previous&&!u&&t.emit({type:"onBeforeRouteMount",...re(t.state)})})),mt(Me([o,c],([u,p])=>{p.previous&&!u&&(t.emit({type:"onResolved",...re(t.state)}),t.__store.setState(f=>({...f,status:"idle",resolvedLocation:f.location})),pa(t))})),null}function rl(){const t=$t(),n=t.options.defaultPendingComponent?K(t.options.defaultPendingComponent,{}):null,e=t.isServer||typeof document<"u"&&t.clientSsr?ii:mi,i=K(e,{fallback:n,get children(){return[K(il,{}),K(sl,{})]}});return t.options.InnerWrap?K(t.options.InnerWrap,{children:i}):i}function sl(){const t=bt({select:e=>{var i;return(i=e.matches[0])==null?void 0:i.id}}),n=bt({select:e=>e.loadedAt});return K(ni.Provider,{value:t,get children(){return K(Li,{getResetKey:()=>n(),errorComponent:Qn,onCatch:e=>{e.message||e.toString()},get children(){return Et(()=>!!t())()?K(Gi,{get matchId(){return t()}}):null}})}})}const ol=t=>new al(t);class al extends Sa{constructor(n){super(n)}}function ll({router:t,children:n,...e}){t.update({...t.options,...e,context:{...t.options.context,...e.context}});const i=Vr(),a=K(i.Provider,{value:t,get children(){return n()}});return t.options.Wrap?K(t.options.Wrap,{children:a}):a}function cl({router:t,...n}){return K(ll,pe({router:t},n,{children:()=>K(rl,{})}))}const Xr=Ua()({component:hl});function hl(){return K(Ii,{})}const Cc="modulepreload",xc=function(t){return"/points-of-intrest/"+t},Pc={},dl=function(n,e,i){let a=Promise.resolve();function r(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return a.then(s=>{for(const o of s||[])o.status==="rejected"&&r(o.reason);return n().catch(r)})},ul=()=>dl(()=>Promise.resolve().then(()=>yc),void 0),Jr=za("/points-of-intrest/")({component:nl(ul,"component",()=>Jr.ssr)}),fl={PointsOfIntrestIndexRoute:Jr.update({id:"/points-of-intrest/",path:"/points-of-intrest/",getParentRoute:()=>Xr})},gl=Xr._addFileChildren(fl)._addFileTypes(),pl=ol({routeTree:gl,defaultPreload:"intent",scrollRestoration:!0,defaultPreloadStaleTime:0});function ml(){return K(cl,{router:pl})}const Qr=document.getElementById("app");Qr&&Uo(()=>K(ml,{}),Qr);function Zr(t){var n,e,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(n=0;n<a;n++)t[n]&&(e=Zr(t[n]))&&(i&&(i+=" "),i+=e)}else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function ts(){for(var t,n,e=0,i="",a=arguments.length;e<a;e++)(t=arguments[e])&&(n=Zr(t))&&(i&&(i+=" "),i+=n);return i}var ri={exports:{}},je={},Ui={},Vi={},es;function tt(){return es||(es=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const n=Math.PI/180;function e(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof Kr<"u"?Kr:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.22",isBrowser:e(),isUnminified:/param/.test((function(a){}).toString()),dblClickWindow:400,getAngle(a){return t.Konva.angleDeg?a*n:a},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var a;return(a=t.Konva.Transformer)===null||a===void 0?void 0:a.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(a){t.glob.Konva=a}};const i=a=>{t.Konva[a.prototype.getClassName()]=a};t._registerNode=i,t.Konva._injectGlobal(t.Konva)}(Vi)),Vi}var Hi={},ns;function ct(){return ns||(ns=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const n=tt();class e{constructor(v=[1,0,0,1,0,0]){this.dirty=!1,this.m=v&&v.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new e(this.m)}copyInto(v){v.m[0]=this.m[0],v.m[1]=this.m[1],v.m[2]=this.m[2],v.m[3]=this.m[3],v.m[4]=this.m[4],v.m[5]=this.m[5]}point(v){const C=this.m;return{x:C[0]*v.x+C[2]*v.y+C[4],y:C[1]*v.x+C[3]*v.y+C[5]}}translate(v,C){return this.m[4]+=this.m[0]*v+this.m[2]*C,this.m[5]+=this.m[1]*v+this.m[3]*C,this}scale(v,C){return this.m[0]*=v,this.m[1]*=v,this.m[2]*=C,this.m[3]*=C,this}rotate(v){const C=Math.cos(v),k=Math.sin(v),L=this.m[0]*C+this.m[2]*k,b=this.m[1]*C+this.m[3]*k,_=this.m[0]*-k+this.m[2]*C,x=this.m[1]*-k+this.m[3]*C;return this.m[0]=L,this.m[1]=b,this.m[2]=_,this.m[3]=x,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(v,C){const k=this.m[0]+this.m[2]*C,L=this.m[1]+this.m[3]*C,b=this.m[2]+this.m[0]*v,_=this.m[3]+this.m[1]*v;return this.m[0]=k,this.m[1]=L,this.m[2]=b,this.m[3]=_,this}multiply(v){const C=this.m[0]*v.m[0]+this.m[2]*v.m[1],k=this.m[1]*v.m[0]+this.m[3]*v.m[1],L=this.m[0]*v.m[2]+this.m[2]*v.m[3],b=this.m[1]*v.m[2]+this.m[3]*v.m[3],_=this.m[0]*v.m[4]+this.m[2]*v.m[5]+this.m[4],x=this.m[1]*v.m[4]+this.m[3]*v.m[5]+this.m[5];return this.m[0]=C,this.m[1]=k,this.m[2]=L,this.m[3]=b,this.m[4]=_,this.m[5]=x,this}invert(){const v=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*v,k=-this.m[1]*v,L=-this.m[2]*v,b=this.m[0]*v,_=v*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),x=v*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=k,this.m[2]=L,this.m[3]=b,this.m[4]=_,this.m[5]=x,this}getMatrix(){return this.m}decompose(){const v=this.m[0],C=this.m[1],k=this.m[2],L=this.m[3],b=this.m[4],_=this.m[5],x=v*L-C*k,A={x:b,y:_,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(v!=0||C!=0){const T=Math.sqrt(v*v+C*C);A.rotation=C>0?Math.acos(v/T):-Math.acos(v/T),A.scaleX=T,A.scaleY=x/T,A.skewX=(v*k+C*L)/x,A.skewY=0}else if(k!=0||L!=0){const T=Math.sqrt(k*k+L*L);A.rotation=Math.PI/2-(L>0?Math.acos(-k/T):-Math.acos(k/T)),A.scaleX=x/T,A.scaleY=T,A.skewX=0,A.skewY=(v*k+C*L)/x}return A.rotation=t.Util._getRotation(A.rotation),A}}t.Transform=e;const i="[object Array]",a="[object Number]",r="[object String]",s="[object Boolean]",o=Math.PI/180,c=180/Math.PI,h="#",l="",u="0",p="Konva warning: ",f="Konva error: ",g="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},S=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let P=[];const m=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(d){setTimeout(d,60)};t.Util={_isElement(d){return!!(d&&d.nodeType==1)},_isFunction(d){return!!(d&&d.constructor&&d.call&&d.apply)},_isPlainObject(d){return!!d&&d.constructor===Object},_isArray(d){return Object.prototype.toString.call(d)===i},_isNumber(d){return Object.prototype.toString.call(d)===a&&!isNaN(d)&&isFinite(d)},_isString(d){return Object.prototype.toString.call(d)===r},_isBoolean(d){return Object.prototype.toString.call(d)===s},isObject(d){return d instanceof Object},isValidSelector(d){if(typeof d!="string")return!1;const v=d[0];return v==="#"||v==="."||v===v.toUpperCase()},_sign(d){return d===0||d>0?1:-1},requestAnimFrame(d){P.push(d),P.length===1&&m(function(){const v=P;P=[],v.forEach(function(C){C()})})},createCanvasElement(){const d=document.createElement("canvas");try{d.style=d.style||{}}catch{}return d},createImageElement(){return document.createElement("img")},_isInDocument(d){for(;d=d.parentNode;)if(d==document)return!0;return!1},_urlToImage(d,v){const C=t.Util.createImageElement();C.onload=function(){v(C)},C.src=d},_rgbToHex(d,v,C){return((1<<24)+(d<<16)+(v<<8)+C).toString(16).slice(1)},_hexToRgb(d){d=d.replace(h,l);const v=parseInt(d,16);return{r:v>>16&255,g:v>>8&255,b:v&255}},getRandomColor(){let d=(Math.random()*16777215<<0).toString(16);for(;d.length<6;)d=u+d;return h+d},getRGB(d){let v;return d in y?(v=y[d],{r:v[0],g:v[1],b:v[2]}):d[0]===h?this._hexToRgb(d.substring(1)):d.substr(0,4)===g?(v=S.exec(d.replace(/ /g,"")),{r:parseInt(v[1],10),g:parseInt(v[2],10),b:parseInt(v[3],10)}):{r:0,g:0,b:0}},colorToRGBA(d){return d=d||"black",t.Util._namedColorToRBA(d)||t.Util._hex3ColorToRGBA(d)||t.Util._hex4ColorToRGBA(d)||t.Util._hex6ColorToRGBA(d)||t.Util._hex8ColorToRGBA(d)||t.Util._rgbColorToRGBA(d)||t.Util._rgbaColorToRGBA(d)||t.Util._hslColorToRGBA(d)},_namedColorToRBA(d){const v=y[d.toLowerCase()];return v?{r:v[0],g:v[1],b:v[2],a:1}:null},_rgbColorToRGBA(d){if(d.indexOf("rgb(")===0){d=d.match(/rgb\(([^)]+)\)/)[1];const v=d.split(/ *, */).map(Number);return{r:v[0],g:v[1],b:v[2],a:1}}},_rgbaColorToRGBA(d){if(d.indexOf("rgba(")===0){d=d.match(/rgba\(([^)]+)\)/)[1];const v=d.split(/ *, */).map((C,k)=>C.slice(-1)==="%"?k===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:v[0],g:v[1],b:v[2],a:v[3]}}},_hex8ColorToRGBA(d){if(d[0]==="#"&&d.length===9)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:parseInt(d.slice(7,9),16)/255}},_hex6ColorToRGBA(d){if(d[0]==="#"&&d.length===7)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:1}},_hex4ColorToRGBA(d){if(d[0]==="#"&&d.length===5)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:parseInt(d[4]+d[4],16)/255}},_hex3ColorToRGBA(d){if(d[0]==="#"&&d.length===4)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:1}},_hslColorToRGBA(d){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(d)){const[v,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(d),k=Number(C[0])/360,L=Number(C[1])/100,b=Number(C[2])/100;let _,x,A;if(L===0)return A=b*255,{r:Math.round(A),g:Math.round(A),b:Math.round(A),a:1};b<.5?_=b*(1+L):_=b+L-b*L;const T=2*b-_,N=[0,0,0];for(let I=0;I<3;I++)x=k+1/3*-(I-1),x<0&&x++,x>1&&x--,6*x<1?A=T+(_-T)*6*x:2*x<1?A=_:3*x<2?A=T+(_-T)*(2/3-x)*6:A=T,N[I]=A*255;return{r:Math.round(N[0]),g:Math.round(N[1]),b:Math.round(N[2]),a:1}}},haveIntersection(d,v){return!(v.x>d.x+d.width||v.x+v.width<d.x||v.y>d.y+d.height||v.y+v.height<d.y)},cloneObject(d){const v={};for(const C in d)this._isPlainObject(d[C])?v[C]=this.cloneObject(d[C]):this._isArray(d[C])?v[C]=this.cloneArray(d[C]):v[C]=d[C];return v},cloneArray(d){return d.slice(0)},degToRad(d){return d*o},radToDeg(d){return d*c},_degToRad(d){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(d)},_radToDeg(d){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(d)},_getRotation(d){return n.Konva.angleDeg?t.Util.radToDeg(d):d},_capitalize(d){return d.charAt(0).toUpperCase()+d.slice(1)},throw(d){throw new Error(f+d)},error(d){console.error(f+d)},warn(d){n.Konva.showWarnings&&console.warn(p+d)},each(d,v){for(const C in d)v(C,d[C])},_inRange(d,v,C){return v<=d&&d<C},_getProjectionToSegment(d,v,C,k,L,b){let _,x,A;const T=(d-C)*(d-C)+(v-k)*(v-k);if(T==0)_=d,x=v,A=(L-C)*(L-C)+(b-k)*(b-k);else{const N=((L-d)*(C-d)+(b-v)*(k-v))/T;N<0?(_=d,x=v,A=(d-L)*(d-L)+(v-b)*(v-b)):N>1?(_=C,x=k,A=(C-L)*(C-L)+(k-b)*(k-b)):(_=d+N*(C-d),x=v+N*(k-v),A=(_-L)*(_-L)+(x-b)*(x-b))}return[_,x,A]},_getProjectionToLine(d,v,C){const k=t.Util.cloneObject(d);let L=Number.MAX_VALUE;return v.forEach(function(b,_){if(!C&&_===v.length-1)return;const x=v[(_+1)%v.length],A=t.Util._getProjectionToSegment(b.x,b.y,x.x,x.y,d.x,d.y),T=A[0],N=A[1],I=A[2];I<L&&(k.x=T,k.y=N,L=I)}),k},_prepareArrayForTween(d,v,C){const k=[],L=[];if(d.length>v.length){const _=v;v=d,d=_}for(let _=0;_<d.length;_+=2)k.push({x:d[_],y:d[_+1]});for(let _=0;_<v.length;_+=2)L.push({x:v[_],y:v[_+1]});const b=[];return L.forEach(function(_){const x=t.Util._getProjectionToLine(_,k,C);b.push(x.x),b.push(x.y)}),b},_prepareToStringify(d){let v;d.visitedByCircularReferenceRemoval=!0;for(const C in d)if(d.hasOwnProperty(C)&&d[C]&&typeof d[C]=="object"){if(v=Object.getOwnPropertyDescriptor(d,C),d[C].visitedByCircularReferenceRemoval||t.Util._isElement(d[C]))if(v.configurable)delete d[C];else return null;else if(t.Util._prepareToStringify(d[C])===null)if(v.configurable)delete d[C];else return null}return delete d.visitedByCircularReferenceRemoval,d},_assign(d,v){for(const C in v)d[C]=v[C];return d},_getFirstPointerId(d){return d.touches?d.changedTouches[0].identifier:d.pointerId||999},releaseCanvas(...d){n.Konva.releaseCanvasOnDestroy&&d.forEach(v=>{v.width=0,v.height=0})},drawRoundedRectPath(d,v,C,k){let L=0,b=0,_=0,x=0;typeof k=="number"?L=b=_=x=Math.min(k,v/2,C/2):(L=Math.min(k[0]||0,v/2,C/2),b=Math.min(k[1]||0,v/2,C/2),x=Math.min(k[2]||0,v/2,C/2),_=Math.min(k[3]||0,v/2,C/2)),d.moveTo(L,0),d.lineTo(v-b,0),d.arc(v-b,b,b,Math.PI*3/2,0,!1),d.lineTo(v,C-x),d.arc(v-x,C-x,x,0,Math.PI/2,!1),d.lineTo(_,C),d.arc(_,C-_,_,Math.PI/2,Math.PI,!1),d.lineTo(0,L),d.arc(L,L,L,Math.PI,Math.PI*3/2,!1)}}}(Hi)),Hi}var $e={},qt={},Wt={},is;function rs(){if(is)return Wt;is=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.HitContext=Wt.SceneContext=Wt.Context=void 0;const t=ct(),n=tt();function e(P){const m=[],d=P.length,v=t.Util;for(let C=0;C<d;C++){let k=P[C];v._isNumber(k)?k=Math.round(k*1e3)/1e3:v._isString(k)||(k=k+""),m.push(k)}return m}const i=",",a="(",r=")",s="([",o="])",c=";",h="()",l="=",u=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],p=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],f=100;let g=class{constructor(m){this.canvas=m,n.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(m){m.fillEnabled()&&this._fill(m)}_fill(m){}strokeShape(m){m.hasStroke()&&this._stroke(m)}_stroke(m){}fillStrokeShape(m){m.attrs.fillAfterStrokeEnabled?(this.strokeShape(m),this.fillShape(m)):(this.fillShape(m),this.strokeShape(m))}getTrace(m,d){let v=this.traceArr,C=v.length,k="",L,b,_,x;for(L=0;L<C;L++)b=v[L],_=b.method,_?(x=b.args,k+=_,m?k+=h:t.Util._isArray(x[0])?k+=s+x.join(i)+o:(d&&(x=x.map(A=>typeof A=="number"?Math.floor(A):A)),k+=a+x.join(i)+r)):(k+=b.property,m||(k+=l+b.val)),k+=c;return k}clearTrace(){this.traceArr=[]}_trace(m){let d=this.traceArr,v;d.push(m),v=d.length,v>=f&&d.shift()}reset(){const m=this.getCanvas().getPixelRatio();this.setTransform(1*m,0,0,1*m,0,0)}getCanvas(){return this.canvas}clear(m){const d=this.getCanvas();m?this.clearRect(m.x||0,m.y||0,m.width||0,m.height||0):this.clearRect(0,0,d.getWidth()/d.pixelRatio,d.getHeight()/d.pixelRatio)}_applyLineCap(m){const d=m.attrs.lineCap;d&&this.setAttr("lineCap",d)}_applyOpacity(m){const d=m.getAbsoluteOpacity();d!==1&&this.setAttr("globalAlpha",d)}_applyLineJoin(m){const d=m.attrs.lineJoin;d&&this.setAttr("lineJoin",d)}setAttr(m,d){this._context[m]=d}arc(m,d,v,C,k,L){this._context.arc(m,d,v,C,k,L)}arcTo(m,d,v,C,k){this._context.arcTo(m,d,v,C,k)}beginPath(){this._context.beginPath()}bezierCurveTo(m,d,v,C,k,L){this._context.bezierCurveTo(m,d,v,C,k,L)}clearRect(m,d,v,C){this._context.clearRect(m,d,v,C)}clip(...m){this._context.clip.apply(this._context,m)}closePath(){this._context.closePath()}createImageData(m,d){const v=arguments;if(v.length===2)return this._context.createImageData(m,d);if(v.length===1)return this._context.createImageData(m)}createLinearGradient(m,d,v,C){return this._context.createLinearGradient(m,d,v,C)}createPattern(m,d){return this._context.createPattern(m,d)}createRadialGradient(m,d,v,C,k,L){return this._context.createRadialGradient(m,d,v,C,k,L)}drawImage(m,d,v,C,k,L,b,_,x){const A=arguments,T=this._context;A.length===3?T.drawImage(m,d,v):A.length===5?T.drawImage(m,d,v,C,k):A.length===9&&T.drawImage(m,d,v,C,k,L,b,_,x)}ellipse(m,d,v,C,k,L,b,_){this._context.ellipse(m,d,v,C,k,L,b,_)}isPointInPath(m,d,v,C){return v?this._context.isPointInPath(v,m,d,C):this._context.isPointInPath(m,d,C)}fill(...m){this._context.fill.apply(this._context,m)}fillRect(m,d,v,C){this._context.fillRect(m,d,v,C)}strokeRect(m,d,v,C){this._context.strokeRect(m,d,v,C)}fillText(m,d,v,C){C?this._context.fillText(m,d,v,C):this._context.fillText(m,d,v)}measureText(m){return this._context.measureText(m)}getImageData(m,d,v,C){return this._context.getImageData(m,d,v,C)}lineTo(m,d){this._context.lineTo(m,d)}moveTo(m,d){this._context.moveTo(m,d)}rect(m,d,v,C){this._context.rect(m,d,v,C)}roundRect(m,d,v,C,k){this._context.roundRect(m,d,v,C,k)}putImageData(m,d,v){this._context.putImageData(m,d,v)}quadraticCurveTo(m,d,v,C){this._context.quadraticCurveTo(m,d,v,C)}restore(){this._context.restore()}rotate(m){this._context.rotate(m)}save(){this._context.save()}scale(m,d){this._context.scale(m,d)}setLineDash(m){this._context.setLineDash?this._context.setLineDash(m):"mozDash"in this._context?this._context.mozDash=m:"webkitLineDash"in this._context&&(this._context.webkitLineDash=m)}getLineDash(){return this._context.getLineDash()}setTransform(m,d,v,C,k,L){this._context.setTransform(m,d,v,C,k,L)}stroke(m){m?this._context.stroke(m):this._context.stroke()}strokeText(m,d,v,C){this._context.strokeText(m,d,v,C)}transform(m,d,v,C,k,L){this._context.transform(m,d,v,C,k,L)}translate(m,d){this._context.translate(m,d)}_enableTrace(){let m=this,d=u.length,v=this.setAttr,C,k;const L=function(b){let _=m[b],x;m[b]=function(){return k=e(Array.prototype.slice.call(arguments,0)),x=_.apply(m,arguments),m._trace({method:b,args:k}),x}};for(C=0;C<d;C++)L(u[C]);m.setAttr=function(){v.apply(m,arguments);const b=arguments[0];let _=arguments[1];(b==="shadowOffsetX"||b==="shadowOffsetY"||b==="shadowBlur")&&(_=_/this.canvas.getPixelRatio()),m._trace({property:b,val:_})}}_applyGlobalCompositeOperation(m){const d=m.attrs.globalCompositeOperation;!d||d==="source-over"||this.setAttr("globalCompositeOperation",d)}};Wt.Context=g,p.forEach(function(P){Object.defineProperty(g.prototype,P,{get(){return this._context[P]},set(m){this._context[P]=m}})});class y extends g{constructor(m,{willReadFrequently:d=!1}={}){super(m),this._context=m._canvas.getContext("2d",{willReadFrequently:d})}_fillColor(m){const d=m.fill();this.setAttr("fillStyle",d),m._fillFunc(this)}_fillPattern(m){this.setAttr("fillStyle",m._getFillPattern()),m._fillFunc(this)}_fillLinearGradient(m){const d=m._getLinearGradient();d&&(this.setAttr("fillStyle",d),m._fillFunc(this))}_fillRadialGradient(m){const d=m._getRadialGradient();d&&(this.setAttr("fillStyle",d),m._fillFunc(this))}_fill(m){const d=m.fill(),v=m.getFillPriority();if(d&&v==="color"){this._fillColor(m);return}const C=m.getFillPatternImage();if(C&&v==="pattern"){this._fillPattern(m);return}const k=m.getFillLinearGradientColorStops();if(k&&v==="linear-gradient"){this._fillLinearGradient(m);return}const L=m.getFillRadialGradientColorStops();if(L&&v==="radial-gradient"){this._fillRadialGradient(m);return}d?this._fillColor(m):C?this._fillPattern(m):k?this._fillLinearGradient(m):L&&this._fillRadialGradient(m)}_strokeLinearGradient(m){const d=m.getStrokeLinearGradientStartPoint(),v=m.getStrokeLinearGradientEndPoint(),C=m.getStrokeLinearGradientColorStops(),k=this.createLinearGradient(d.x,d.y,v.x,v.y);if(C){for(let L=0;L<C.length;L+=2)k.addColorStop(C[L],C[L+1]);this.setAttr("strokeStyle",k)}}_stroke(m){const d=m.dash(),v=m.getStrokeScaleEnabled();if(m.hasStroke()){if(!v){this.save();const k=this.getCanvas().getPixelRatio();this.setTransform(k,0,0,k,0,0)}this._applyLineCap(m),d&&m.dashEnabled()&&(this.setLineDash(d),this.setAttr("lineDashOffset",m.dashOffset())),this.setAttr("lineWidth",m.strokeWidth()),m.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),m.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(m):this.setAttr("strokeStyle",m.stroke()),m._strokeFunc(this),v||this.restore()}}_applyShadow(m){var d,v,C;const k=(d=m.getShadowRGBA())!==null&&d!==void 0?d:"black",L=(v=m.getShadowBlur())!==null&&v!==void 0?v:5,b=(C=m.getShadowOffset())!==null&&C!==void 0?C:{x:0,y:0},_=m.getAbsoluteScale(),x=this.canvas.getPixelRatio(),A=_.x*x,T=_.y*x;this.setAttr("shadowColor",k),this.setAttr("shadowBlur",L*Math.min(Math.abs(A),Math.abs(T))),this.setAttr("shadowOffsetX",b.x*A),this.setAttr("shadowOffsetY",b.y*T)}}Wt.SceneContext=y;class S extends g{constructor(m){super(m),this._context=m._canvas.getContext("2d",{willReadFrequently:!0})}_fill(m){this.save(),this.setAttr("fillStyle",m.colorKey),m._fillFuncHit(this),this.restore()}strokeShape(m){m.hasHitStroke()&&this._stroke(m)}_stroke(m){if(m.hasHitStroke()){const d=m.getStrokeScaleEnabled();if(!d){this.save();const k=this.getCanvas().getPixelRatio();this.setTransform(k,0,0,k,0,0)}this._applyLineCap(m);const v=m.hitStrokeWidth(),C=v==="auto"?m.strokeWidth():v;this.setAttr("lineWidth",C),this.setAttr("strokeStyle",m.colorKey),m._strokeFuncHit(this),d||this.restore()}}}return Wt.HitContext=S,Wt}var ss;function si(){if(ss)return qt;ss=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.HitCanvas=qt.SceneCanvas=qt.Canvas=void 0;const t=ct(),n=rs(),e=tt();let i;function a(){if(i)return i;const c=t.Util.createCanvasElement(),h=c.getContext("2d");return i=function(){const l=e.Konva._global.devicePixelRatio||1,u=h.webkitBackingStorePixelRatio||h.mozBackingStorePixelRatio||h.msBackingStorePixelRatio||h.oBackingStorePixelRatio||h.backingStorePixelRatio||1;return l/u}(),t.Util.releaseCanvas(c),i}let r=class{constructor(h){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const u=(h||{}).pixelRatio||e.Konva.pixelRatio||a();this.pixelRatio=u,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(h){const l=this.pixelRatio;this.pixelRatio=h,this.setSize(this.getWidth()/l,this.getHeight()/l)}setWidth(h){this.width=this._canvas.width=h*this.pixelRatio,this._canvas.style.width=h+"px";const l=this.pixelRatio;this.getContext()._context.scale(l,l)}setHeight(h){this.height=this._canvas.height=h*this.pixelRatio,this._canvas.style.height=h+"px";const l=this.pixelRatio;this.getContext()._context.scale(l,l)}getWidth(){return this.width}getHeight(){return this.height}setSize(h,l){this.setWidth(h||0),this.setHeight(l||0)}toDataURL(h,l){try{return this._canvas.toDataURL(h,l)}catch{try{return this._canvas.toDataURL()}catch(p){return t.Util.error("Unable to get data URL. "+p.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};qt.Canvas=r;class s extends r{constructor(h={width:0,height:0,willReadFrequently:!1}){super(h),this.context=new n.SceneContext(this,{willReadFrequently:h.willReadFrequently}),this.setSize(h.width,h.height)}}qt.SceneCanvas=s;class o extends r{constructor(h={width:0,height:0}){super(h),this.hitCanvas=!0,this.context=new n.HitContext(this),this.setSize(h.width,h.height)}}return qt.HitCanvas=o,qt}var zi={},os;function ji(){return os||(os=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const n=tt(),e=ct();t.DD={get isDragging(){let i=!1;return t.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){let i;return t.DD._dragElements.forEach(a=>{i=a.node}),i},_dragElements:new Map,_drag(i){const a=[];t.DD._dragElements.forEach((r,s)=>{const{node:o}=r,c=o.getStage();c.setPointersPositions(i),r.pointerId===void 0&&(r.pointerId=e.Util._getFirstPointerId(i));const h=c._changedPointerPositions.find(l=>l.id===r.pointerId);if(h){if(r.dragStatus!=="dragging"){const l=o.dragDistance();if(Math.max(Math.abs(h.x-r.startPointerPos.x),Math.abs(h.y-r.startPointerPos.y))<l||(o.startDrag({evt:i}),!o.isDragging()))return}o._setDragPosition(i,r),a.push(o)}}),a.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:i},!0)})},_endDragBefore(i){const a=[];t.DD._dragElements.forEach(r=>{const{node:s}=r,o=s.getStage();if(i&&o.setPointersPositions(i),!o._changedPointerPositions.find(l=>l.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(t.DD.justDragged=!0,n.Konva._mouseListenClick=!1,n.Konva._touchListenClick=!1,n.Konva._pointerListenClick=!1,r.dragStatus="stopped");const h=r.node.getLayer()||r.node instanceof n.Konva.Stage&&r.node;h&&a.indexOf(h)===-1&&a.push(h)}),a.forEach(r=>{r.draw()})},_endDragAfter(i){t.DD._dragElements.forEach((a,r)=>{a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:i},!0),a.dragStatus!=="dragging"&&t.DD._dragElements.delete(r)})}},n.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))}(zi)),zi}var $i={},_t={},as;function it(){if(as)return _t;as=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.RGBComponent=i,_t.alphaComponent=a,_t.getNumberValidator=r,_t.getNumberOrArrayOfNumbersValidator=s,_t.getNumberOrAutoValidator=o,_t.getStringValidator=c,_t.getStringOrGradientValidator=h,_t.getFunctionValidator=l,_t.getNumberArrayValidator=u,_t.getBooleanValidator=p,_t.getComponentValidator=f;const t=tt(),n=ct();function e(g){return n.Util._isString(g)?'"'+g+'"':Object.prototype.toString.call(g)==="[object Number]"||n.Util._isBoolean(g)?g:Object.prototype.toString.call(g)}function i(g){return g>255?255:g<0?0:Math.round(g)}function a(g){return g>1?1:g<1e-4?1e-4:g}function r(){if(t.Konva.isUnminified)return function(g,y){return n.Util._isNumber(g)||n.Util.warn(e(g)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),g}}function s(g){if(t.Konva.isUnminified)return function(y,S){let P=n.Util._isNumber(y),m=n.Util._isArray(y)&&y.length==g;return!P&&!m&&n.Util.warn(e(y)+' is a not valid value for "'+S+'" attribute. The value should be a number or Array<number>('+g+")"),y}}function o(){if(t.Konva.isUnminified)return function(g,y){return n.Util._isNumber(g)||g==="auto"||n.Util.warn(e(g)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),g}}function c(){if(t.Konva.isUnminified)return function(g,y){return n.Util._isString(g)||n.Util.warn(e(g)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),g}}function h(){if(t.Konva.isUnminified)return function(g,y){const S=n.Util._isString(g),P=Object.prototype.toString.call(g)==="[object CanvasGradient]"||g&&g.addColorStop;return S||P||n.Util.warn(e(g)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),g}}function l(){if(t.Konva.isUnminified)return function(g,y){return n.Util._isFunction(g)||n.Util.warn(e(g)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),g}}function u(){if(t.Konva.isUnminified)return function(g,y){const S=Int8Array?Object.getPrototypeOf(Int8Array):null;return S&&g instanceof S||(n.Util._isArray(g)?g.forEach(function(P){n.Util._isNumber(P)||n.Util.warn('"'+y+'" attribute has non numeric element '+P+". Make sure that all elements are numbers.")}):n.Util.warn(e(g)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),g}}function p(){if(t.Konva.isUnminified)return function(g,y){return g===!0||g===!1||n.Util.warn(e(g)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),g}}function f(g){if(t.Konva.isUnminified)return function(y,S){return y==null||n.Util.isObject(y)||n.Util.warn(e(y)+' is a not valid value for "'+S+'" attribute. The value should be an object with properties '+g),y}}return _t}var ls;function nt(){return ls||(ls=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const n=ct(),e=it(),i="get",a="set";t.Factory={addGetterSetter(r,s,o,c,h){t.Factory.addGetter(r,s,o),t.Factory.addSetter(r,s,c,h),t.Factory.addOverloadedGetterSetter(r,s)},addGetter(r,s,o){const c=i+n.Util._capitalize(s);r.prototype[c]=r.prototype[c]||function(){const h=this.attrs[s];return h===void 0?o:h}},addSetter(r,s,o,c){const h=a+n.Util._capitalize(s);r.prototype[h]||t.Factory.overWriteSetter(r,s,o,c)},overWriteSetter(r,s,o,c){const h=a+n.Util._capitalize(s);r.prototype[h]=function(l){return o&&l!==void 0&&l!==null&&(l=o.call(this,l,s)),this._setAttr(s,l),c&&c.call(this),this}},addComponentsGetterSetter(r,s,o,c,h){const l=o.length,u=n.Util._capitalize,p=i+u(s),f=a+u(s);r.prototype[p]=function(){const y={};for(let S=0;S<l;S++){const P=o[S];y[P]=this.getAttr(s+u(P))}return y};const g=(0,e.getComponentValidator)(o);r.prototype[f]=function(y){const S=this.attrs[s];c&&(y=c.call(this,y,s)),g&&g.call(this,y,s);for(const P in y)y.hasOwnProperty(P)&&this._setAttr(s+u(P),y[P]);return y||o.forEach(P=>{this._setAttr(s+u(P),void 0)}),this._fireChangeEvent(s,S,y),h&&h.call(this),this},t.Factory.addOverloadedGetterSetter(r,s)},addOverloadedGetterSetter(r,s){const o=n.Util._capitalize(s),c=a+o,h=i+o;r.prototype[s]=function(){return arguments.length?(this[c](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(r,s,o,c){n.Util.error("Adding deprecated "+s);const h=i+n.Util._capitalize(s),l=s+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[h]=function(){n.Util.error(l);const u=this.attrs[s];return u===void 0?o:u},t.Factory.addSetter(r,s,c,function(){n.Util.error(l)}),t.Factory.addOverloadedGetterSetter(r,s)},backCompat(r,s){n.Util.each(s,function(o,c){const h=r.prototype[c],l=i+n.Util._capitalize(o),u=a+n.Util._capitalize(o);function p(){h.apply(this,arguments),n.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}r.prototype[o]=p,r.prototype[l]=p,r.prototype[u]=p})},afterSetFilter(){this._filterUpToDate=!1}}}($i)),$i}var cs;function ht(){if(cs)return $e;cs=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.Node=void 0;const t=si(),n=ji(),e=nt(),i=tt(),a=ct(),r=it(),s="absoluteOpacity",o="allEventListeners",c="absoluteTransform",h="absoluteScale",l="canvas",u="Change",p="children",f="konva",g="listening",y="mouseenter",S="mouseleave",P="pointerenter",m="pointerleave",d="touchenter",v="touchleave",C="set",k="Shape",L=" ",b="stage",_="transform",x="Stage",A="visible",T=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(L);let N=1,I=class Zi{constructor(w){this._id=N++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(w),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(w){(w===_||w===c)&&this._cache.get(w)?this._cache.get(w).dirty=!0:w?this._cache.delete(w):this._cache.clear()}_getCache(w,R){let F=this._cache.get(w);return(F===void 0||(w===_||w===c)&&F.dirty===!0)&&(F=R.call(this),this._cache.set(w,F)),F}_calculate(w,R,F){if(!this._attachedDepsListeners.get(w)){const E=R.map(O=>O+"Change.konva").join(L);this.on(E,()=>{this._clearCache(w)}),this._attachedDepsListeners.set(w,!0)}return this._getCache(w,F)}_getCanvasCache(){return this._cache.get(l)}_clearSelfAndDescendantCache(w){this._clearCache(w),w===c&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(l)){const{scene:w,filter:R,hit:F,buffer:E}=this._cache.get(l);a.Util.releaseCanvas(w,R,F,E),this._cache.delete(l)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(w){const R=w||{};let F={};(R.x===void 0||R.y===void 0||R.width===void 0||R.height===void 0)&&(F=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let E=Math.ceil(R.width||F.width),O=Math.ceil(R.height||F.height),V=R.pixelRatio,G=R.x===void 0?Math.floor(F.x):R.x,z=R.y===void 0?Math.floor(F.y):R.y,$=R.offset||0,U=R.drawBorder||!1,M=R.hitCanvasPixelRatio||1;if(!E||!O){a.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const B=Math.abs(Math.round(F.x)-G)>.5?1:0,j=Math.abs(Math.round(F.y)-z)>.5?1:0;E+=$*2+B,O+=$*2+j,G-=$,z-=$;const q=new t.SceneCanvas({pixelRatio:V,width:E,height:O}),W=new t.SceneCanvas({pixelRatio:V,width:0,height:0,willReadFrequently:!0}),X=new t.HitCanvas({pixelRatio:M,width:E,height:O}),Q=q.getContext(),et=X.getContext(),Y=new t.SceneCanvas({width:q.width/q.pixelRatio+Math.abs(G),height:q.height/q.pixelRatio+Math.abs(z),pixelRatio:q.pixelRatio}),ot=Y.getContext();return X.isCache=!0,q.isCache=!0,this._cache.delete(l),this._filterUpToDate=!1,R.imageSmoothingEnabled===!1&&(q.getContext()._context.imageSmoothingEnabled=!1,W.getContext()._context.imageSmoothingEnabled=!1),Q.save(),et.save(),ot.save(),Q.translate(-G,-z),et.translate(-G,-z),ot.translate(-G,-z),Y.x=G,Y.y=z,this._isUnderCache=!0,this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(h),this.drawScene(q,this,Y),this.drawHit(X,this),this._isUnderCache=!1,Q.restore(),et.restore(),U&&(Q.save(),Q.beginPath(),Q.rect(0,0,E,O),Q.closePath(),Q.setAttr("strokeStyle","red"),Q.setAttr("lineWidth",5),Q.stroke(),Q.restore()),this._cache.set(l,{scene:q,filter:W,hit:X,buffer:Y,x:G,y:z}),this._requestDraw(),this}isCached(){return this._cache.has(l)}getClientRect(w){throw new Error('abstract "getClientRect" method call')}_transformedRect(w,R){const F=[{x:w.x,y:w.y},{x:w.x+w.width,y:w.y},{x:w.x+w.width,y:w.y+w.height},{x:w.x,y:w.y+w.height}];let E=1/0,O=1/0,V=-1/0,G=-1/0;const z=this.getAbsoluteTransform(R);return F.forEach(function($){const U=z.point($);E===void 0&&(E=V=U.x,O=G=U.y),E=Math.min(E,U.x),O=Math.min(O,U.y),V=Math.max(V,U.x),G=Math.max(G,U.y)}),{x:E,y:O,width:V-E,height:G-O}}_drawCachedSceneCanvas(w){w.save(),w._applyOpacity(this),w._applyGlobalCompositeOperation(this);const R=this._getCanvasCache();w.translate(R.x,R.y);const F=this._getCachedSceneCanvas(),E=F.pixelRatio;w.drawImage(F._canvas,0,0,F.width/E,F.height/E),w.restore()}_drawCachedHitCanvas(w){const R=this._getCanvasCache(),F=R.hit;w.save(),w.translate(R.x,R.y),w.drawImage(F._canvas,0,0,F.width/F.pixelRatio,F.height/F.pixelRatio),w.restore()}_getCachedSceneCanvas(){let w=this.filters(),R=this._getCanvasCache(),F=R.scene,E=R.filter,O=E.getContext(),V,G,z,$;if(w){if(!this._filterUpToDate){const U=F.pixelRatio;E.setSize(F.width/F.pixelRatio,F.height/F.pixelRatio);try{for(V=w.length,O.clear(),O.drawImage(F._canvas,0,0,F.getWidth()/U,F.getHeight()/U),G=O.getImageData(0,0,E.getWidth(),E.getHeight()),z=0;z<V;z++){if($=w[z],typeof $!="function"){a.Util.error("Filter should be type of function, but got "+typeof $+" instead. Please check correct filters");continue}$.call(this,G),O.putImageData(G,0,0)}}catch(M){a.Util.error("Unable to apply filter. "+M.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return E}return F}on(w,R){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const F=w.split(L);for(let E=0;E<F.length;E++){const V=F[E].split("."),G=V[0],z=V[1]||"";this.eventListeners[G]||(this.eventListeners[G]=[]),this.eventListeners[G].push({name:z,handler:R})}return this}off(w,R){let F=(w||"").split(L),E=F.length,O,V,G,z,$,U;if(this._cache&&this._cache.delete(o),!w)for(V in this.eventListeners)this._off(V);for(O=0;O<E;O++)if(G=F[O],z=G.split("."),$=z[0],U=z[1],$)this.eventListeners[$]&&this._off($,U,R);else for(V in this.eventListeners)this._off(V,U,R);return this}dispatchEvent(w){const R={target:this,type:w.type,evt:w};return this.fire(w.type,R),this}addEventListener(w,R){return this.on(w,function(F){R.call(this,F.evt)}),this}removeEventListener(w){return this.off(w),this}_delegate(w,R,F){const E=this;this.on(w,function(O){const V=O.target.findAncestors(R,!0,E);for(let G=0;G<V.length;G++)O=a.Util.cloneObject(O),O.currentTarget=V[G],F.call(V[G],O)})}remove(){return this.isDragging()&&this.stopDrag(),n.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(A),this._clearSelfAndDescendantCache(g)}_remove(){this._clearCaches();const w=this.getParent();w&&w.children&&(w.children.splice(this.index,1),w._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(w){const R="get"+a.Util._capitalize(w);return a.Util._isFunction(this[R])?this[R]():this.attrs[w]}getAncestors(){let w=this.getParent(),R=[];for(;w;)R.push(w),w=w.getParent();return R}getAttrs(){return this.attrs||{}}setAttrs(w){return this._batchTransformChanges(()=>{let R,F;if(!w)return this;for(R in w)R!==p&&(F=C+a.Util._capitalize(R),a.Util._isFunction(this[F])?this[F](w[R]):this._setAttr(R,w[R]))}),this}isListening(){return this._getCache(g,this._isListening)}_isListening(w){if(!this.listening())return!1;const F=this.getParent();return F&&F!==w&&this!==w?F._isListening(w):!0}isVisible(){return this._getCache(A,this._isVisible)}_isVisible(w){if(!this.visible())return!1;const F=this.getParent();return F&&F!==w&&this!==w?F._isVisible(w):!0}shouldDrawHit(w,R=!1){if(w)return this._isVisible(w)&&this._isListening(w);const F=this.getLayer();let E=!1;n.DD._dragElements.forEach(V=>{V.dragStatus==="dragging"&&(V.node.nodeType==="Stage"||V.node.getLayer()===F)&&(E=!0)});const O=!R&&!i.Konva.hitOnDragEnabled&&(E||i.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!O}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let w=this.getDepth(),R=this,F=0,E,O,V,G;function z(U){for(E=[],O=U.length,V=0;V<O;V++)G=U[V],F++,G.nodeType!==k&&(E=E.concat(G.getChildren().slice())),G._id===R._id&&(V=O);E.length>0&&E[0].getDepth()<=w&&z(E)}const $=this.getStage();return R.nodeType!==x&&$&&z($.getChildren()),F}getDepth(){let w=0,R=this.parent;for(;R;)w++,R=R.parent;return w}_batchTransformChanges(w){this._batchingTransformChange=!0,w(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(_),this._clearSelfAndDescendantCache(c)),this._needClearTransformCache=!1}setPosition(w){return this._batchTransformChanges(()=>{this.x(w.x),this.y(w.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const w=this.getStage();if(!w)return null;const R=w.getPointerPosition();if(!R)return null;const F=this.getAbsoluteTransform().copy();return F.invert(),F.point(R)}getAbsolutePosition(w){let R=!1,F=this.parent;for(;F;){if(F.isCached()){R=!0;break}F=F.parent}R&&!w&&(w=!0);const E=this.getAbsoluteTransform(w).getMatrix(),O=new a.Transform,V=this.offset();return O.m=E.slice(),O.translate(V.x,V.y),O.getTranslation()}setAbsolutePosition(w){const{x:R,y:F,...E}=this._clearTransform();this.attrs.x=R,this.attrs.y=F,this._clearCache(_);const O=this._getAbsoluteTransform().copy();return O.invert(),O.translate(w.x,w.y),w={x:this.attrs.x+O.getTranslation().x,y:this.attrs.y+O.getTranslation().y},this._setTransform(E),this.setPosition({x:w.x,y:w.y}),this._clearCache(_),this._clearSelfAndDescendantCache(c),this}_setTransform(w){let R;for(R in w)this.attrs[R]=w[R]}_clearTransform(){const w={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,w}move(w){let R=w.x,F=w.y,E=this.x(),O=this.y();return R!==void 0&&(E+=R),F!==void 0&&(O+=F),this.setPosition({x:E,y:O}),this}_eachAncestorReverse(w,R){let F=[],E=this.getParent(),O,V;if(!(R&&R._id===this._id)){for(F.unshift(this);E&&(!R||E._id!==R._id);)F.unshift(E),E=E.parent;for(O=F.length,V=0;V<O;V++)w(F[V])}}rotate(w){return this.rotation(this.rotation()+w),this}moveToTop(){if(!this.parent)return a.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const w=this.index,R=this.parent.getChildren().length;return w<R-1?(this.parent.children.splice(w,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return a.Util.warn("Node has no parent. moveUp function is ignored."),!1;const w=this.index,R=this.parent.getChildren().length;return w<R-1?(this.parent.children.splice(w,1),this.parent.children.splice(w+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return a.Util.warn("Node has no parent. moveDown function is ignored."),!1;const w=this.index;return w>0?(this.parent.children.splice(w,1),this.parent.children.splice(w-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return a.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const w=this.index;return w>0?(this.parent.children.splice(w,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(w){if(!this.parent)return a.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(w<0||w>=this.parent.children.length)&&a.Util.warn("Unexpected value "+w+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const R=this.index;return this.parent.children.splice(R,1),this.parent.children.splice(w,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(s,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let w=this.opacity();const R=this.getParent();return R&&!R._isUnderCache&&(w*=R.getAbsoluteOpacity()),w}moveTo(w){return this.getParent()!==w&&(this._remove(),w.add(this)),this}toObject(){let w=this.getAttrs(),R,F,E,O,V;const G={attrs:{},className:this.getClassName()};for(R in w)F=w[R],V=a.Util.isObject(F)&&!a.Util._isPlainObject(F)&&!a.Util._isArray(F),!V&&(E=typeof this[R]=="function"&&this[R],delete w[R],O=E?E.call(this):null,w[R]=F,O!==F&&(G.attrs[R]=F));return a.Util._prepareToStringify(G)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(w,R,F){const E=[];R&&this._isMatch(w)&&E.push(this);let O=this.parent;for(;O;){if(O===F)return E;O._isMatch(w)&&E.push(O),O=O.parent}return E}isAncestorOf(w){return!1}findAncestor(w,R,F){return this.findAncestors(w,R,F)[0]}_isMatch(w){if(!w)return!1;if(typeof w=="function")return w(this);let R=w.replace(/ /g,"").split(","),F=R.length,E,O;for(E=0;E<F;E++)if(O=R[E],a.Util.isValidSelector(O)||(a.Util.warn('Selector "'+O+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),a.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),a.Util.warn("Konva is awesome, right?")),O.charAt(0)==="#"){if(this.id()===O.slice(1))return!0}else if(O.charAt(0)==="."){if(this.hasName(O.slice(1)))return!0}else if(this.className===O||this.nodeType===O)return!0;return!1}getLayer(){const w=this.getParent();return w?w.getLayer():null}getStage(){return this._getCache(b,this._getStage)}_getStage(){const w=this.getParent();return w?w.getStage():null}fire(w,R={},F){return R.target=R.target||this,F?this._fireAndBubble(w,R):this._fire(w,R),this}getAbsoluteTransform(w){return w?this._getAbsoluteTransform(w):this._getCache(c,this._getAbsoluteTransform)}_getAbsoluteTransform(w){let R;if(w)return R=new a.Transform,this._eachAncestorReverse(function(F){const E=F.transformsEnabled();E==="all"?R.multiply(F.getTransform()):E==="position"&&R.translate(F.x()-F.offsetX(),F.y()-F.offsetY())},w),R;{R=this._cache.get(c)||new a.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(R):R.reset();const F=this.transformsEnabled();if(F==="all")R.multiply(this.getTransform());else if(F==="position"){const E=this.attrs.x||0,O=this.attrs.y||0,V=this.attrs.offsetX||0,G=this.attrs.offsetY||0;R.translate(E-V,O-G)}return R.dirty=!1,R}}getAbsoluteScale(w){let R=this;for(;R;)R._isUnderCache&&(w=R),R=R.getParent();const E=this.getAbsoluteTransform(w).decompose();return{x:E.scaleX,y:E.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(_,this._getTransform)}_getTransform(){var w,R;const F=this._cache.get(_)||new a.Transform;F.reset();const E=this.x(),O=this.y(),V=i.Konva.getAngle(this.rotation()),G=(w=this.attrs.scaleX)!==null&&w!==void 0?w:1,z=(R=this.attrs.scaleY)!==null&&R!==void 0?R:1,$=this.attrs.skewX||0,U=this.attrs.skewY||0,M=this.attrs.offsetX||0,B=this.attrs.offsetY||0;return(E!==0||O!==0)&&F.translate(E,O),V!==0&&F.rotate(V),($!==0||U!==0)&&F.skew($,U),(G!==1||z!==1)&&F.scale(G,z),(M!==0||B!==0)&&F.translate(-1*M,-1*B),F.dirty=!1,F}clone(w){let R=a.Util.cloneObject(this.attrs),F,E,O,V,G;for(F in w)R[F]=w[F];const z=new this.constructor(R);for(F in this.eventListeners)for(E=this.eventListeners[F],O=E.length,V=0;V<O;V++)G=E[V],G.name.indexOf(f)<0&&(z.eventListeners[F]||(z.eventListeners[F]=[]),z.eventListeners[F].push(G));return z}_toKonvaCanvas(w){w=w||{};const R=this.getClientRect(),F=this.getStage(),E=w.x!==void 0?w.x:Math.floor(R.x),O=w.y!==void 0?w.y:Math.floor(R.y),V=w.pixelRatio||1,G=new t.SceneCanvas({width:w.width||Math.ceil(R.width)||(F?F.width():0),height:w.height||Math.ceil(R.height)||(F?F.height():0),pixelRatio:V}),z=G.getContext(),$=new t.SceneCanvas({width:G.width/G.pixelRatio+Math.abs(E),height:G.height/G.pixelRatio+Math.abs(O),pixelRatio:G.pixelRatio});return w.imageSmoothingEnabled===!1&&(z._context.imageSmoothingEnabled=!1),z.save(),(E||O)&&z.translate(-1*E,-1*O),this.drawScene(G,void 0,$),z.restore(),G}toCanvas(w){return this._toKonvaCanvas(w)._canvas}toDataURL(w){w=w||{};const R=w.mimeType||null,F=w.quality||null,E=this._toKonvaCanvas(w).toDataURL(R,F);return w.callback&&w.callback(E),E}toImage(w){return new Promise((R,F)=>{try{const E=w==null?void 0:w.callback;E&&delete w.callback,a.Util._urlToImage(this.toDataURL(w),function(O){R(O),E==null||E(O)})}catch(E){F(E)}})}toBlob(w){return new Promise((R,F)=>{try{const E=w==null?void 0:w.callback;E&&delete w.callback,this.toCanvas(w).toBlob(O=>{R(O),E==null||E(O)},w==null?void 0:w.mimeType,w==null?void 0:w.quality)}catch(E){F(E)}})}setSize(w){return this.width(w.width),this.height(w.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():i.Konva.dragDistance}_off(w,R,F){let E=this.eventListeners[w],O,V,G;for(O=0;O<E.length;O++)if(V=E[O].name,G=E[O].handler,(V!=="konva"||R==="konva")&&(!R||V===R)&&(!F||F===G)){if(E.splice(O,1),E.length===0){delete this.eventListeners[w];break}O--}}_fireChangeEvent(w,R,F){this._fire(w+u,{oldVal:R,newVal:F})}addName(w){if(!this.hasName(w)){const R=this.name(),F=R?R+" "+w:w;this.name(F)}return this}hasName(w){if(!w)return!1;const R=this.name();return R?(R||"").split(/\s/g).indexOf(w)!==-1:!1}removeName(w){const R=(this.name()||"").split(/\s/g),F=R.indexOf(w);return F!==-1&&(R.splice(F,1),this.name(R.join(" "))),this}setAttr(w,R){const F=this[C+a.Util._capitalize(w)];return a.Util._isFunction(F)?F.call(this,R):this._setAttr(w,R),this}_requestDraw(){if(i.Konva.autoDrawEnabled){const w=this.getLayer()||this.getStage();w==null||w.batchDraw()}}_setAttr(w,R){const F=this.attrs[w];F===R&&!a.Util.isObject(R)||(R==null?delete this.attrs[w]:this.attrs[w]=R,this._shouldFireChangeEvents&&this._fireChangeEvent(w,F,R),this._requestDraw())}_setComponentAttr(w,R,F){let E;F!==void 0&&(E=this.attrs[w],E||(this.attrs[w]=this.getAttr(w)),this.attrs[w][R]=F,this._fireChangeEvent(w,E,F))}_fireAndBubble(w,R,F){R&&this.nodeType===k&&(R.target=this);const E=[y,S,P,m,d,v];if(!(E.indexOf(w)!==-1&&(F&&(this===F||this.isAncestorOf&&this.isAncestorOf(F))||this.nodeType==="Stage"&&!F))){this._fire(w,R);const V=E.indexOf(w)!==-1&&F&&F.isAncestorOf&&F.isAncestorOf(this)&&!F.isAncestorOf(this.parent);(R&&!R.cancelBubble||!R)&&this.parent&&this.parent.isListening()&&!V&&(F&&F.parent?this._fireAndBubble.call(this.parent,w,R,F):this._fireAndBubble.call(this.parent,w,R))}}_getProtoListeners(w){var R,F,E;const O=(R=this._cache.get(o))!==null&&R!==void 0?R:{};let V=O==null?void 0:O[w];if(V===void 0){V=[];let G=Object.getPrototypeOf(this);for(;G;){const z=(E=(F=G.eventListeners)===null||F===void 0?void 0:F[w])!==null&&E!==void 0?E:[];V.push(...z),G=Object.getPrototypeOf(G)}O[w]=V,this._cache.set(o,O)}return V}_fire(w,R){R=R||{},R.currentTarget=this,R.type=w;const F=this._getProtoListeners(w);if(F)for(let O=0;O<F.length;O++)F[O].handler.call(this,R);const E=this.eventListeners[w];if(E)for(let O=0;O<E.length;O++)E[O].handler.call(this,R)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(w){const R=w?w.pointerId:void 0,F=this.getStage(),E=this.getAbsolutePosition();if(!F)return;const O=F._getPointerById(R)||F._changedPointerPositions[0]||E;n.DD._dragElements.set(this._id,{node:this,startPointerPos:O,offset:{x:O.x-E.x,y:O.y-E.y},dragStatus:"ready",pointerId:R})}startDrag(w,R=!0){n.DD._dragElements.has(this._id)||this._createDragElement(w);const F=n.DD._dragElements.get(this._id);F.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:w&&w.evt},R)}_setDragPosition(w,R){const F=this.getStage()._getPointerById(R.pointerId);if(!F)return;let E={x:F.x-R.offset.x,y:F.y-R.offset.y};const O=this.dragBoundFunc();if(O!==void 0){const V=O.call(this,E,w);V?E=V:a.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==E.x||this._lastPos.y!==E.y)&&(this.setAbsolutePosition(E),this._requestDraw()),this._lastPos=E}stopDrag(w){const R=n.DD._dragElements.get(this._id);R&&(R.dragStatus="stopped"),n.DD._endDragBefore(w),n.DD._endDragAfter(w)}setDraggable(w){this._setAttr("draggable",w),this._dragChange()}isDragging(){const w=n.DD._dragElements.get(this._id);return w?w.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(w){if(!(!(w.evt.button!==void 0)||i.Konva.dragButtons.indexOf(w.evt.button)>=0)||this.isDragging())return;let E=!1;n.DD._dragElements.forEach(O=>{this.isAncestorOf(O.node)&&(E=!0)}),E||this._createDragElement(w)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const R=n.DD._dragElements.get(this._id),F=R&&R.dragStatus==="dragging",E=R&&R.dragStatus==="ready";F?this.stopDrag():E&&n.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(w={x:0,y:0}){const R=this.getStage();if(!R)return!1;const F={x:-w.x,y:-w.y,width:R.width()+2*w.x,height:R.height()+2*w.y};return a.Util.haveIntersection(F,this.getClientRect())}static create(w,R){return a.Util._isString(w)&&(w=JSON.parse(w)),this._createNode(w,R)}static _createNode(w,R){let F=Zi.prototype.getClassName.call(w),E=w.children,O,V,G;R&&(w.attrs.container=R),i.Konva[F]||(a.Util.warn('Can not find a node with class name "'+F+'". Fallback to "Shape".'),F="Shape");const z=i.Konva[F];if(O=new z(w.attrs),E)for(V=E.length,G=0;G<V;G++)O.add(Zi._createNode(E[G]));return O}};$e.Node=I,I.prototype.nodeType="Node",I.prototype._attrsAffectingSize=[],I.prototype.eventListeners={},I.prototype.on.call(I.prototype,T,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(_),this._clearSelfAndDescendantCache(c)}),I.prototype.on.call(I.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(A)}),I.prototype.on.call(I.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(g)}),I.prototype.on.call(I.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(s)});const D=e.Factory.addGetterSetter;return D(I,"zIndex"),D(I,"absolutePosition"),D(I,"position"),D(I,"x",0,(0,r.getNumberValidator)()),D(I,"y",0,(0,r.getNumberValidator)()),D(I,"globalCompositeOperation","source-over",(0,r.getStringValidator)()),D(I,"opacity",1,(0,r.getNumberValidator)()),D(I,"name","",(0,r.getStringValidator)()),D(I,"id","",(0,r.getStringValidator)()),D(I,"rotation",0,(0,r.getNumberValidator)()),e.Factory.addComponentsGetterSetter(I,"scale",["x","y"]),D(I,"scaleX",1,(0,r.getNumberValidator)()),D(I,"scaleY",1,(0,r.getNumberValidator)()),e.Factory.addComponentsGetterSetter(I,"skew",["x","y"]),D(I,"skewX",0,(0,r.getNumberValidator)()),D(I,"skewY",0,(0,r.getNumberValidator)()),e.Factory.addComponentsGetterSetter(I,"offset",["x","y"]),D(I,"offsetX",0,(0,r.getNumberValidator)()),D(I,"offsetY",0,(0,r.getNumberValidator)()),D(I,"dragDistance",void 0,(0,r.getNumberValidator)()),D(I,"width",0,(0,r.getNumberValidator)()),D(I,"height",0,(0,r.getNumberValidator)()),D(I,"listening",!0,(0,r.getBooleanValidator)()),D(I,"preventDefault",!0,(0,r.getBooleanValidator)()),D(I,"filters",void 0,function(H){return this._filterUpToDate=!1,H}),D(I,"visible",!0,(0,r.getBooleanValidator)()),D(I,"transformsEnabled","all",(0,r.getStringValidator)()),D(I,"size"),D(I,"dragBoundFunc"),D(I,"draggable",!1,(0,r.getBooleanValidator)()),e.Factory.backCompat(I,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),$e}var qe={},hs;function oi(){if(hs)return qe;hs=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.Container=void 0;const t=nt(),n=ht(),e=it();let i=class extends n.Node{constructor(){super(...arguments),this.children=[]}getChildren(r){const s=this.children||[];return r?s.filter(r):s}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(r=>{r.parent=null,r.index=0,r.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(r=>{r.parent=null,r.index=0,r.destroy()}),this.children=[],this._requestDraw(),this}add(...r){if(r.length===0)return this;if(r.length>1){for(let o=0;o<r.length;o++)this.add(r[o]);return this}const s=r[0];return s.getParent()?(s.moveTo(this),this):(this._validateAdd(s),s.index=this.getChildren().length,s.parent=this,s._clearCaches(),this.getChildren().push(s),this._fire("add",{child:s}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(r){return this._generalFind(r,!1)}findOne(r){const s=this._generalFind(r,!0);return s.length>0?s[0]:void 0}_generalFind(r,s){const o=[];return this._descendants(c=>{const h=c._isMatch(r);return h&&o.push(c),!!(h&&s)}),o}_descendants(r){let s=!1;const o=this.getChildren();for(const c of o){if(s=r(c),s)return!0;if(c.hasChildren()&&(s=c._descendants(r),s))return!0}return!1}toObject(){const r=n.Node.prototype.toObject.call(this);return r.children=[],this.getChildren().forEach(s=>{r.children.push(s.toObject())}),r}isAncestorOf(r){let s=r.getParent();for(;s;){if(s._id===this._id)return!0;s=s.getParent()}return!1}clone(r){const s=n.Node.prototype.clone.call(this,r);return this.getChildren().forEach(function(o){s.add(o.clone())}),s}getAllIntersections(r){const s=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(r)&&s.push(o)}),s}_clearSelfAndDescendantCache(r){var s;super._clearSelfAndDescendantCache(r),!this.isCached()&&((s=this.children)===null||s===void 0||s.forEach(function(o){o._clearSelfAndDescendantCache(r)}))}_setChildrenIndices(){var r;(r=this.children)===null||r===void 0||r.forEach(function(s,o){s.index=o}),this._requestDraw()}drawScene(r,s,o){const c=this.getLayer(),h=r||c&&c.getCanvas(),l=h&&h.getContext(),u=this._getCanvasCache(),p=u&&u.scene,f=h&&h.isCache;if(!this.isVisible()&&!f)return this;if(p){l.save();const g=this.getAbsoluteTransform(s).getMatrix();l.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(l),l.restore()}else this._drawChildren("drawScene",h,s,o);return this}drawHit(r,s){if(!this.shouldDrawHit(s))return this;const o=this.getLayer(),c=r||o&&o.hitCanvas,h=c&&c.getContext(),l=this._getCanvasCache();if(l&&l.hit){h.save();const p=this.getAbsoluteTransform(s).getMatrix();h.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(h),h.restore()}else this._drawChildren("drawHit",c,s);return this}_drawChildren(r,s,o,c){var h;const l=s&&s.getContext(),u=this.clipWidth(),p=this.clipHeight(),f=this.clipFunc(),g=typeof u=="number"&&typeof p=="number"||f,y=o===this;if(g){l.save();const P=this.getAbsoluteTransform(o);let m=P.getMatrix();l.transform(m[0],m[1],m[2],m[3],m[4],m[5]),l.beginPath();let d;if(f)d=f.call(this,l,this);else{const v=this.clipX(),C=this.clipY();l.rect(v||0,C||0,u,p)}l.clip.apply(l,d),m=P.copy().invert().getMatrix(),l.transform(m[0],m[1],m[2],m[3],m[4],m[5])}const S=!y&&this.globalCompositeOperation()!=="source-over"&&r==="drawScene";S&&(l.save(),l._applyGlobalCompositeOperation(this)),(h=this.children)===null||h===void 0||h.forEach(function(P){P[r](s,o,c)}),S&&l.restore(),g&&l.restore()}getClientRect(r={}){var s;const o=r.skipTransform,c=r.relativeTo;let h,l,u,p,f={x:1/0,y:1/0,width:0,height:0};const g=this;(s=this.children)===null||s===void 0||s.forEach(function(P){if(!P.visible())return;const m=P.getClientRect({relativeTo:g,skipShadow:r.skipShadow,skipStroke:r.skipStroke});m.width===0&&m.height===0||(h===void 0?(h=m.x,l=m.y,u=m.x+m.width,p=m.y+m.height):(h=Math.min(h,m.x),l=Math.min(l,m.y),u=Math.max(u,m.x+m.width),p=Math.max(p,m.y+m.height)))});const y=this.find("Shape");let S=!1;for(let P=0;P<y.length;P++)if(y[P]._isVisible(this)){S=!0;break}return S&&h!==void 0?f={x:h,y:l,width:u-h,height:p-l}:f={x:0,y:0,width:0,height:0},o?f:this._transformedRect(f,c)}};return qe.Container=i,t.Factory.addComponentsGetterSetter(i,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(i,"clipX",void 0,(0,e.getNumberValidator)()),t.Factory.addGetterSetter(i,"clipY",void 0,(0,e.getNumberValidator)()),t.Factory.addGetterSetter(i,"clipWidth",void 0,(0,e.getNumberValidator)()),t.Factory.addGetterSetter(i,"clipHeight",void 0,(0,e.getNumberValidator)()),t.Factory.addGetterSetter(i,"clipFunc"),qe}var qi={},Xt={},ds;function us(){if(ds)return Xt;ds=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.getCapturedShape=i,Xt.createEvent=a,Xt.hasPointerCapture=r,Xt.setPointerCapture=s,Xt.releaseCapture=o;const t=tt(),n=new Map,e=t.Konva._global.PointerEvent!==void 0;function i(c){return n.get(c)}function a(c){return{evt:c,pointerId:c.pointerId}}function r(c,h){return n.get(c)===h}function s(c,h){o(c),h.getStage()&&(n.set(c,h),e&&h._fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))}function o(c,h){const l=n.get(c);if(!l)return;const u=l.getStage();u&&u.content,n.delete(c),e&&l._fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}return Xt}var fs;function yl(){return fs||(fs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const n=ct(),e=nt(),i=oi(),a=tt(),r=si(),s=ji(),o=tt(),c=us(),h="Stage",l="string",u="px",p="mouseout",f="mouseleave",g="mouseover",y="mouseenter",S="mousemove",P="mousedown",m="mouseup",d="pointermove",v="pointerdown",C="pointerup",k="pointercancel",L="lostpointercapture",b="pointerout",_="pointerleave",x="pointerover",A="pointerenter",T="contextmenu",N="touchstart",I="touchend",D="touchmove",H="touchcancel",w="wheel",R=5,F=[[y,"_pointerenter"],[P,"_pointerdown"],[S,"_pointermove"],[m,"_pointerup"],[f,"_pointerleave"],[N,"_pointerdown"],[D,"_pointermove"],[I,"_pointerup"],[H,"_pointercancel"],[g,"_pointerover"],[w,"_wheel"],[T,"_contextmenu"],[v,"_pointerdown"],[d,"_pointermove"],[C,"_pointerup"],[k,"_pointercancel"],[_,"_pointerleave"],[L,"_lostpointercapture"]],E={mouse:{[b]:p,[_]:f,[x]:g,[A]:y,[d]:S,[v]:P,[C]:m,[k]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[b]:"touchout",[_]:"touchleave",[x]:"touchover",[A]:"touchenter",[d]:D,[v]:N,[C]:I,[k]:H,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[b]:b,[_]:_,[x]:x,[A]:A,[d]:d,[v]:v,[C]:C,[k]:k,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},O=U=>U.indexOf("pointer")>=0?"pointer":U.indexOf("touch")>=0?"touch":"mouse",V=U=>{const M=O(U);if(M==="pointer")return a.Konva.pointerEventsEnabled&&E.pointer;if(M==="touch")return E.touch;if(M==="mouse")return E.mouse};function G(U={}){return(U.clipFunc||U.clipWidth||U.clipHeight)&&n.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),U}const z="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class $ extends i.Container{constructor(M){super(G(M)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{G(this.attrs)}),this._checkVisibility()}_validateAdd(M){const B=M.getType()==="Layer",j=M.getType()==="FastLayer";B||j||n.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const M=this.visible()?"":"none";this.content.style.display=M}setContainer(M){if(typeof M===l){let B;if(M.charAt(0)==="."){const j=M.slice(1);M=document.getElementsByClassName(j)[0]}else M.charAt(0)!=="#"?B=M:B=M.slice(1),M=document.getElementById(B);if(!M)throw"Can not find container in document with id "+B}return this._setAttr("container",M),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),M.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const M=this.children,B=M.length;for(let j=0;j<B;j++)M[j].clear();return this}clone(M){return M||(M={}),M.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,M)}destroy(){super.destroy();const M=this.content;M&&n.Util._isInDocument(M)&&this.container().removeChild(M);const B=t.stages.indexOf(this);return B>-1&&t.stages.splice(B,1),n.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const M=this._pointerPositions[0]||this._changedPointerPositions[0];return M?{x:M.x,y:M.y}:(n.Util.warn(z),null)}_getPointerById(M){return this._pointerPositions.find(B=>B.id===M)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(M){M=M||{},M.x=M.x||0,M.y=M.y||0,M.width=M.width||this.width(),M.height=M.height||this.height();const B=new r.SceneCanvas({width:M.width,height:M.height,pixelRatio:M.pixelRatio||1}),j=B.getContext()._context,q=this.children;return(M.x||M.y)&&j.translate(-1*M.x,-1*M.y),q.forEach(function(W){if(!W.isVisible())return;const X=W._toKonvaCanvas(M);j.drawImage(X._canvas,M.x,M.y,X.getWidth()/X.getPixelRatio(),X.getHeight()/X.getPixelRatio())}),B}getIntersection(M){if(!M)return null;const B=this.children,j=B.length,q=j-1;for(let W=q;W>=0;W--){const X=B[W].getIntersection(M);if(X)return X}return null}_resizeDOM(){const M=this.width(),B=this.height();this.content&&(this.content.style.width=M+u,this.content.style.height=B+u),this.bufferCanvas.setSize(M,B),this.bufferHitCanvas.setSize(M,B),this.children.forEach(j=>{j.setSize({width:M,height:B}),j.draw()})}add(M,...B){if(arguments.length>1){for(let q=0;q<arguments.length;q++)this.add(arguments[q]);return this}super.add(M);const j=this.children.length;return j>R&&n.Util.warn("The stage has "+j+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),M.setSize({width:this.width(),height:this.height()}),M.draw(),a.Konva.isBrowser&&this.content.appendChild(M.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(M){return c.hasPointerCapture(M,this)}setPointerCapture(M){c.setPointerCapture(M,this)}releaseCapture(M){c.releaseCapture(M,this)}getLayers(){return this.children}_bindContentEvents(){a.Konva.isBrowser&&F.forEach(([M,B])=>{this.content.addEventListener(M,j=>{this[B](j)},{passive:!1})})}_pointerenter(M){this.setPointersPositions(M);const B=V(M.type);B&&this._fire(B.pointerenter,{evt:M,target:this,currentTarget:this})}_pointerover(M){this.setPointersPositions(M);const B=V(M.type);B&&this._fire(B.pointerover,{evt:M,target:this,currentTarget:this})}_getTargetShape(M){let B=this[M+"targetShape"];return B&&!B.getStage()&&(B=null),B}_pointerleave(M){const B=V(M.type),j=O(M.type);if(!B)return;this.setPointersPositions(M);const q=this._getTargetShape(j),W=!(a.Konva.isDragging()||a.Konva.isTransforming())||a.Konva.hitOnDragEnabled;q&&W?(q._fireAndBubble(B.pointerout,{evt:M}),q._fireAndBubble(B.pointerleave,{evt:M}),this._fire(B.pointerleave,{evt:M,target:this,currentTarget:this}),this[j+"targetShape"]=null):W&&(this._fire(B.pointerleave,{evt:M,target:this,currentTarget:this}),this._fire(B.pointerout,{evt:M,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(M){const B=V(M.type),j=O(M.type);if(!B)return;this.setPointersPositions(M);let q=!1;this._changedPointerPositions.forEach(W=>{const X=this.getIntersection(W);if(s.DD.justDragged=!1,a.Konva["_"+j+"ListenClick"]=!0,!X||!X.isListening()){this[j+"ClickStartShape"]=void 0;return}a.Konva.capturePointerEventsEnabled&&X.setPointerCapture(W.id),this[j+"ClickStartShape"]=X,X._fireAndBubble(B.pointerdown,{evt:M,pointerId:W.id}),q=!0;const Q=M.type.indexOf("touch")>=0;X.preventDefault()&&M.cancelable&&Q&&M.preventDefault()}),q||this._fire(B.pointerdown,{evt:M,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(M){const B=V(M.type),j=O(M.type);if(!B||(a.Konva.isDragging()&&s.DD.node.preventDefault()&&M.cancelable&&M.preventDefault(),this.setPointersPositions(M),!(!(a.Konva.isDragging()||a.Konva.isTransforming())||a.Konva.hitOnDragEnabled)))return;const W={};let X=!1;const Q=this._getTargetShape(j);this._changedPointerPositions.forEach(et=>{const Y=c.getCapturedShape(et.id)||this.getIntersection(et),ot=et.id,Z={evt:M,pointerId:ot},lt=Q!==Y;if(lt&&Q&&(Q._fireAndBubble(B.pointerout,{...Z},Y),Q._fireAndBubble(B.pointerleave,{...Z},Y)),Y){if(W[Y._id])return;W[Y._id]=!0}Y&&Y.isListening()?(X=!0,lt&&(Y._fireAndBubble(B.pointerover,{...Z},Q),Y._fireAndBubble(B.pointerenter,{...Z},Q),this[j+"targetShape"]=Y),Y._fireAndBubble(B.pointermove,{...Z})):Q&&(this._fire(B.pointerover,{evt:M,target:this,currentTarget:this,pointerId:ot}),this[j+"targetShape"]=null)}),X||this._fire(B.pointermove,{evt:M,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(M){const B=V(M.type),j=O(M.type);if(!B)return;this.setPointersPositions(M);const q=this[j+"ClickStartShape"],W=this[j+"ClickEndShape"],X={};let Q=!1;this._changedPointerPositions.forEach(et=>{const Y=c.getCapturedShape(et.id)||this.getIntersection(et);if(Y){if(Y.releaseCapture(et.id),X[Y._id])return;X[Y._id]=!0}const ot=et.id,Z={evt:M,pointerId:ot};let lt=!1;a.Konva["_"+j+"InDblClickWindow"]?(lt=!0,clearTimeout(this[j+"DblTimeout"])):s.DD.justDragged||(a.Konva["_"+j+"InDblClickWindow"]=!0,clearTimeout(this[j+"DblTimeout"])),this[j+"DblTimeout"]=setTimeout(function(){a.Konva["_"+j+"InDblClickWindow"]=!1},a.Konva.dblClickWindow),Y&&Y.isListening()?(Q=!0,this[j+"ClickEndShape"]=Y,Y._fireAndBubble(B.pointerup,{...Z}),a.Konva["_"+j+"ListenClick"]&&q&&q===Y&&(Y._fireAndBubble(B.pointerclick,{...Z}),lt&&W&&W===Y&&Y._fireAndBubble(B.pointerdblclick,{...Z}))):(this[j+"ClickEndShape"]=null,a.Konva["_"+j+"ListenClick"]&&this._fire(B.pointerclick,{evt:M,target:this,currentTarget:this,pointerId:ot}),lt&&this._fire(B.pointerdblclick,{evt:M,target:this,currentTarget:this,pointerId:ot}))}),Q||this._fire(B.pointerup,{evt:M,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a.Konva["_"+j+"ListenClick"]=!1,M.cancelable&&j!=="touch"&&j!=="pointer"&&M.preventDefault()}_contextmenu(M){this.setPointersPositions(M);const B=this.getIntersection(this.getPointerPosition());B&&B.isListening()?B._fireAndBubble(T,{evt:M}):this._fire(T,{evt:M,target:this,currentTarget:this})}_wheel(M){this.setPointersPositions(M);const B=this.getIntersection(this.getPointerPosition());B&&B.isListening()?B._fireAndBubble(w,{evt:M}):this._fire(w,{evt:M,target:this,currentTarget:this})}_pointercancel(M){this.setPointersPositions(M);const B=c.getCapturedShape(M.pointerId)||this.getIntersection(this.getPointerPosition());B&&B._fireAndBubble(C,c.createEvent(M)),c.releaseCapture(M.pointerId)}_lostpointercapture(M){c.releaseCapture(M.pointerId)}setPointersPositions(M){const B=this._getContentPosition();let j=null,q=null;M=M||window.event,M.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(M.touches,W=>{this._pointerPositions.push({id:W.identifier,x:(W.clientX-B.left)/B.scaleX,y:(W.clientY-B.top)/B.scaleY})}),Array.prototype.forEach.call(M.changedTouches||M.touches,W=>{this._changedPointerPositions.push({id:W.identifier,x:(W.clientX-B.left)/B.scaleX,y:(W.clientY-B.top)/B.scaleY})})):(j=(M.clientX-B.left)/B.scaleX,q=(M.clientY-B.top)/B.scaleY,this.pointerPos={x:j,y:q},this._pointerPositions=[{x:j,y:q,id:n.Util._getFirstPointerId(M)}],this._changedPointerPositions=[{x:j,y:q,id:n.Util._getFirstPointerId(M)}])}_setPointerPosition(M){n.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(M)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const M=this.content.getBoundingClientRect();return{top:M.top,left:M.left,scaleX:M.width/this.content.clientWidth||1,scaleY:M.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!a.Konva.isBrowser)return;const M=this.container();if(!M)throw"Stage has no container. A container is required.";M.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),M.appendChild(this.content),this._resizeDOM()}cache(){return n.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(M){M.batchDraw()}),this}}t.Stage=$,$.prototype.nodeType=h,(0,o._registerNode)($),e.Factory.addGetterSetter($,"container"),a.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(U=>{U.batchDraw()})})}(qi)),qi}var We={},Wi={},gs;function ut(){return gs||(gs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const n=tt(),e=ct(),i=nt(),a=ht(),r=it(),s=tt(),o=us(),c="hasShadow",h="shadowRGBA",l="patternImage",u="linearGradient",p="radialGradient";let f;function g(){return f||(f=e.Util.createCanvasElement().getContext("2d"),f)}t.shapes={};function y(_){const x=this.attrs.fillRule;x?_.fill(x):_.fill()}function S(_){_.stroke()}function P(_){const x=this.attrs.fillRule;x?_.fill(x):_.fill()}function m(_){_.stroke()}function d(){this._clearCache(c)}function v(){this._clearCache(h)}function C(){this._clearCache(l)}function k(){this._clearCache(u)}function L(){this._clearCache(p)}class b extends a.Node{constructor(x){super(x);let A;for(;A=e.Util.getRandomColor(),!(A&&!(A in t.shapes)););this.colorKey=A,t.shapes[A]=this}getContext(){return e.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return e.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(l,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const A=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(A&&A.setTransform){const T=new e.Transform;T.translate(this.fillPatternX(),this.fillPatternY()),T.rotate(n.Konva.getAngle(this.fillPatternRotation())),T.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),T.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const N=T.getMatrix(),I=typeof DOMMatrix>"u"?{a:N[0],b:N[1],c:N[2],d:N[3],e:N[4],f:N[5]}:new DOMMatrix(N);A.setTransform(I)}return A}}_getLinearGradient(){return this._getCache(u,this.__getLinearGradient)}__getLinearGradient(){const x=this.fillLinearGradientColorStops();if(x){const A=g(),T=this.fillLinearGradientStartPoint(),N=this.fillLinearGradientEndPoint(),I=A.createLinearGradient(T.x,T.y,N.x,N.y);for(let D=0;D<x.length;D+=2)I.addColorStop(x[D],x[D+1]);return I}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){const x=this.fillRadialGradientColorStops();if(x){const A=g(),T=this.fillRadialGradientStartPoint(),N=this.fillRadialGradientEndPoint(),I=A.createRadialGradient(T.x,T.y,this.fillRadialGradientStartRadius(),N.x,N.y,this.fillRadialGradientEndRadius());for(let D=0;D<x.length;D+=2)I.addColorStop(x[D],x[D+1]);return I}}getShadowRGBA(){return this._getCache(h,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const x=e.Util.colorToRGBA(this.shadowColor());if(x)return"rgba("+x.r+","+x.g+","+x.b+","+x.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const x=this.hitStrokeWidth();return x==="auto"?this.hasStroke():this.strokeEnabled()&&!!x}intersects(x){const A=this.getStage();if(!A)return!1;const T=A.bufferHitCanvas;return T.getContext().clear(),this.drawHit(T,void 0,!0),T.context.getImageData(Math.round(x.x),Math.round(x.y),1,1).data[3]>0}destroy(){return a.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(x){var A;if(!((A=this.attrs.perfectDrawEnabled)!==null&&A!==void 0?A:!0))return!1;const N=x||this.hasFill(),I=this.hasStroke(),D=this.getAbsoluteOpacity()!==1;if(N&&I&&D)return!0;const H=this.hasShadow(),w=this.shadowForStrokeEnabled();return!!(N&&I&&H&&w)}setStrokeHitEnabled(x){e.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),x?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const x=this.size();return{x:this._centroid?-x.width/2:0,y:this._centroid?-x.height/2:0,width:x.width,height:x.height}}getClientRect(x={}){let A=!1,T=this.getParent();for(;T;){if(T.isCached()){A=!0;break}T=T.getParent()}const N=x.skipTransform,I=x.relativeTo||A&&this.getStage()||void 0,D=this.getSelfRect(),w=!x.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,R=D.width+w,F=D.height+w,E=!x.skipShadow&&this.hasShadow(),O=E?this.shadowOffsetX():0,V=E?this.shadowOffsetY():0,G=R+Math.abs(O),z=F+Math.abs(V),$=E&&this.shadowBlur()||0,U=G+$*2,M=z+$*2,B={width:U,height:M,x:-(w/2+$)+Math.min(O,0)+D.x,y:-(w/2+$)+Math.min(V,0)+D.y};return N?B:this._transformedRect(B,I)}drawScene(x,A,T){const N=this.getLayer(),I=x||N.getCanvas(),D=I.getContext(),H=this._getCanvasCache(),w=this.getSceneFunc(),R=this.hasShadow();let F;const E=A===this;if(!this.isVisible()&&!E)return this;if(H){D.save();const O=this.getAbsoluteTransform(A).getMatrix();return D.transform(O[0],O[1],O[2],O[3],O[4],O[5]),this._drawCachedSceneCanvas(D),D.restore(),this}if(!w)return this;if(D.save(),this._useBufferCanvas()){F=this.getStage();const O=T||F.bufferCanvas,V=O.getContext();V.clear(),V.save(),V._applyLineJoin(this);const G=this.getAbsoluteTransform(A).getMatrix();V.transform(G[0],G[1],G[2],G[3],G[4],G[5]),w.call(this,V,this),V.restore();const z=O.pixelRatio;R&&D._applyShadow(this),D._applyOpacity(this),D._applyGlobalCompositeOperation(this),D.drawImage(O._canvas,O.x||0,O.y||0,O.width/z,O.height/z)}else{if(D._applyLineJoin(this),!E){const O=this.getAbsoluteTransform(A).getMatrix();D.transform(O[0],O[1],O[2],O[3],O[4],O[5]),D._applyOpacity(this),D._applyGlobalCompositeOperation(this)}R&&D._applyShadow(this),w.call(this,D,this)}return D.restore(),this}drawHit(x,A,T=!1){if(!this.shouldDrawHit(A,T))return this;const N=this.getLayer(),I=x||N.hitCanvas,D=I&&I.getContext(),H=this.hitFunc()||this.sceneFunc(),w=this._getCanvasCache(),R=w&&w.hit;if(this.colorKey||e.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),R){D.save();const E=this.getAbsoluteTransform(A).getMatrix();return D.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedHitCanvas(D),D.restore(),this}if(!H)return this;if(D.save(),D._applyLineJoin(this),!(this===A)){const E=this.getAbsoluteTransform(A).getMatrix();D.transform(E[0],E[1],E[2],E[3],E[4],E[5])}return H.call(this,D,this),D.restore(),this}drawHitFromCache(x=0){const A=this._getCanvasCache(),T=this._getCachedSceneCanvas(),N=A.hit,I=N.getContext(),D=N.getWidth(),H=N.getHeight();I.clear(),I.drawImage(T._canvas,0,0,D,H);try{const w=I.getImageData(0,0,D,H),R=w.data,F=R.length,E=e.Util._hexToRgb(this.colorKey);for(let O=0;O<F;O+=4)R[O+3]>x?(R[O]=E.r,R[O+1]=E.g,R[O+2]=E.b,R[O+3]=255):R[O+3]=0;I.putImageData(w,0,0)}catch(w){e.Util.error("Unable to draw hit graph from cached scene canvas. "+w.message)}return this}hasPointerCapture(x){return o.hasPointerCapture(x,this)}setPointerCapture(x){o.setPointerCapture(x,this)}releaseCapture(x){o.releaseCapture(x,this)}}t.Shape=b,b.prototype._fillFunc=y,b.prototype._strokeFunc=S,b.prototype._fillFuncHit=P,b.prototype._strokeFuncHit=m,b.prototype._centroid=!1,b.prototype.nodeType="Shape",(0,s._registerNode)(b),b.prototype.eventListeners={},b.prototype.on.call(b.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",d),b.prototype.on.call(b.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),b.prototype.on.call(b.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),b.prototype.on.call(b.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",k),b.prototype.on.call(b.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",L),i.Factory.addGetterSetter(b,"stroke",void 0,(0,r.getStringOrGradientValidator)()),i.Factory.addGetterSetter(b,"strokeWidth",2,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(b,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(b,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(b,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),i.Factory.addGetterSetter(b,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),i.Factory.addGetterSetter(b,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),i.Factory.addGetterSetter(b,"lineJoin"),i.Factory.addGetterSetter(b,"lineCap"),i.Factory.addGetterSetter(b,"sceneFunc"),i.Factory.addGetterSetter(b,"hitFunc"),i.Factory.addGetterSetter(b,"dash"),i.Factory.addGetterSetter(b,"dashOffset",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(b,"shadowColor",void 0,(0,r.getStringValidator)()),i.Factory.addGetterSetter(b,"shadowBlur",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(b,"shadowOpacity",1,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(b,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(b,"shadowOffsetX",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(b,"shadowOffsetY",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(b,"fillPatternImage"),i.Factory.addGetterSetter(b,"fill",void 0,(0,r.getStringOrGradientValidator)()),i.Factory.addGetterSetter(b,"fillPatternX",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(b,"fillPatternY",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(b,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(b,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(b,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(b,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(b,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(b,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(b,"fillEnabled",!0),i.Factory.addGetterSetter(b,"strokeEnabled",!0),i.Factory.addGetterSetter(b,"shadowEnabled",!0),i.Factory.addGetterSetter(b,"dashEnabled",!0),i.Factory.addGetterSetter(b,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(b,"fillPriority","color"),i.Factory.addComponentsGetterSetter(b,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(b,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(b,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(b,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(b,"fillPatternScaleX",1,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(b,"fillPatternScaleY",1,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(b,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(b,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(b,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(b,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(b,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(b,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(b,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(b,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(b,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(b,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(b,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(b,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(b,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(b,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(b,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(b,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(b,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(b,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(b,"fillPatternRotation",0),i.Factory.addGetterSetter(b,"fillRule",void 0,(0,r.getStringValidator)()),i.Factory.backCompat(b,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Wi)),Wi}var ps;function ms(){if(ps)return We;ps=1,Object.defineProperty(We,"__esModule",{value:!0}),We.Layer=void 0;const t=ct(),n=oi(),e=ht(),i=nt(),a=si(),r=it(),s=ut(),o=tt(),c="#",h="beforeDraw",l="draw",u=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],p=u.length;let f=class extends n.Container{constructor(y){super(y),this.canvas=new a.SceneCanvas,this.hitCanvas=new a.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const S=this.getStage();return S&&S.content&&(S.content.removeChild(this.getNativeCanvasElement()),y<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[y+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){e.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!e.Node.prototype.moveUp.call(this))return!1;const S=this.getStage();return!S||!S.content?!1:(S.content.removeChild(this.getNativeCanvasElement()),this.index<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[this.index+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(e.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const S=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),S[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(e.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const S=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),S[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return e.Node.prototype.remove.call(this),y&&y.parentNode&&t.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:S}){return this.canvas.setSize(y,S),this.hitCanvas.setSize(y,S),this._setSmoothEnabled(),this}_validateAdd(y){const S=y.getType();S!=="Group"&&S!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),e.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let S=1,P=!1;for(;;){for(let m=0;m<p;m++){const d=u[m],v=this._getIntersection({x:y.x+d.x*S,y:y.y+d.y*S}),C=v.shape;if(C)return C;if(P=!!v.antialiased,!v.antialiased)break}if(P)S+=1;else return null}}_getIntersection(y){const S=this.hitCanvas.pixelRatio,P=this.hitCanvas.context.getImageData(Math.round(y.x*S),Math.round(y.y*S),1,1).data,m=P[3];if(m===255){const d=t.Util._rgbToHex(P[0],P[1],P[2]),v=s.shapes[c+d];return v?{shape:v}:{antialiased:!0}}else if(m>0)return{antialiased:!0};return{}}drawScene(y,S,P){const m=this.getLayer(),d=y||m&&m.getCanvas();return this._fire(h,{node:this}),this.clearBeforeDraw()&&d.getContext().clear(),n.Container.prototype.drawScene.call(this,d,S,P),this._fire(l,{node:this}),this}drawHit(y,S){const P=this.getLayer(),m=y||P&&P.hitCanvas;return P&&P.clearBeforeDraw()&&P.getHitCanvas().getContext().clear(),n.Container.prototype.drawHit.call(this,m,S),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return We.Layer=f,f.prototype.nodeType="Layer",(0,o._registerNode)(f),i.Factory.addGetterSetter(f,"imageSmoothingEnabled",!0),i.Factory.addGetterSetter(f,"clearBeforeDraw",!0),i.Factory.addGetterSetter(f,"hitGraphEnabled",!0,(0,r.getBooleanValidator)()),We}var Ke={},ys;function bl(){if(ys)return Ke;ys=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.FastLayer=void 0;const t=ct(),n=ms(),e=tt();let i=class extends n.Layer{constructor(r){super(r),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Ke.FastLayer=i,i.prototype.nodeType="FastLayer",(0,e._registerNode)(i),Ke}var Ye={},bs;function Ki(){if(bs)return Ye;bs=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.Group=void 0;const t=ct(),n=oi(),e=tt();let i=class extends n.Container{_validateAdd(r){const s=r.getType();s!=="Group"&&s!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return Ye.Group=i,i.prototype.nodeType="Group",(0,e._registerNode)(i),Ye}var Xe={},_s;function Yi(){if(_s)return Xe;_s=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.Animation=void 0;const t=tt(),n=ct(),e=function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}}();let i=class Re{constructor(r,s){this.id=Re.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:e(),frameRate:0},this.func=r,this.setLayers(s)}setLayers(r){let s=[];return r&&(s=Array.isArray(r)?r:[r]),this.layers=s,this}getLayers(){return this.layers}addLayer(r){const s=this.layers,o=s.length;for(let c=0;c<o;c++)if(s[c]._id===r._id)return!1;return this.layers.push(r),!0}isRunning(){const s=Re.animations,o=s.length;for(let c=0;c<o;c++)if(s[c].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=e(),Re._addAnimation(this),this}stop(){return Re._removeAnimation(this),this}_updateFrameObject(r){this.frame.timeDiff=r-this.frame.lastTime,this.frame.lastTime=r,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(r){this.animations.push(r),this._handleAnimation()}static _removeAnimation(r){const s=r.id,o=this.animations,c=o.length;for(let h=0;h<c;h++)if(o[h].id===s){this.animations.splice(h,1);break}}static _runFrames(){const r={},s=this.animations;for(let o=0;o<s.length;o++){const c=s[o],h=c.layers,l=c.func;c._updateFrameObject(e());const u=h.length;let p;if(l?p=l.call(c,c.frame)!==!1:p=!0,!!p)for(let f=0;f<u;f++){const g=h[f];g._id!==void 0&&(r[g._id]=g)}}for(const o in r)r.hasOwnProperty(o)&&r[o].batchDraw()}static _animationLoop(){const r=Re;r.animations.length?(r._runFrames(),n.Util.requestAnimFrame(r._animationLoop)):r.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,n.Util.requestAnimFrame(this._animationLoop))}};return Xe.Animation=i,i.animations=[],i.animIdCounter=0,i.animRunning=!1,Xe}var Xi={},vs;function _l(){return vs||(vs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const n=ct(),e=Yi(),i=ht(),a=tt(),r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},s=1,o=2,c=3,h=["fill","stroke","shadowColor"];let l=0;class u{constructor(g,y,S,P,m,d,v){this.prop=g,this.propFunc=y,this.begin=P,this._pos=P,this.duration=d,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=S,this._change=m-this.begin,this.pause()}fire(g){const y=this[g];y&&y()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===o?this.setTime(g):this.state===c&&this.setTime(this.duration-g)}pause(){this.state=s,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(g){const y=this,S=g.node,P=S._id,m=g.easing||t.Easings.Linear,d=!!g.yoyo;let v,C;typeof g.duration>"u"?v=.3:g.duration===0?v=.001:v=g.duration,this.node=S,this._id=l++;const k=S.getLayer()||(S instanceof a.Konva.Stage?S.getLayers():null);k||n.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new e.Animation(function(){y.tween.onEnterFrame()},k),this.tween=new u(C,function(L){y._tweenFunc(L)},m,0,1,v*1e3,d),this._addListeners(),p.attrs[P]||(p.attrs[P]={}),p.attrs[P][this._id]||(p.attrs[P][this._id]={}),p.tweens[P]||(p.tweens[P]={});for(C in g)r[C]===void 0&&this._addAttr(C,g[C]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,y){const S=this.node,P=S._id;let m,d,v,C,k;const L=p.tweens[P][g];L&&delete p.attrs[P][L][g];let b=S.getAttr(g);if(n.Util._isArray(y))if(m=[],d=Math.max(y.length,b.length),g==="points"&&y.length!==b.length&&(y.length>b.length?(C=b,b=n.Util._prepareArrayForTween(b,y,S.closed())):(v=y,y=n.Util._prepareArrayForTween(y,b,S.closed()))),g.indexOf("fill")===0)for(let _=0;_<d;_++)if(_%2===0)m.push(y[_]-b[_]);else{const x=n.Util.colorToRGBA(b[_]);k=n.Util.colorToRGBA(y[_]),b[_]=x,m.push({r:k.r-x.r,g:k.g-x.g,b:k.b-x.b,a:k.a-x.a})}else for(let _=0;_<d;_++)m.push(y[_]-b[_]);else h.indexOf(g)!==-1?(b=n.Util.colorToRGBA(b),k=n.Util.colorToRGBA(y),m={r:k.r-b.r,g:k.g-b.g,b:k.b-b.b,a:k.a-b.a}):m=y-b;p.attrs[P][this._id][g]={start:b,diff:m,end:y,trueEnd:v,trueStart:C},p.tweens[P][g]=this._id}_tweenFunc(g){const y=this.node,S=p.attrs[y._id][this._id];let P,m,d,v,C,k,L,b;for(P in S){if(m=S[P],d=m.start,v=m.diff,b=m.end,n.Util._isArray(d))if(C=[],L=Math.max(d.length,b.length),P.indexOf("fill")===0)for(k=0;k<L;k++)k%2===0?C.push((d[k]||0)+v[k]*g):C.push("rgba("+Math.round(d[k].r+v[k].r*g)+","+Math.round(d[k].g+v[k].g*g)+","+Math.round(d[k].b+v[k].b*g)+","+(d[k].a+v[k].a*g)+")");else for(k=0;k<L;k++)C.push((d[k]||0)+v[k]*g);else h.indexOf(P)!==-1?C="rgba("+Math.round(d.r+v.r*g)+","+Math.round(d.g+v.g*g)+","+Math.round(d.b+v.b*g)+","+(d.a+v.a*g)+")":C=d+v*g;y.setAttr(P,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueEnd&&g.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueStart&&g.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,y=this._id,S=p.tweens[g];this.pause(),this.anim&&this.anim.stop();for(const P in S)delete p.tweens[g][P];delete p.attrs[g][y],p.tweens[g]&&(Object.keys(p.tweens[g]).length===0&&delete p.tweens[g],Object.keys(p.attrs[g]).length===0&&delete p.attrs[g])}}t.Tween=p,p.attrs={},p.tweens={},i.Node.prototype.to=function(f){const g=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),g&&g()},new p(f).play()},t.Easings={BackEaseIn(f,g,y,S){return y*(f/=S)*f*((1.70158+1)*f-1.70158)+g},BackEaseOut(f,g,y,S){return y*((f=f/S-1)*f*((1.70158+1)*f+1.70158)+1)+g},BackEaseInOut(f,g,y,S){let P=1.70158;return(f/=S/2)<1?y/2*(f*f*(((P*=1.525)+1)*f-P))+g:y/2*((f-=2)*f*(((P*=1.525)+1)*f+P)+2)+g},ElasticEaseIn(f,g,y,S,P,m){let d=0;return f===0?g:(f/=S)===1?g+y:(m||(m=S*.3),!P||P<Math.abs(y)?(P=y,d=m/4):d=m/(2*Math.PI)*Math.asin(y/P),-(P*Math.pow(2,10*(f-=1))*Math.sin((f*S-d)*(2*Math.PI)/m))+g)},ElasticEaseOut(f,g,y,S,P,m){let d=0;return f===0?g:(f/=S)===1?g+y:(m||(m=S*.3),!P||P<Math.abs(y)?(P=y,d=m/4):d=m/(2*Math.PI)*Math.asin(y/P),P*Math.pow(2,-10*f)*Math.sin((f*S-d)*(2*Math.PI)/m)+y+g)},ElasticEaseInOut(f,g,y,S,P,m){let d=0;return f===0?g:(f/=S/2)===2?g+y:(m||(m=S*(.3*1.5)),!P||P<Math.abs(y)?(P=y,d=m/4):d=m/(2*Math.PI)*Math.asin(y/P),f<1?-.5*(P*Math.pow(2,10*(f-=1))*Math.sin((f*S-d)*(2*Math.PI)/m))+g:P*Math.pow(2,-10*(f-=1))*Math.sin((f*S-d)*(2*Math.PI)/m)*.5+y+g)},BounceEaseOut(f,g,y,S){return(f/=S)<1/2.75?y*(7.5625*f*f)+g:f<2/2.75?y*(7.5625*(f-=1.5/2.75)*f+.75)+g:f<2.5/2.75?y*(7.5625*(f-=2.25/2.75)*f+.9375)+g:y*(7.5625*(f-=2.625/2.75)*f+.984375)+g},BounceEaseIn(f,g,y,S){return y-t.Easings.BounceEaseOut(S-f,0,y,S)+g},BounceEaseInOut(f,g,y,S){return f<S/2?t.Easings.BounceEaseIn(f*2,0,y,S)*.5+g:t.Easings.BounceEaseOut(f*2-S,0,y,S)*.5+y*.5+g},EaseIn(f,g,y,S){return y*(f/=S)*f+g},EaseOut(f,g,y,S){return-y*(f/=S)*(f-2)+g},EaseInOut(f,g,y,S){return(f/=S/2)<1?y/2*f*f+g:-y/2*(--f*(f-2)-1)+g},StrongEaseIn(f,g,y,S){return y*(f/=S)*f*f*f*f+g},StrongEaseOut(f,g,y,S){return y*((f=f/S-1)*f*f*f*f+1)+g},StrongEaseInOut(f,g,y,S){return(f/=S/2)<1?y/2*f*f*f*f*f+g:y/2*((f-=2)*f*f*f*f+2)+g},Linear(f,g,y,S){return y*f/S+g}}}(Xi)),Xi}var ws;function vl(){return ws||(ws=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const n=tt(),e=ct(),i=ht(),a=oi(),r=yl(),s=ms(),o=bl(),c=Ki(),h=ji(),l=ut(),u=Yi(),p=_l(),f=rs(),g=si();t.Konva=e.Util._assign(n.Konva,{Util:e.Util,Transform:e.Transform,Node:i.Node,Container:a.Container,Stage:r.Stage,stages:r.stages,Layer:s.Layer,FastLayer:o.FastLayer,Group:c.Group,DD:h.DD,Shape:l.Shape,shapes:l.shapes,Animation:u.Animation,Tween:p.Tween,Easings:p.Easings,Context:f.Context,Canvas:g.Canvas}),t.default=t.Konva}(Ui)),Ui}var Je={},Ss;function wl(){if(Ss)return Je;Ss=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.Arc=void 0;const t=nt(),n=ut(),e=tt(),i=it(),a=tt();let r=class extends n.Shape{_sceneFunc(o){const c=e.Konva.getAngle(this.angle()),h=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,c,h),o.arc(0,0,this.innerRadius(),c,0,!h),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),c=this.outerRadius(),h=this.clockwise(),l=e.Konva.getAngle(h?360-this.angle():this.angle()),u=Math.cos(Math.min(l,Math.PI)),p=1,f=Math.sin(Math.min(Math.max(Math.PI,l),3*Math.PI/2)),g=Math.sin(Math.min(l,Math.PI/2)),y=u*(u>0?o:c),S=p*c,P=f*(f>0?o:c),m=g*(g>0?c:o);return{x:y,y:h?-1*m:P,width:S-y,height:m-P}}};return Je.Arc=r,r.prototype._centroid=!0,r.prototype.className="Arc",r.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,a._registerNode)(r),t.Factory.addGetterSetter(r,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"outerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"angle",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clockwise",!1,(0,i.getBooleanValidator)()),Je}var Qe={},Ze={},Cs;function xs(){if(Cs)return Ze;Cs=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.Line=void 0;const t=nt(),n=tt(),e=ut(),i=it();function a(o,c,h,l,u,p,f){const g=Math.sqrt(Math.pow(h-o,2)+Math.pow(l-c,2)),y=Math.sqrt(Math.pow(u-h,2)+Math.pow(p-l,2)),S=f*g/(g+y),P=f*y/(g+y),m=h-S*(u-o),d=l-S*(p-c),v=h+P*(u-o),C=l+P*(p-c);return[m,d,v,C]}function r(o,c){const h=o.length,l=[];for(let u=2;u<h-2;u+=2){const p=a(o[u-2],o[u-1],o[u],o[u+1],o[u+2],o[u+3],c);isNaN(p[0])||(l.push(p[0]),l.push(p[1]),l.push(o[u]),l.push(o[u+1]),l.push(p[2]),l.push(p[3]))}return l}let s=class extends e.Shape{constructor(c){super(c),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(c){const h=this.points(),l=h.length,u=this.tension(),p=this.closed(),f=this.bezier();if(!l)return;let g=0;if(c.beginPath(),c.moveTo(h[0],h[1]),u!==0&&l>4){const y=this.getTensionPoints(),S=y.length;for(g=p?0:4,p||c.quadraticCurveTo(y[0],y[1],y[2],y[3]);g<S-2;)c.bezierCurveTo(y[g++],y[g++],y[g++],y[g++],y[g++],y[g++]);p||c.quadraticCurveTo(y[S-2],y[S-1],h[l-2],h[l-1])}else if(f)for(g=2;g<l;)c.bezierCurveTo(h[g++],h[g++],h[g++],h[g++],h[g++],h[g++]);else for(g=2;g<l;g+=2)c.lineTo(h[g],h[g+1]);p?(c.closePath(),c.fillStrokeShape(this)):c.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():r(this.points(),this.tension())}_getTensionPointsClosed(){const c=this.points(),h=c.length,l=this.tension(),u=a(c[h-2],c[h-1],c[0],c[1],c[2],c[3],l),p=a(c[h-4],c[h-3],c[h-2],c[h-1],c[0],c[1],l),f=r(c,l);return[u[2],u[3]].concat(f).concat([p[0],p[1],c[h-2],c[h-1],p[2],p[3],u[0],u[1],c[0],c[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let c=this.points();if(c.length<4)return{x:c[0]||0,y:c[1]||0,width:0,height:0};this.tension()!==0?c=[c[0],c[1],...this._getTensionPoints(),c[c.length-2],c[c.length-1]]:c=this.points();let h=c[0],l=c[0],u=c[1],p=c[1],f,g;for(let y=0;y<c.length/2;y++)f=c[y*2],g=c[y*2+1],h=Math.min(h,f),l=Math.max(l,f),u=Math.min(u,g),p=Math.max(p,g);return{x:h,y:u,width:l-h,height:p-u}}};return Ze.Line=s,s.prototype.className="Line",s.prototype._attrsAffectingSize=["points","bezier","tension"],(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"closed",!1),t.Factory.addGetterSetter(s,"bezier",!1),t.Factory.addGetterSetter(s,"tension",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"points",[],(0,i.getNumberArrayValidator)()),Ze}var tn={},Ji={},Ps;function Sl(){return Ps||(Ps=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const n=(s,o,c)=>{let h,l;const p=c/2;h=0;for(let f=0;f<20;f++)l=p*t.tValues[20][f]+p,h+=t.cValues[20][f]*i(s,o,l);return p*h};t.getCubicArcLength=n;const e=(s,o,c)=>{c===void 0&&(c=1);const h=s[0]-2*s[1]+s[2],l=o[0]-2*o[1]+o[2],u=2*s[1]-2*s[0],p=2*o[1]-2*o[0],f=4*(h*h+l*l),g=4*(h*u+l*p),y=u*u+p*p;if(f===0)return c*Math.sqrt(Math.pow(s[2]-s[0],2)+Math.pow(o[2]-o[0],2));const S=g/(2*f),P=y/f,m=c+S,d=P-S*S,v=m*m+d>0?Math.sqrt(m*m+d):0,C=S*S+d>0?Math.sqrt(S*S+d):0,k=S+Math.sqrt(S*S+d)!==0?d*Math.log(Math.abs((m+v)/(S+C))):0;return Math.sqrt(f)/2*(m*v-S*C+k)};t.getQuadraticArcLength=e;function i(s,o,c){const h=a(1,c,s),l=a(1,c,o),u=h*h+l*l;return Math.sqrt(u)}const a=(s,o,c)=>{const h=c.length-1;let l,u;if(h===0)return 0;if(s===0){u=0;for(let p=0;p<=h;p++)u+=t.binomialCoefficients[h][p]*Math.pow(1-o,h-p)*Math.pow(o,p)*c[p];return u}else{l=new Array(h);for(let p=0;p<h;p++)l[p]=h*(c[p+1]-c[p]);return a(s-1,o,l)}},r=(s,o,c)=>{let h=1,l=s/o,u=(s-c(l))/o,p=0;for(;h>.001;){const f=c(l+u),g=Math.abs(s-f)/o;if(g<h)h=g,l+=u;else{const y=c(l-u),S=Math.abs(s-y)/o;S<h?(h=S,l-=u):u/=2}if(p++,p>500)break}return l};t.t2length=r}(Ji)),Ji}var ks;function Qi(){if(ks)return tn;ks=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.Path=void 0;const t=nt(),n=tt(),e=ut(),i=Sl();let a=class xt extends e.Shape{constructor(s){super(s),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=xt.parsePathData(this.data()),this.pathLength=xt.getPathLength(this.dataArray)}_sceneFunc(s){const o=this.dataArray;s.beginPath();let c=!1;for(let h=0;h<o.length;h++){const l=o[h].command,u=o[h].points;switch(l){case"L":s.lineTo(u[0],u[1]);break;case"M":s.moveTo(u[0],u[1]);break;case"C":s.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5]);break;case"Q":s.quadraticCurveTo(u[0],u[1],u[2],u[3]);break;case"A":const p=u[0],f=u[1],g=u[2],y=u[3],S=u[4],P=u[5],m=u[6],d=u[7],v=g>y?g:y,C=g>y?1:g/y,k=g>y?y/g:1;s.translate(p,f),s.rotate(m),s.scale(C,k),s.arc(0,0,v,S,S+P,1-d),s.scale(1/C,1/k),s.rotate(-m),s.translate(-p,-f);break;case"z":c=!0,s.closePath();break}}!c&&!this.hasFill()?s.strokeShape(this):s.fillStrokeShape(this)}getSelfRect(){let s=[];this.dataArray.forEach(function(f){if(f.command==="A"){const g=f.points[4],y=f.points[5],S=f.points[4]+y;let P=Math.PI/180;if(Math.abs(g-S)<P&&(P=Math.abs(g-S)),y<0)for(let m=g-P;m>S;m-=P){const d=xt.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],m,0);s.push(d.x,d.y)}else for(let m=g+P;m<S;m+=P){const d=xt.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],m,0);s.push(d.x,d.y)}}else if(f.command==="C")for(let g=0;g<=1;g+=.01){const y=xt.getPointOnCubicBezier(g,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);s.push(y.x,y.y)}else s=s.concat(f.points)});let o=s[0],c=s[0],h=s[1],l=s[1],u,p;for(let f=0;f<s.length/2;f++)u=s[f*2],p=s[f*2+1],isNaN(u)||(o=Math.min(o,u),c=Math.max(c,u)),isNaN(p)||(h=Math.min(h,p),l=Math.max(l,p));return{x:o,y:h,width:c-o,height:l-h}}getLength(){return this.pathLength}getPointAtLength(s){return xt.getPointAtLengthOfDataArray(s,this.dataArray)}static getLineLength(s,o,c,h){return Math.sqrt((c-s)*(c-s)+(h-o)*(h-o))}static getPathLength(s){let o=0;for(let c=0;c<s.length;++c)o+=s[c].pathLength;return o}static getPointAtLengthOfDataArray(s,o){let c,h=0,l=o.length;if(!l)return null;for(;h<l&&s>o[h].pathLength;)s-=o[h].pathLength,++h;if(h===l)return c=o[h-1].points.slice(-2),{x:c[0],y:c[1]};if(s<.01)return o[h].command==="M"?(c=o[h].points.slice(0,2),{x:c[0],y:c[1]}):{x:o[h].start.x,y:o[h].start.y};const u=o[h],p=u.points;switch(u.command){case"L":return xt.getPointOnLine(s,u.start.x,u.start.y,p[0],p[1]);case"C":return xt.getPointOnCubicBezier((0,i.t2length)(s,xt.getPathLength(o),v=>(0,i.getCubicArcLength)([u.start.x,p[0],p[2],p[4]],[u.start.y,p[1],p[3],p[5]],v)),u.start.x,u.start.y,p[0],p[1],p[2],p[3],p[4],p[5]);case"Q":return xt.getPointOnQuadraticBezier((0,i.t2length)(s,xt.getPathLength(o),v=>(0,i.getQuadraticArcLength)([u.start.x,p[0],p[2]],[u.start.y,p[1],p[3]],v)),u.start.x,u.start.y,p[0],p[1],p[2],p[3]);case"A":const f=p[0],g=p[1],y=p[2],S=p[3],P=p[5],m=p[6];let d=p[4];return d+=P*s/u.pathLength,xt.getPointOnEllipticalArc(f,g,y,S,d,m)}return null}static getPointOnLine(s,o,c,h,l,u,p){u=u??o,p=p??c;const f=this.getLineLength(o,c,h,l);if(f<1e-10)return{x:o,y:c};if(h===o)return{x:u,y:p+(l>c?s:-s)};const g=(l-c)/(h-o),y=Math.sqrt(s*s/(1+g*g))*(h<o?-1:1),S=g*y;if(Math.abs(p-c-g*(u-o))<1e-10)return{x:u+y,y:p+S};const P=((u-o)*(h-o)+(p-c)*(l-c))/(f*f),m=o+P*(h-o),d=c+P*(l-c),v=this.getLineLength(u,p,m,d),C=Math.sqrt(s*s-v*v),k=Math.sqrt(C*C/(1+g*g))*(h<o?-1:1),L=g*k;return{x:m+k,y:d+L}}static getPointOnCubicBezier(s,o,c,h,l,u,p,f,g){function y(C){return C*C*C}function S(C){return 3*C*C*(1-C)}function P(C){return 3*C*(1-C)*(1-C)}function m(C){return(1-C)*(1-C)*(1-C)}const d=f*y(s)+u*S(s)+h*P(s)+o*m(s),v=g*y(s)+p*S(s)+l*P(s)+c*m(s);return{x:d,y:v}}static getPointOnQuadraticBezier(s,o,c,h,l,u,p){function f(m){return m*m}function g(m){return 2*m*(1-m)}function y(m){return(1-m)*(1-m)}const S=u*f(s)+h*g(s)+o*y(s),P=p*f(s)+l*g(s)+c*y(s);return{x:S,y:P}}static getPointOnEllipticalArc(s,o,c,h,l,u){const p=Math.cos(u),f=Math.sin(u),g={x:c*Math.cos(l),y:h*Math.sin(l)};return{x:s+(g.x*p-g.y*f),y:o+(g.x*f+g.y*p)}}static parsePathData(s){if(!s)return[];let o=s;const c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let S=0;S<c.length;S++)o=o.replace(new RegExp(c[S],"g"),"|"+c[S]);const h=o.split("|"),l=[],u=[];let p=0,f=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(let S=1;S<h.length;S++){let P=h[S],m=P.charAt(0);for(P=P.slice(1),u.length=0;y=g.exec(P);)u.push(y[0]);const d=[];for(let v=0,C=u.length;v<C;v++){if(u[v]==="00"){d.push(0,0);continue}const k=parseFloat(u[v]);isNaN(k)?d.push(0):d.push(k)}for(;d.length>0&&!isNaN(d[0]);){let v="",C=[];const k=p,L=f;let b,_,x,A,T,N,I,D,H,w;switch(m){case"l":p+=d.shift(),f+=d.shift(),v="L",C.push(p,f);break;case"L":p=d.shift(),f=d.shift(),C.push(p,f);break;case"m":const R=d.shift(),F=d.shift();if(p+=R,f+=F,v="M",l.length>2&&l[l.length-1].command==="z"){for(let E=l.length-2;E>=0;E--)if(l[E].command==="M"){p=l[E].points[0]+R,f=l[E].points[1]+F;break}}C.push(p,f),m="l";break;case"M":p=d.shift(),f=d.shift(),v="M",C.push(p,f),m="L";break;case"h":p+=d.shift(),v="L",C.push(p,f);break;case"H":p=d.shift(),v="L",C.push(p,f);break;case"v":f+=d.shift(),v="L",C.push(p,f);break;case"V":f=d.shift(),v="L",C.push(p,f);break;case"C":C.push(d.shift(),d.shift(),d.shift(),d.shift()),p=d.shift(),f=d.shift(),C.push(p,f);break;case"c":C.push(p+d.shift(),f+d.shift(),p+d.shift(),f+d.shift()),p+=d.shift(),f+=d.shift(),v="C",C.push(p,f);break;case"S":_=p,x=f,b=l[l.length-1],b.command==="C"&&(_=p+(p-b.points[2]),x=f+(f-b.points[3])),C.push(_,x,d.shift(),d.shift()),p=d.shift(),f=d.shift(),v="C",C.push(p,f);break;case"s":_=p,x=f,b=l[l.length-1],b.command==="C"&&(_=p+(p-b.points[2]),x=f+(f-b.points[3])),C.push(_,x,p+d.shift(),f+d.shift()),p+=d.shift(),f+=d.shift(),v="C",C.push(p,f);break;case"Q":C.push(d.shift(),d.shift()),p=d.shift(),f=d.shift(),C.push(p,f);break;case"q":C.push(p+d.shift(),f+d.shift()),p+=d.shift(),f+=d.shift(),v="Q",C.push(p,f);break;case"T":_=p,x=f,b=l[l.length-1],b.command==="Q"&&(_=p+(p-b.points[0]),x=f+(f-b.points[1])),p=d.shift(),f=d.shift(),v="Q",C.push(_,x,p,f);break;case"t":_=p,x=f,b=l[l.length-1],b.command==="Q"&&(_=p+(p-b.points[0]),x=f+(f-b.points[1])),p+=d.shift(),f+=d.shift(),v="Q",C.push(_,x,p,f);break;case"A":A=d.shift(),T=d.shift(),N=d.shift(),I=d.shift(),D=d.shift(),H=p,w=f,p=d.shift(),f=d.shift(),v="A",C=this.convertEndpointToCenterParameterization(H,w,p,f,I,D,A,T,N);break;case"a":A=d.shift(),T=d.shift(),N=d.shift(),I=d.shift(),D=d.shift(),H=p,w=f,p+=d.shift(),f+=d.shift(),v="A",C=this.convertEndpointToCenterParameterization(H,w,p,f,I,D,A,T,N);break}l.push({command:v||m,points:C,start:{x:k,y:L},pathLength:this.calcLength(k,L,v||m,C)})}(m==="z"||m==="Z")&&l.push({command:"z",points:[],start:void 0,pathLength:0})}return l}static calcLength(s,o,c,h){let l,u,p,f;const g=xt;switch(c){case"L":return g.getLineLength(s,o,h[0],h[1]);case"C":return(0,i.getCubicArcLength)([s,h[0],h[2],h[4]],[o,h[1],h[3],h[5]],1);case"Q":return(0,i.getQuadraticArcLength)([s,h[0],h[2]],[o,h[1],h[3]],1);case"A":l=0;const y=h[4],S=h[5],P=h[4]+S;let m=Math.PI/180;if(Math.abs(y-P)<m&&(m=Math.abs(y-P)),u=g.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],y,0),S<0)for(f=y-m;f>P;f-=m)p=g.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],f,0),l+=g.getLineLength(u.x,u.y,p.x,p.y),u=p;else for(f=y+m;f<P;f+=m)p=g.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],f,0),l+=g.getLineLength(u.x,u.y,p.x,p.y),u=p;return p=g.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],P,0),l+=g.getLineLength(u.x,u.y,p.x,p.y),l}return 0}static convertEndpointToCenterParameterization(s,o,c,h,l,u,p,f,g){const y=g*(Math.PI/180),S=Math.cos(y)*(s-c)/2+Math.sin(y)*(o-h)/2,P=-1*Math.sin(y)*(s-c)/2+Math.cos(y)*(o-h)/2,m=S*S/(p*p)+P*P/(f*f);m>1&&(p*=Math.sqrt(m),f*=Math.sqrt(m));let d=Math.sqrt((p*p*(f*f)-p*p*(P*P)-f*f*(S*S))/(p*p*(P*P)+f*f*(S*S)));l===u&&(d*=-1),isNaN(d)&&(d=0);const v=d*p*P/f,C=d*-f*S/p,k=(s+c)/2+Math.cos(y)*v-Math.sin(y)*C,L=(o+h)/2+Math.sin(y)*v+Math.cos(y)*C,b=function(D){return Math.sqrt(D[0]*D[0]+D[1]*D[1])},_=function(D,H){return(D[0]*H[0]+D[1]*H[1])/(b(D)*b(H))},x=function(D,H){return(D[0]*H[1]<D[1]*H[0]?-1:1)*Math.acos(_(D,H))},A=x([1,0],[(S-v)/p,(P-C)/f]),T=[(S-v)/p,(P-C)/f],N=[(-1*S-v)/p,(-1*P-C)/f];let I=x(T,N);return _(T,N)<=-1&&(I=Math.PI),_(T,N)>=1&&(I=0),u===0&&I>0&&(I=I-2*Math.PI),u===1&&I<0&&(I=I+2*Math.PI),[k,L,p,f,A,I,y,u]}};return tn.Path=a,a.prototype.className="Path",a.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(a),t.Factory.addGetterSetter(a,"data"),tn}var Rs;function Cl(){if(Rs)return Qe;Rs=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.Arrow=void 0;const t=nt(),n=xs(),e=it(),i=tt(),a=Qi();let r=class extends n.Line{_sceneFunc(o){super._sceneFunc(o);const c=Math.PI*2,h=this.points();let l=h;const u=this.tension()!==0&&h.length>4;u&&(l=this.getTensionPoints());const p=this.pointerLength(),f=h.length;let g,y;if(u){const m=[l[l.length-4],l[l.length-3],l[l.length-2],l[l.length-1],h[f-2],h[f-1]],d=a.Path.calcLength(l[l.length-4],l[l.length-3],"C",m),v=a.Path.getPointOnQuadraticBezier(Math.min(1,1-p/d),m[0],m[1],m[2],m[3],m[4],m[5]);g=h[f-2]-v.x,y=h[f-1]-v.y}else g=h[f-2]-h[f-4],y=h[f-1]-h[f-3];const S=(Math.atan2(y,g)+c)%c,P=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(h[f-2],h[f-1]),o.rotate(S),o.moveTo(0,0),o.lineTo(-p,P/2),o.lineTo(-p,-P/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(h[0],h[1]),u?(g=(l[0]+l[2])/2-h[0],y=(l[1]+l[3])/2-h[1]):(g=h[2]-h[0],y=h[3]-h[1]),o.rotate((Math.atan2(-y,-g)+c)%c),o.moveTo(0,0),o.lineTo(-p,P/2),o.lineTo(-p,-P/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const c=this.dashEnabled();c&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),c&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),c=this.pointerWidth()/2;return{x:o.x,y:o.y-c,width:o.width,height:o.height+c*2}}};return Qe.Arrow=r,r.prototype.className="Arrow",(0,i._registerNode)(r),t.Factory.addGetterSetter(r,"pointerLength",10,(0,e.getNumberValidator)()),t.Factory.addGetterSetter(r,"pointerWidth",10,(0,e.getNumberValidator)()),t.Factory.addGetterSetter(r,"pointerAtBeginning",!1),t.Factory.addGetterSetter(r,"pointerAtEnding",!0),Qe}var en={},As;function xl(){if(As)return en;As=1,Object.defineProperty(en,"__esModule",{value:!0}),en.Circle=void 0;const t=nt(),n=ut(),e=it(),i=tt();let a=class extends n.Shape{_sceneFunc(s){s.beginPath(),s.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius()!==s/2&&this.radius(s/2)}setHeight(s){this.radius()!==s/2&&this.radius(s/2)}};return en.Circle=a,a.prototype._centroid=!0,a.prototype.className="Circle",a.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(a),t.Factory.addGetterSetter(a,"radius",0,(0,e.getNumberValidator)()),en}var nn={},Ts;function Pl(){if(Ts)return nn;Ts=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.Ellipse=void 0;const t=nt(),n=ut(),e=it(),i=tt();let a=class extends n.Shape{_sceneFunc(s){const o=this.radiusX(),c=this.radiusY();s.beginPath(),s.save(),o!==c&&s.scale(1,c/o),s.arc(0,0,o,0,Math.PI*2,!1),s.restore(),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(s){this.radiusX(s/2)}setHeight(s){this.radiusY(s/2)}};return nn.Ellipse=a,a.prototype.className="Ellipse",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,i._registerNode)(a),t.Factory.addComponentsGetterSetter(a,"radius",["x","y"]),t.Factory.addGetterSetter(a,"radiusX",0,(0,e.getNumberValidator)()),t.Factory.addGetterSetter(a,"radiusY",0,(0,e.getNumberValidator)()),nn}var rn={},Es;function kl(){if(Es)return rn;Es=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.Image=void 0;const t=ct(),n=nt(),e=ut(),i=tt(),a=it();class r extends e.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",c=>{this._removeImageLoad(c.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),c=this.hasShadow();return o&&c?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const c=this.getWidth(),h=this.getHeight(),l=this.cornerRadius(),u=this.attrs.image;let p;if(u){const f=this.attrs.cropWidth,g=this.attrs.cropHeight;f&&g?p=[u,this.cropX(),this.cropY(),f,g,0,0,c,h]:p=[u,0,0,c,h]}(this.hasFill()||this.hasStroke()||l)&&(o.beginPath(),l?t.Util.drawRoundedRectPath(o,c,h,l):o.rect(0,0,c,h),o.closePath(),o.fillStrokeShape(this)),u&&(l&&o.clip(),o.drawImage.apply(o,p))}_hitFunc(o){const c=this.width(),h=this.height(),l=this.cornerRadius();o.beginPath(),l?t.Util.drawRoundedRectPath(o,c,h,l):o.rect(0,0,c,h),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,c;return(o=this.attrs.width)!==null&&o!==void 0?o:(c=this.image())===null||c===void 0?void 0:c.width}getHeight(){var o,c;return(o=this.attrs.height)!==null&&o!==void 0?o:(c=this.image())===null||c===void 0?void 0:c.height}static fromURL(o,c,h=null){const l=t.Util.createImageElement();l.onload=function(){const u=new r({image:l});c(u)},l.onerror=h,l.crossOrigin="Anonymous",l.src=o}}return rn.Image=r,r.prototype.className="Image",(0,i._registerNode)(r),n.Factory.addGetterSetter(r,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4)),n.Factory.addGetterSetter(r,"image"),n.Factory.addComponentsGetterSetter(r,"crop",["x","y","width","height"]),n.Factory.addGetterSetter(r,"cropX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(r,"cropY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(r,"cropWidth",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(r,"cropHeight",0,(0,a.getNumberValidator)()),rn}var ae={},Ms;function Rl(){if(Ms)return ae;Ms=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.Tag=ae.Label=void 0;const t=nt(),n=ut(),e=Ki(),i=it(),a=tt(),r=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],s="Change.konva",o="none",c="up",h="right",l="down",u="left",p=r.length;let f=class extends e.Group{constructor(S){super(S),this.on("add.konva",function(P){this._addListeners(P.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(S){let P=this,m;const d=function(){P._sync()};for(m=0;m<p;m++)S.on(r[m]+s,d)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let S=this.getText(),P=this.getTag(),m,d,v,C,k,L,b;if(S&&P){switch(m=S.width(),d=S.height(),v=P.pointerDirection(),C=P.pointerWidth(),b=P.pointerHeight(),k=0,L=0,v){case c:k=m/2,L=-1*b;break;case h:k=m+C,L=d/2;break;case l:k=m/2,L=d+b;break;case u:k=-1*C,L=d/2;break}P.setAttrs({x:-1*k,y:-1*L,width:m,height:d}),S.setAttrs({x:-1*k,y:-1*L})}}};ae.Label=f,f.prototype.className="Label",(0,a._registerNode)(f);class g extends n.Shape{_sceneFunc(S){const P=this.width(),m=this.height(),d=this.pointerDirection(),v=this.pointerWidth(),C=this.pointerHeight(),k=this.cornerRadius();let L=0,b=0,_=0,x=0;typeof k=="number"?L=b=_=x=Math.min(k,P/2,m/2):(L=Math.min(k[0]||0,P/2,m/2),b=Math.min(k[1]||0,P/2,m/2),x=Math.min(k[2]||0,P/2,m/2),_=Math.min(k[3]||0,P/2,m/2)),S.beginPath(),S.moveTo(L,0),d===c&&(S.lineTo((P-v)/2,0),S.lineTo(P/2,-1*C),S.lineTo((P+v)/2,0)),S.lineTo(P-b,0),S.arc(P-b,b,b,Math.PI*3/2,0,!1),d===h&&(S.lineTo(P,(m-C)/2),S.lineTo(P+v,m/2),S.lineTo(P,(m+C)/2)),S.lineTo(P,m-x),S.arc(P-x,m-x,x,0,Math.PI/2,!1),d===l&&(S.lineTo((P+v)/2,m),S.lineTo(P/2,m+C),S.lineTo((P-v)/2,m)),S.lineTo(_,m),S.arc(_,m-_,_,Math.PI/2,Math.PI,!1),d===u&&(S.lineTo(0,(m+C)/2),S.lineTo(-1*v,m/2),S.lineTo(0,(m-C)/2)),S.lineTo(0,L),S.arc(L,L,L,Math.PI,Math.PI*3/2,!1),S.closePath(),S.fillStrokeShape(this)}getSelfRect(){let S=0,P=0,m=this.pointerWidth(),d=this.pointerHeight(),v=this.pointerDirection(),C=this.width(),k=this.height();return v===c?(P-=d,k+=d):v===l?k+=d:v===u?(S-=m*1.5,C+=m):v===h&&(C+=m*1.5),{x:S,y:P,width:C,height:k}}}return ae.Tag=g,g.prototype.className="Tag",(0,a._registerNode)(g),t.Factory.addGetterSetter(g,"pointerDirection",o),t.Factory.addGetterSetter(g,"pointerWidth",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(g,"pointerHeight",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(g,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),ae}var sn={},Fs;function Ls(){if(Fs)return sn;Fs=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.Rect=void 0;const t=nt(),n=ut(),e=tt(),i=ct(),a=it();let r=class extends n.Shape{_sceneFunc(o){const c=this.cornerRadius(),h=this.width(),l=this.height();o.beginPath(),c?i.Util.drawRoundedRectPath(o,h,l,c):o.rect(0,0,h,l),o.closePath(),o.fillStrokeShape(this)}};return sn.Rect=r,r.prototype.className="Rect",(0,e._registerNode)(r),t.Factory.addGetterSetter(r,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4)),sn}var on={},Os;function Al(){if(Os)return on;Os=1,Object.defineProperty(on,"__esModule",{value:!0}),on.RegularPolygon=void 0;const t=nt(),n=ut(),e=it(),i=tt();let a=class extends n.Shape{_sceneFunc(s){const o=this._getPoints();s.beginPath(),s.moveTo(o[0].x,o[0].y);for(let c=1;c<o.length;c++)s.lineTo(o[c].x,o[c].y);s.closePath(),s.fillStrokeShape(this)}_getPoints(){const s=this.attrs.sides,o=this.attrs.radius||0,c=[];for(let h=0;h<s;h++)c.push({x:o*Math.sin(h*2*Math.PI/s),y:-1*o*Math.cos(h*2*Math.PI/s)});return c}getSelfRect(){const s=this._getPoints();let o=s[0].x,c=s[0].y,h=s[0].x,l=s[0].y;return s.forEach(u=>{o=Math.min(o,u.x),c=Math.max(c,u.x),h=Math.min(h,u.y),l=Math.max(l,u.y)}),{x:o,y:h,width:c-o,height:l-h}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius(s/2)}setHeight(s){this.radius(s/2)}};return on.RegularPolygon=a,a.prototype.className="RegularPolygon",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(a),t.Factory.addGetterSetter(a,"radius",0,(0,e.getNumberValidator)()),t.Factory.addGetterSetter(a,"sides",0,(0,e.getNumberValidator)()),on}var an={},Ns;function Tl(){if(Ns)return an;Ns=1,Object.defineProperty(an,"__esModule",{value:!0}),an.Ring=void 0;const t=nt(),n=ut(),e=it(),i=tt(),a=Math.PI*2;let r=class extends n.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,a,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),a,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return an.Ring=r,r.prototype.className="Ring",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(r),t.Factory.addGetterSetter(r,"innerRadius",0,(0,e.getNumberValidator)()),t.Factory.addGetterSetter(r,"outerRadius",0,(0,e.getNumberValidator)()),an}var ln={},Ds;function El(){if(Ds)return ln;Ds=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.Sprite=void 0;const t=nt(),n=ut(),e=Yi(),i=it(),a=tt();let r=class extends n.Shape{constructor(o){super(o),this._updated=!0,this.anim=new e.Animation(()=>{const c=this._updated;return this._updated=!1,c}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const c=this.animation(),h=this.frameIndex(),l=h*4,u=this.animations()[c],p=this.frameOffsets(),f=u[l+0],g=u[l+1],y=u[l+2],S=u[l+3],P=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,y,S),o.closePath(),o.fillStrokeShape(this)),P)if(p){const m=p[c],d=h*2;o.drawImage(P,f,g,y,S,m[d+0],m[d+1],y,S)}else o.drawImage(P,f,g,y,S,0,0,y,S)}_hitFunc(o){const c=this.animation(),h=this.frameIndex(),l=h*4,u=this.animations()[c],p=this.frameOffsets(),f=u[l+2],g=u[l+3];if(o.beginPath(),p){const y=p[c],S=h*2;o.rect(y[S+0],y[S+1],f,g)}else o.rect(0,0,f,g);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),c=this.animation(),h=this.animations(),l=h[c],u=l.length/4;o<u-1?this.frameIndex(o+1):this.frameIndex(0)}};return ln.Sprite=r,r.prototype.className="Sprite",(0,a._registerNode)(r),t.Factory.addGetterSetter(r,"animation"),t.Factory.addGetterSetter(r,"animations"),t.Factory.addGetterSetter(r,"frameOffsets"),t.Factory.addGetterSetter(r,"image"),t.Factory.addGetterSetter(r,"frameIndex",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"frameRate",17,(0,i.getNumberValidator)()),t.Factory.backCompat(r,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),ln}var cn={},Gs;function Ml(){if(Gs)return cn;Gs=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.Star=void 0;const t=nt(),n=ut(),e=it(),i=tt();let a=class extends n.Shape{_sceneFunc(s){const o=this.innerRadius(),c=this.outerRadius(),h=this.numPoints();s.beginPath(),s.moveTo(0,0-c);for(let l=1;l<h*2;l++){const u=l%2===0?c:o,p=u*Math.sin(l*Math.PI/h),f=-1*u*Math.cos(l*Math.PI/h);s.lineTo(p,f)}s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(s){this.outerRadius(s/2)}setHeight(s){this.outerRadius(s/2)}};return cn.Star=a,a.prototype.className="Star",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(a),t.Factory.addGetterSetter(a,"numPoints",5,(0,e.getNumberValidator)()),t.Factory.addGetterSetter(a,"innerRadius",0,(0,e.getNumberValidator)()),t.Factory.addGetterSetter(a,"outerRadius",0,(0,e.getNumberValidator)()),cn}var Pe={},Is;function Bs(){if(Is)return Pe;Is=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.Text=void 0,Pe.stringToArray=s;const t=ct(),n=nt(),e=ut(),i=tt(),a=it(),r=tt();function s(V){return[...V].reduce((G,z,$,U)=>{if(new RegExp("\\p{Emoji}","u").test(z)){const M=U[$+1];M&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(M)?(G.push(z+M),U[$+1]=""):G.push(z)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(z+(U[$+1]||""))?G.push(z+U[$+1]):$>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(z)?G[G.length-1]+=z:z&&G.push(z);return G},[])}const o="auto",c="center",h="inherit",l="justify",u="Change.konva",p="2d",f="-",g="left",y="text",S="Text",P="top",m="bottom",d="middle",v="normal",C="px ",k=" ",L="right",b="rtl",_="word",x="char",A="none",T="…",N=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],I=N.length;function D(V){return V.split(",").map(G=>{G=G.trim();const z=G.indexOf(" ")>=0,$=G.indexOf('"')>=0||G.indexOf("'")>=0;return z&&!$&&(G=`"${G}"`),G}).join(", ")}let H;function w(){return H||(H=t.Util.createCanvasElement().getContext(p),H)}function R(V){V.fillText(this._partialText,this._partialTextX,this._partialTextY)}function F(V){V.setAttr("miterLimit",2),V.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function E(V){return V=V||{},!V.fillLinearGradientColorStops&&!V.fillRadialGradientColorStops&&!V.fillPatternImage&&(V.fill=V.fill||"black"),V}let O=class extends e.Shape{constructor(G){super(E(G)),this._partialTextX=0,this._partialTextY=0;for(let z=0;z<I;z++)this.on(N[z]+u,this._setTextData);this._setTextData()}_sceneFunc(G){const z=this.textArr,$=z.length;if(!this.text())return;let U=this.padding(),M=this.fontSize(),B=this.lineHeight()*M,j=this.verticalAlign(),q=this.direction(),W=0,X=this.align(),Q=this.getWidth(),et=this.letterSpacing(),Y=this.fill(),ot=this.textDecoration(),Z=ot.indexOf("underline")!==-1,lt=ot.indexOf("line-through")!==-1,Jt;q=q===h?G.direction:q;let vt=B/2,ce=d;if(i.Konva._fixTextRendering){const at=this.measureSize("M");ce="alphabetic",vt=(at.fontBoundingBoxAscent-at.fontBoundingBoxDescent)/2+B/2}for(q===b&&G.setAttr("direction",q),G.setAttr("font",this._getContextFont()),G.setAttr("textBaseline",ce),G.setAttr("textAlign",g),j===d?W=(this.getHeight()-$*B-U*2)/2:j===m&&(W=this.getHeight()-$*B-U*2),G.translate(U,W+U),Jt=0;Jt<$;Jt++){let at=0,pt=0;const It=z[Jt],he=It.text,wt=It.width,Qt=It.lastInParagraph;if(G.save(),X===L?at+=Q-wt-U*2:X===c&&(at+=(Q-wt-U*2)/2),Z){G.save(),G.beginPath();const Lt=i.Konva._fixTextRendering?Math.round(M/4):Math.round(M/2),Bt=at,St=vt+pt+Lt;G.moveTo(Bt,St);const Ct=X===l&&!Qt?Q-U*2:wt;G.lineTo(Bt+Math.round(Ct),St),G.lineWidth=M/15;const Fn=this._getLinearGradient();G.strokeStyle=Fn||Y,G.stroke(),G.restore()}if(lt){G.save(),G.beginPath();const Lt=i.Konva._fixTextRendering?-Math.round(M/4):0;G.moveTo(at,vt+pt+Lt);const Bt=X===l&&!Qt?Q-U*2:wt;G.lineTo(at+Math.round(Bt),vt+pt+Lt),G.lineWidth=M/15;const St=this._getLinearGradient();G.strokeStyle=St||Y,G.stroke(),G.restore()}if(q!==b&&(et!==0||X===l)){const Lt=he.split(" ").length-1,Bt=s(he);for(let St=0;St<Bt.length;St++){const Ct=Bt[St];Ct===" "&&!Qt&&X===l&&(at+=(Q-U*2-wt)/Lt),this._partialTextX=at,this._partialTextY=vt+pt,this._partialText=Ct,G.fillStrokeShape(this),at+=this.measureSize(Ct).width+et}}else et!==0&&G.setAttr("letterSpacing",`${et}px`),this._partialTextX=at,this._partialTextY=vt+pt,this._partialText=he,G.fillStrokeShape(this);G.restore(),$>1&&(vt+=B)}}_hitFunc(G){const z=this.getWidth(),$=this.getHeight();G.beginPath(),G.rect(0,0,z,$),G.closePath(),G.fillStrokeShape(this)}setText(G){const z=t.Util._isString(G)?G:G==null?"":G+"";return this._setAttr(y,z),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(G){var z,$,U,M,B,j,q,W,X,Q,et;let Y=w(),ot=this.fontSize(),Z;Y.save(),Y.font=this._getContextFont(),Z=Y.measureText(G),Y.restore();const lt=ot/100;return{actualBoundingBoxAscent:(z=Z.actualBoundingBoxAscent)!==null&&z!==void 0?z:71.58203125*lt,actualBoundingBoxDescent:($=Z.actualBoundingBoxDescent)!==null&&$!==void 0?$:0,actualBoundingBoxLeft:(U=Z.actualBoundingBoxLeft)!==null&&U!==void 0?U:-7.421875*lt,actualBoundingBoxRight:(M=Z.actualBoundingBoxRight)!==null&&M!==void 0?M:75.732421875*lt,alphabeticBaseline:(B=Z.alphabeticBaseline)!==null&&B!==void 0?B:0,emHeightAscent:(j=Z.emHeightAscent)!==null&&j!==void 0?j:100*lt,emHeightDescent:(q=Z.emHeightDescent)!==null&&q!==void 0?q:-20*lt,fontBoundingBoxAscent:(W=Z.fontBoundingBoxAscent)!==null&&W!==void 0?W:91*lt,fontBoundingBoxDescent:(X=Z.fontBoundingBoxDescent)!==null&&X!==void 0?X:21*lt,hangingBaseline:(Q=Z.hangingBaseline)!==null&&Q!==void 0?Q:72.80000305175781*lt,ideographicBaseline:(et=Z.ideographicBaseline)!==null&&et!==void 0?et:-21*lt,width:Z.width,height:ot}}_getContextFont(){return this.fontStyle()+k+this.fontVariant()+k+(this.fontSize()+C)+D(this.fontFamily())}_addTextLine(G){this.align()===l&&(G=G.trim());const $=this._getTextWidth(G);return this.textArr.push({text:G,width:$,lastInParagraph:!1})}_getTextWidth(G){const z=this.letterSpacing(),$=G.length;return w().measureText(G).width+z*$}_setTextData(){let G=this.text().split(`
`),z=+this.fontSize(),$=0,U=this.lineHeight()*z,M=this.attrs.width,B=this.attrs.height,j=M!==o&&M!==void 0,q=B!==o&&B!==void 0,W=this.padding(),X=M-W*2,Q=B-W*2,et=0,Y=this.wrap(),ot=Y!==A,Z=Y!==x&&ot,lt=this.ellipsis();this.textArr=[],w().font=this._getContextFont();const Jt=lt?this._getTextWidth(T):0;for(let vt=0,ce=G.length;vt<ce;++vt){let at=G[vt],pt=this._getTextWidth(at);if(j&&pt>X)for(;at.length>0;){let It=0,he=s(at).length,wt="",Qt=0;for(;It<he;){const Lt=It+he>>>1,Bt=s(at),St=Bt.slice(0,Lt+1).join(""),Ct=this._getTextWidth(St);(lt&&q&&et+U>Q?Ct+Jt:Ct)<=X?(It=Lt+1,wt=St,Qt=Ct):he=Lt}if(wt){if(Z){const St=s(at),Ct=s(wt),Fn=St[Ct.length],ho=Fn===k||Fn===f;let li;if(ho&&Qt<=X)li=Ct.length;else{const bc=Ct.lastIndexOf(k),_c=Ct.lastIndexOf(f);li=Math.max(bc,_c)+1}li>0&&(It=li,wt=St.slice(0,It).join(""),Qt=this._getTextWidth(wt))}if(wt=wt.trimRight(),this._addTextLine(wt),$=Math.max($,Qt),et+=U,this._shouldHandleEllipsis(et)){this._tryToAddEllipsisToLastLine();break}if(at=s(at).slice(It).join("").trimLeft(),at.length>0&&(pt=this._getTextWidth(at),pt<=X)){this._addTextLine(at),et+=U,$=Math.max($,pt);break}}else break}else this._addTextLine(at),et+=U,$=Math.max($,pt),this._shouldHandleEllipsis(et)&&vt<ce-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),q&&et+U>Q)break}this.textHeight=z,this.textWidth=$}_shouldHandleEllipsis(G){const z=+this.fontSize(),$=this.lineHeight()*z,U=this.attrs.height,M=U!==o&&U!==void 0,B=this.padding(),j=U-B*2;return!(this.wrap()!==A)||M&&G+$>j}_tryToAddEllipsisToLastLine(){const G=this.attrs.width,z=G!==o&&G!==void 0,$=this.padding(),U=G-$*2,M=this.ellipsis(),B=this.textArr[this.textArr.length-1];!B||!M||(z&&(this._getTextWidth(B.text+T)<U||(B.text=B.text.slice(0,B.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(B.text+T))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const G=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,z=this.hasShadow();return G&&z?!0:super._useBufferCanvas()}};return Pe.Text=O,O.prototype._fillFunc=R,O.prototype._strokeFunc=F,O.prototype.className=S,O.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,r._registerNode)(O),n.Factory.overWriteSetter(O,"width",(0,a.getNumberOrAutoValidator)()),n.Factory.overWriteSetter(O,"height",(0,a.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(O,"direction",h),n.Factory.addGetterSetter(O,"fontFamily","Arial"),n.Factory.addGetterSetter(O,"fontSize",12,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(O,"fontStyle",v),n.Factory.addGetterSetter(O,"fontVariant",v),n.Factory.addGetterSetter(O,"padding",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(O,"align",g),n.Factory.addGetterSetter(O,"verticalAlign",P),n.Factory.addGetterSetter(O,"lineHeight",1,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(O,"wrap",_),n.Factory.addGetterSetter(O,"ellipsis",!1,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(O,"letterSpacing",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(O,"text","",(0,a.getStringValidator)()),n.Factory.addGetterSetter(O,"textDecoration",""),Pe}var hn={},Us;function Fl(){if(Us)return hn;Us=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.TextPath=void 0;const t=ct(),n=nt(),e=ut(),i=Qi(),a=Bs(),r=it(),s=tt(),o="",c="normal";function h(p){p.fillText(this.partialText,0,0)}function l(p){p.strokeText(this.partialText,0,0)}let u=class extends e.Shape{constructor(f){super(f),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return i.Path.getPathLength(this.dataArray)}_getPointAtLength(f){if(!this.attrs.data)return null;const g=this.pathLength;return f-1>g?null:i.Path.getPointAtLengthOfDataArray(f,this.dataArray)}_readDataAttribute(){this.dataArray=i.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(f){f.setAttr("font",this._getContextFont()),f.setAttr("textBaseline",this.textBaseline()),f.setAttr("textAlign","left"),f.save();const g=this.textDecoration(),y=this.fill(),S=this.fontSize(),P=this.glyphInfo;g==="underline"&&f.beginPath();for(let m=0;m<P.length;m++){f.save();const d=P[m].p0;f.translate(d.x,d.y),f.rotate(P[m].rotation),this.partialText=P[m].text,f.fillStrokeShape(this),g==="underline"&&(m===0&&f.moveTo(0,S/2+1),f.lineTo(S,S/2+1)),f.restore()}g==="underline"&&(f.strokeStyle=y,f.lineWidth=S/20,f.stroke()),f.restore()}_hitFunc(f){f.beginPath();const g=this.glyphInfo;if(g.length>=1){const y=g[0].p0;f.moveTo(y.x,y.y)}for(let y=0;y<g.length;y++){const S=g[y].p1;f.lineTo(S.x,S.y)}f.setAttr("lineWidth",this.fontSize()),f.setAttr("strokeStyle",this.colorKey),f.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(f){return a.Text.prototype.setText.call(this,f)}_getContextFont(){return a.Text.prototype._getContextFont.call(this)}_getTextSize(f){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const S=y.measureText(f);return y.restore(),{width:S.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:f,height:g}=this._getTextSize(this.attrs.text);if(this.textWidth=f,this.textHeight=g,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),S=this.align(),P=this.kerningFunc(),m=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let d=0;S==="center"&&(d=Math.max(0,this.pathLength/2-m/2)),S==="right"&&(d=Math.max(0,this.pathLength-m));const v=(0,a.stringToArray)(this.text());let C=d;for(let k=0;k<v.length;k++){const L=this._getPointAtLength(C);if(!L)return;let b=this._getTextSize(v[k]).width+y;if(v[k]===" "&&S==="justify"){const I=this.text().split(" ").length-1;b+=(this.pathLength-m)/I}const _=this._getPointAtLength(C+b);if(!_)return;const x=i.Path.getLineLength(L.x,L.y,_.x,_.y);let A=0;if(P)try{A=P(v[k-1],v[k])*this.fontSize()}catch{A=0}L.x+=A,_.x+=A,this.textWidth+=A;const T=i.Path.getPointOnLine(A+x/2,L.x,L.y,_.x,_.y),N=Math.atan2(_.y-L.y,_.x-L.x);this.glyphInfo.push({transposeX:T.x,transposeY:T.y,text:v[k],rotation:N,p0:L,p1:_}),C+=b}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const f=[];this.glyphInfo.forEach(function(C){f.push(C.p0.x),f.push(C.p0.y),f.push(C.p1.x),f.push(C.p1.y)});let g=f[0]||0,y=f[0]||0,S=f[1]||0,P=f[1]||0,m,d;for(let C=0;C<f.length/2;C++)m=f[C*2],d=f[C*2+1],g=Math.min(g,m),y=Math.max(y,m),S=Math.min(S,d),P=Math.max(P,d);const v=this.fontSize();return{x:g-v/2,y:S-v/2,width:y-g+v,height:P-S+v}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return hn.TextPath=u,u.prototype._fillFunc=h,u.prototype._strokeFunc=l,u.prototype._fillFuncHit=h,u.prototype._strokeFuncHit=l,u.prototype.className="TextPath",u.prototype._attrsAffectingSize=["text","fontSize","data"],(0,s._registerNode)(u),n.Factory.addGetterSetter(u,"data"),n.Factory.addGetterSetter(u,"fontFamily","Arial"),n.Factory.addGetterSetter(u,"fontSize",12,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(u,"fontStyle",c),n.Factory.addGetterSetter(u,"align","left"),n.Factory.addGetterSetter(u,"letterSpacing",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(u,"textBaseline","middle"),n.Factory.addGetterSetter(u,"fontVariant",c),n.Factory.addGetterSetter(u,"text",o),n.Factory.addGetterSetter(u,"textDecoration",""),n.Factory.addGetterSetter(u,"kerningFunc",void 0),hn}var dn={},Vs;function Ll(){if(Vs)return dn;Vs=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.Transformer=void 0;const t=ct(),n=nt(),e=ht(),i=ut(),a=Ls(),r=Ki(),s=tt(),o=it(),c=tt(),h="tr-konva",l=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(b=>b+`.${h}`).join(" "),u="nodesRect",p=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],f={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},g="ontouchstart"in s.Konva._global;function y(b,_,x){if(b==="rotater")return x;_+=t.Util.degToRad(f[b]||0);const A=(t.Util.radToDeg(_)%360+360)%360;return t.Util._inRange(A,315+22.5,360)||t.Util._inRange(A,0,22.5)?"ns-resize":t.Util._inRange(A,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(A,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(A,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(A,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(A,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(A,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(A,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+A),"pointer")}const S=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function P(b){return{x:b.x+b.width/2*Math.cos(b.rotation)+b.height/2*Math.sin(-b.rotation),y:b.y+b.height/2*Math.cos(b.rotation)+b.width/2*Math.sin(b.rotation)}}function m(b,_,x){const A=x.x+(b.x-x.x)*Math.cos(_)-(b.y-x.y)*Math.sin(_),T=x.y+(b.x-x.x)*Math.sin(_)+(b.y-x.y)*Math.cos(_);return{...b,rotation:b.rotation+_,x:A,y:T}}function d(b,_){const x=P(b);return m(b,_,x)}function v(b,_,x){let A=_;for(let T=0;T<b.length;T++){const N=s.Konva.getAngle(b[T]),I=Math.abs(N-_)%(Math.PI*2);Math.min(I,Math.PI*2-I)<x&&(A=N)}return A}let C=0,k=class extends r.Group{constructor(_){super(_),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(l,this.update),this.getNode()&&this.update()}attachTo(_){return this.setNode(_),this}setNode(_){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([_])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return h+this._id}setNodes(_=[]){this._nodes&&this._nodes.length&&this.detach();const x=_.filter(T=>T.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=_=x,_.length===1&&this.useSingleNodeRotation()?this.rotation(_[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(T=>{const N=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(T._attrsAffectingSize.length){const I=T._attrsAffectingSize.map(D=>D+"Change."+this._getEventNamespace()).join(" ");T.on(I,N)}T.on(p.map(I=>I+`.${this._getEventNamespace()}`).join(" "),N),T.on(`absoluteTransformChange.${this._getEventNamespace()}`,N),this._proxyDrag(T)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(_){let x;_.on(`dragstart.${this._getEventNamespace()}`,A=>{x=_.getAbsolutePosition(),!this.isDragging()&&_!==this.findOne(".back")&&this.startDrag(A,!1)}),_.on(`dragmove.${this._getEventNamespace()}`,A=>{if(!x)return;const T=_.getAbsolutePosition(),N=T.x-x.x,I=T.y-x.y;this.nodes().forEach(D=>{if(D===_||D.isDragging())return;const H=D.getAbsolutePosition();D.setAbsolutePosition({x:H.x+N,y:H.y+I}),D.startDrag(A)}),x=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(_=>{_.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(u),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(u,this.__getNodeRect)}__getNodeShape(_,x=this.rotation(),A){const T=_.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),N=_.getAbsoluteScale(A),I=_.getAbsolutePosition(A),D=T.x*N.x-_.offsetX()*N.x,H=T.y*N.y-_.offsetY()*N.y,w=(s.Konva.getAngle(_.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),R={x:I.x+D*Math.cos(w)+H*Math.sin(-w),y:I.y+H*Math.cos(w)+D*Math.sin(w),width:T.width*N.x,height:T.height*N.y,rotation:w};return m(R,-s.Konva.getAngle(x),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const x=[];this.nodes().map(w=>{const R=w.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),F=[{x:R.x,y:R.y},{x:R.x+R.width,y:R.y},{x:R.x+R.width,y:R.y+R.height},{x:R.x,y:R.y+R.height}],E=w.getAbsoluteTransform();F.forEach(function(O){const V=E.point(O);x.push(V)})});const A=new t.Transform;A.rotate(-s.Konva.getAngle(this.rotation()));let T=1/0,N=1/0,I=-1/0,D=-1/0;x.forEach(function(w){const R=A.point(w);T===void 0&&(T=I=R.x,N=D=R.y),T=Math.min(T,R.x),N=Math.min(N,R.y),I=Math.max(I,R.x),D=Math.max(D,R.y)}),A.invert();const H=A.point({x:T,y:N});return{x:H.x,y:H.y,width:I-T,height:D-N,rotation:s.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),S.forEach(_=>{this._createAnchor(_)}),this._createAnchor("rotater")}_createAnchor(_){const x=new a.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:_+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:g?10:"auto"}),A=this;x.on("mousedown touchstart",function(T){A._handleMouseDown(T)}),x.on("dragstart",T=>{x.stopDrag(),T.cancelBubble=!0}),x.on("dragend",T=>{T.cancelBubble=!0}),x.on("mouseenter",()=>{const T=s.Konva.getAngle(this.rotation()),N=this.rotateAnchorCursor(),I=y(_,T,N);x.getStage().content&&(x.getStage().content.style.cursor=I),this._cursorChange=!0}),x.on("mouseout",()=>{x.getStage().content&&(x.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(x)}_createBack(){const _=new i.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(x,A){const T=A.getParent(),N=T.padding();x.beginPath(),x.rect(-N,-N,A.width()+N*2,A.height()+N*2),x.moveTo(A.width()/2,-N),T.rotateEnabled()&&T.rotateLineVisible()&&x.lineTo(A.width()/2,-T.rotateAnchorOffset()*t.Util._sign(A.height())-N),x.fillStrokeShape(A)},hitFunc:(x,A)=>{if(!this.shouldOverdrawWholeArea())return;const T=this.padding();x.beginPath(),x.rect(-T,-T,A.width()+T*2,A.height()+T*2),x.fillStrokeShape(A)}});this.add(_),this._proxyDrag(_),_.on("dragstart",x=>{x.cancelBubble=!0}),_.on("dragmove",x=>{x.cancelBubble=!0}),_.on("dragend",x=>{x.cancelBubble=!0}),this.on("dragmove",x=>{this.update()})}_handleMouseDown(_){if(this._transforming)return;this._movingAnchorName=_.target.name().split(" ")[0];const x=this._getNodeRect(),A=x.width,T=x.height,N=Math.sqrt(Math.pow(A,2)+Math.pow(T,2));this.sin=Math.abs(T/N),this.cos=Math.abs(A/N),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const I=_.target.getAbsolutePosition(),D=_.target.getStage().getPointerPosition();this._anchorDragOffset={x:D.x-I.x,y:D.y-I.y},C++,this._fire("transformstart",{evt:_.evt,target:this.getNode()}),this._nodes.forEach(H=>{H._fire("transformstart",{evt:_.evt,target:H})})}_handleMouseMove(_){let x,A,T;const N=this.findOne("."+this._movingAnchorName),I=N.getStage();I.setPointersPositions(_);const D=I.getPointerPosition();let H={x:D.x-this._anchorDragOffset.x,y:D.y-this._anchorDragOffset.y};const w=N.getAbsolutePosition();this.anchorDragBoundFunc()&&(H=this.anchorDragBoundFunc()(w,H,_)),N.setAbsolutePosition(H);const R=N.getAbsolutePosition();if(w.x===R.x&&w.y===R.y)return;if(this._movingAnchorName==="rotater"){const U=this._getNodeRect();x=N.x()-U.width/2,A=-N.y()+U.height/2;let M=Math.atan2(-A,x)+Math.PI/2;U.height<0&&(M-=Math.PI);const j=s.Konva.getAngle(this.rotation())+M,q=s.Konva.getAngle(this.rotationSnapTolerance()),X=v(this.rotationSnaps(),j,q)-U.rotation,Q=d(U,X);this._fitNodesInto(Q,_);return}const F=this.shiftBehavior();let E;F==="inverted"?E=this.keepRatio()&&!_.shiftKey:F==="none"?E=this.keepRatio():E=this.keepRatio()||_.shiftKey;let O=this.centeredScaling()||_.altKey;if(this._movingAnchorName==="top-left"){if(E){const U=O?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};T=Math.sqrt(Math.pow(U.x-N.x(),2)+Math.pow(U.y-N.y(),2));const M=this.findOne(".top-left").x()>U.x?-1:1,B=this.findOne(".top-left").y()>U.y?-1:1;x=T*this.cos*M,A=T*this.sin*B,this.findOne(".top-left").x(U.x-x),this.findOne(".top-left").y(U.y-A)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(N.y());else if(this._movingAnchorName==="top-right"){if(E){const U=O?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};T=Math.sqrt(Math.pow(N.x()-U.x,2)+Math.pow(U.y-N.y(),2));const M=this.findOne(".top-right").x()<U.x?-1:1,B=this.findOne(".top-right").y()>U.y?-1:1;x=T*this.cos*M,A=T*this.sin*B,this.findOne(".top-right").x(U.x+x),this.findOne(".top-right").y(U.y-A)}var V=N.position();this.findOne(".top-left").y(V.y),this.findOne(".bottom-right").x(V.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(N.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(N.x());else if(this._movingAnchorName==="bottom-left"){if(E){const U=O?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};T=Math.sqrt(Math.pow(U.x-N.x(),2)+Math.pow(N.y()-U.y,2));const M=U.x<N.x()?-1:1,B=N.y()<U.y?-1:1;x=T*this.cos*M,A=T*this.sin*B,N.x(U.x-x),N.y(U.y+A)}V=N.position(),this.findOne(".top-left").x(V.x),this.findOne(".bottom-right").y(V.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(N.y());else if(this._movingAnchorName==="bottom-right"){if(E){const U=O?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};T=Math.sqrt(Math.pow(N.x()-U.x,2)+Math.pow(N.y()-U.y,2));const M=this.findOne(".bottom-right").x()<U.x?-1:1,B=this.findOne(".bottom-right").y()<U.y?-1:1;x=T*this.cos*M,A=T*this.sin*B,this.findOne(".bottom-right").x(U.x+x),this.findOne(".bottom-right").y(U.y+A)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(O=this.centeredScaling()||_.altKey,O){const U=this.findOne(".top-left"),M=this.findOne(".bottom-right"),B=U.x(),j=U.y(),q=this.getWidth()-M.x(),W=this.getHeight()-M.y();M.move({x:-B,y:-j}),U.move({x:q,y:W})}const G=this.findOne(".top-left").getAbsolutePosition();x=G.x,A=G.y;const z=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),$=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x,y:A,width:z,height:$,rotation:s.Konva.getAngle(this.rotation())},_)}_handleMouseUp(_){this._removeEvents(_)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(_){var x;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const A=this.getNode();C--,this._fire("transformend",{evt:_,target:A}),(x=this.getLayer())===null||x===void 0||x.batchDraw(),A&&this._nodes.forEach(T=>{var N;T._fire("transformend",{evt:_,target:T}),(N=T.getLayer())===null||N===void 0||N.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(_,x){const A=this._getNodeRect(),T=1;if(t.Util._inRange(_.width,-this.padding()*2-T,T)){this.update();return}if(t.Util._inRange(_.height,-this.padding()*2-T,T)){this.update();return}const N=new t.Transform;if(N.rotate(s.Konva.getAngle(this.rotation())),this._movingAnchorName&&_.width<0&&this._movingAnchorName.indexOf("left")>=0){const E=N.point({x:-this.padding()*2,y:0});_.x+=E.x,_.y+=E.y,_.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y}else if(this._movingAnchorName&&_.width<0&&this._movingAnchorName.indexOf("right")>=0){const E=N.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,_.width+=this.padding()*2}if(this._movingAnchorName&&_.height<0&&this._movingAnchorName.indexOf("top")>=0){const E=N.point({x:0,y:-this.padding()*2});_.x+=E.x,_.y+=E.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,_.height+=this.padding()*2}else if(this._movingAnchorName&&_.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const E=N.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,_.height+=this.padding()*2}if(this.boundBoxFunc()){const E=this.boundBoxFunc()(A,_);E?_=E:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const I=1e7,D=new t.Transform;D.translate(A.x,A.y),D.rotate(A.rotation),D.scale(A.width/I,A.height/I);const H=new t.Transform,w=_.width/I,R=_.height/I;this.flipEnabled()===!1?(H.translate(_.x,_.y),H.rotate(_.rotation),H.translate(_.width<0?_.width:0,_.height<0?_.height:0),H.scale(Math.abs(w),Math.abs(R))):(H.translate(_.x,_.y),H.rotate(_.rotation),H.scale(w,R));const F=H.multiply(D.invert());this._nodes.forEach(E=>{var O;const V=E.getParent().getAbsoluteTransform(),G=E.getTransform().copy();G.translate(E.offsetX(),E.offsetY());const z=new t.Transform;z.multiply(V.copy().invert()).multiply(F).multiply(V).multiply(G);const $=z.decompose();E.setAttrs($),(O=E.getLayer())===null||O===void 0||O.batchDraw()}),this.rotation(t.Util._getRotation(_.rotation)),this._nodes.forEach(E=>{this._fire("transform",{evt:x,target:E}),E._fire("transform",{evt:x,target:E})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(_,x){this.findOne(_).setAttrs(x)}update(){var _;const x=this._getNodeRect();this.rotation(t.Util._getRotation(x.rotation));const A=x.width,T=x.height,N=this.enabledAnchors(),I=this.resizeEnabled(),D=this.padding(),H=this.anchorSize(),w=this.find("._anchor");w.forEach(F=>{F.setAttrs({width:H,height:H,offsetX:H/2,offsetY:H/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:H/2+D,offsetY:H/2+D,visible:I&&N.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:A/2,y:0,offsetY:H/2+D,visible:I&&N.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:A,y:0,offsetX:H/2-D,offsetY:H/2+D,visible:I&&N.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:T/2,offsetX:H/2+D,visible:I&&N.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:A,y:T/2,offsetX:H/2-D,visible:I&&N.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:T,offsetX:H/2+D,offsetY:H/2-D,visible:I&&N.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:A/2,y:T,offsetY:H/2-D,visible:I&&N.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:A,y:T,offsetX:H/2-D,offsetY:H/2-D,visible:I&&N.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:A/2,y:-this.rotateAnchorOffset()*t.Util._sign(T)-D,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:A,height:T,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const R=this.anchorStyleFunc();R&&w.forEach(F=>{R(F)}),(_=this.getLayer())===null||_===void 0||_.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const _=this.findOne("."+this._movingAnchorName);_&&_.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),r.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return e.Node.prototype.toObject.call(this)}clone(_){return e.Node.prototype.clone.call(this,_)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};dn.Transformer=k,k.isTransforming=()=>C>0;function L(b){return b instanceof Array||t.Util.warn("enabledAnchors value should be an array"),b instanceof Array&&b.forEach(function(_){S.indexOf(_)===-1&&t.Util.warn("Unknown anchor name: "+_+". Available names are: "+S.join(", "))}),b||[]}return k.prototype.className="Transformer",(0,c._registerNode)(k),n.Factory.addGetterSetter(k,"enabledAnchors",S,L),n.Factory.addGetterSetter(k,"flipEnabled",!0,(0,o.getBooleanValidator)()),n.Factory.addGetterSetter(k,"resizeEnabled",!0),n.Factory.addGetterSetter(k,"anchorSize",10,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"rotateEnabled",!0),n.Factory.addGetterSetter(k,"rotateLineVisible",!0),n.Factory.addGetterSetter(k,"rotationSnaps",[]),n.Factory.addGetterSetter(k,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"rotateAnchorCursor","crosshair"),n.Factory.addGetterSetter(k,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"borderEnabled",!0),n.Factory.addGetterSetter(k,"anchorStroke","rgb(0, 161, 255)"),n.Factory.addGetterSetter(k,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"anchorFill","white"),n.Factory.addGetterSetter(k,"anchorCornerRadius",0,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"borderStroke","rgb(0, 161, 255)"),n.Factory.addGetterSetter(k,"borderStrokeWidth",1,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"borderDash"),n.Factory.addGetterSetter(k,"keepRatio",!0),n.Factory.addGetterSetter(k,"shiftBehavior","default"),n.Factory.addGetterSetter(k,"centeredScaling",!1),n.Factory.addGetterSetter(k,"ignoreStroke",!1),n.Factory.addGetterSetter(k,"padding",0,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"nodes"),n.Factory.addGetterSetter(k,"node"),n.Factory.addGetterSetter(k,"boundBoxFunc"),n.Factory.addGetterSetter(k,"anchorDragBoundFunc"),n.Factory.addGetterSetter(k,"anchorStyleFunc"),n.Factory.addGetterSetter(k,"shouldOverdrawWholeArea",!1),n.Factory.addGetterSetter(k,"useSingleNodeRotation",!0),n.Factory.backCompat(k,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),dn}var un={},Hs;function Ol(){if(Hs)return un;Hs=1,Object.defineProperty(un,"__esModule",{value:!0}),un.Wedge=void 0;const t=nt(),n=ut(),e=tt(),i=it(),a=tt();let r=class extends n.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,e.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return un.Wedge=r,r.prototype.className="Wedge",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,a._registerNode)(r),t.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"angle",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clockwise",!1),t.Factory.backCompat(r,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),un}var fn={},zs;function Nl(){if(zs)return fn;zs=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.Blur=void 0;const t=nt(),n=ht(),e=it();function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function s(c,h){const l=c.data,u=c.width,p=c.height;let f,g,y,S,P,m,d,v,C,k,L,b,_,x,A,T,N,I,D,H;const w=h+h+1,R=u-1,F=p-1,E=h+1,O=E*(E+1)/2,V=new i,G=a[h],z=r[h];let $=null,U=V,M=null,B=null;for(let j=1;j<w;j++)U=U.next=new i,j===E&&($=U);U.next=V,y=g=0;for(let j=0;j<p;j++){b=_=x=A=S=P=m=d=0,v=E*(T=l[g]),C=E*(N=l[g+1]),k=E*(I=l[g+2]),L=E*(D=l[g+3]),S+=O*T,P+=O*N,m+=O*I,d+=O*D,U=V;for(let q=0;q<E;q++)U.r=T,U.g=N,U.b=I,U.a=D,U=U.next;for(let q=1;q<E;q++)f=g+((R<q?R:q)<<2),S+=(U.r=T=l[f])*(H=E-q),P+=(U.g=N=l[f+1])*H,m+=(U.b=I=l[f+2])*H,d+=(U.a=D=l[f+3])*H,b+=T,_+=N,x+=I,A+=D,U=U.next;M=V,B=$;for(let q=0;q<u;q++)l[g+3]=D=d*G>>z,D!==0?(D=255/D,l[g]=(S*G>>z)*D,l[g+1]=(P*G>>z)*D,l[g+2]=(m*G>>z)*D):l[g]=l[g+1]=l[g+2]=0,S-=v,P-=C,m-=k,d-=L,v-=M.r,C-=M.g,k-=M.b,L-=M.a,f=y+((f=q+h+1)<R?f:R)<<2,b+=M.r=l[f],_+=M.g=l[f+1],x+=M.b=l[f+2],A+=M.a=l[f+3],S+=b,P+=_,m+=x,d+=A,M=M.next,v+=T=B.r,C+=N=B.g,k+=I=B.b,L+=D=B.a,b-=T,_-=N,x-=I,A-=D,B=B.next,g+=4;y+=u}for(let j=0;j<u;j++){_=x=A=b=P=m=d=S=0,g=j<<2,v=E*(T=l[g]),C=E*(N=l[g+1]),k=E*(I=l[g+2]),L=E*(D=l[g+3]),S+=O*T,P+=O*N,m+=O*I,d+=O*D,U=V;for(let W=0;W<E;W++)U.r=T,U.g=N,U.b=I,U.a=D,U=U.next;let q=u;for(let W=1;W<=h;W++)g=q+j<<2,S+=(U.r=T=l[g])*(H=E-W),P+=(U.g=N=l[g+1])*H,m+=(U.b=I=l[g+2])*H,d+=(U.a=D=l[g+3])*H,b+=T,_+=N,x+=I,A+=D,U=U.next,W<F&&(q+=u);g=j,M=V,B=$;for(let W=0;W<p;W++)f=g<<2,l[f+3]=D=d*G>>z,D>0?(D=255/D,l[f]=(S*G>>z)*D,l[f+1]=(P*G>>z)*D,l[f+2]=(m*G>>z)*D):l[f]=l[f+1]=l[f+2]=0,S-=v,P-=C,m-=k,d-=L,v-=M.r,C-=M.g,k-=M.b,L-=M.a,f=j+((f=W+E)<F?f:F)*u<<2,S+=b+=M.r=l[f],P+=_+=M.g=l[f+1],m+=x+=M.b=l[f+2],d+=A+=M.a=l[f+3],M=M.next,v+=T=B.r,C+=N=B.g,k+=I=B.b,L+=D=B.a,b-=T,_-=N,x-=I,A-=D,B=B.next,g+=u}}const o=function(h){const l=Math.round(this.blurRadius());l>0&&s(h,l)};return fn.Blur=o,t.Factory.addGetterSetter(n.Node,"blurRadius",0,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),fn}var gn={},js;function Dl(){if(js)return gn;js=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.Brighten=void 0;const t=nt(),n=ht(),e=it(),i=function(a){const r=this.brightness()*255,s=a.data,o=s.length;for(let c=0;c<o;c+=4)s[c]+=r,s[c+1]+=r,s[c+2]+=r};return gn.Brighten=i,t.Factory.addGetterSetter(n.Node,"brightness",0,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),gn}var pn={},$s;function Gl(){if($s)return pn;$s=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.Contrast=void 0;const t=nt(),n=ht(),e=it(),i=function(a){const r=Math.pow((this.contrast()+100)/100,2),s=a.data,o=s.length;let c=150,h=150,l=150;for(let u=0;u<o;u+=4)c=s[u],h=s[u+1],l=s[u+2],c/=255,c-=.5,c*=r,c+=.5,c*=255,h/=255,h-=.5,h*=r,h+=.5,h*=255,l/=255,l-=.5,l*=r,l+=.5,l*=255,c=c<0?0:c>255?255:c,h=h<0?0:h>255?255:h,l=l<0?0:l>255?255:l,s[u]=c,s[u+1]=h,s[u+2]=l};return pn.Contrast=i,t.Factory.addGetterSetter(n.Node,"contrast",0,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),pn}var mn={},qs;function Il(){if(qs)return mn;qs=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.Emboss=void 0;const t=nt(),n=ht(),e=ct(),i=it(),a=function(r){const s=this.embossStrength()*10,o=this.embossWhiteLevel()*255,c=this.embossDirection(),h=this.embossBlend(),l=r.data,u=r.width,p=r.height,f=u*4;let g=0,y=0,S=p;switch(c){case"top-left":g=-1,y=-1;break;case"top":g=-1,y=0;break;case"top-right":g=-1,y=1;break;case"right":g=0,y=1;break;case"bottom-right":g=1,y=1;break;case"bottom":g=1,y=0;break;case"bottom-left":g=1,y=-1;break;case"left":g=0,y=-1;break;default:e.Util.error("Unknown emboss direction: "+c)}do{const P=(S-1)*f;let m=g;S+m<1&&(m=0),S+m>p&&(m=0);const d=(S-1+m)*u*4;let v=u;do{const C=P+(v-1)*4;let k=y;v+k<1&&(k=0),v+k>u&&(k=0);const L=d+(v-1+k)*4,b=l[C]-l[L],_=l[C+1]-l[L+1],x=l[C+2]-l[L+2];let A=b;const T=A>0?A:-A,N=_>0?_:-_,I=x>0?x:-x;if(N>T&&(A=_),I>T&&(A=x),A*=s,h){const D=l[C]+A,H=l[C+1]+A,w=l[C+2]+A;l[C]=D>255?255:D<0?0:D,l[C+1]=H>255?255:H<0?0:H,l[C+2]=w>255?255:w<0?0:w}else{let D=o-A;D<0?D=0:D>255&&(D=255),l[C]=l[C+1]=l[C+2]=D}}while(--v)}while(--S)};return mn.Emboss=a,t.Factory.addGetterSetter(n.Node,"embossStrength",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(n.Node,"embossWhiteLevel",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(n.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(n.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),mn}var yn={},Ws;function Bl(){if(Ws)return yn;Ws=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.Enhance=void 0;const t=nt(),n=ht(),e=it();function i(r,s,o,c,h){const l=o-s,u=h-c;if(l===0)return c+u/2;if(u===0)return c;let p=(r-s)/l;return p=u*p+c,p}const a=function(r){const s=r.data,o=s.length;let c=s[0],h=c,l,u=s[1],p=u,f,g=s[2],y=g,S;const P=this.enhance();if(P===0)return;for(let b=0;b<o;b+=4)l=s[b+0],l<c?c=l:l>h&&(h=l),f=s[b+1],f<u?u=f:f>p&&(p=f),S=s[b+2],S<g?g=S:S>y&&(y=S);h===c&&(h=255,c=0),p===u&&(p=255,u=0),y===g&&(y=255,g=0);let m,d,v,C,k,L;if(P>0)m=h+P*(255-h),d=c-P*(c-0),v=p+P*(255-p),C=u-P*(u-0),k=y+P*(255-y),L=g-P*(g-0);else{const b=(h+c)*.5;m=h+P*(h-b),d=c+P*(c-b);const _=(p+u)*.5;v=p+P*(p-_),C=u+P*(u-_);const x=(y+g)*.5;k=y+P*(y-x),L=g+P*(g-x)}for(let b=0;b<o;b+=4)s[b+0]=i(s[b+0],c,h,d,m),s[b+1]=i(s[b+1],u,p,C,v),s[b+2]=i(s[b+2],g,y,L,k)};return yn.Enhance=a,t.Factory.addGetterSetter(n.Node,"enhance",0,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),yn}var bn={},Ks;function Ul(){if(Ks)return bn;Ks=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.Grayscale=void 0;const t=function(n){const e=n.data,i=e.length;for(let a=0;a<i;a+=4){const r=.34*e[a]+.5*e[a+1]+.16*e[a+2];e[a]=r,e[a+1]=r,e[a+2]=r}};return bn.Grayscale=t,bn}var _n={},Ys;function Vl(){if(Ys)return _n;Ys=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.HSL=void 0;const t=nt(),n=ht(),e=it();t.Factory.addGetterSetter(n.Node,"hue",0,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(n.Node,"saturation",0,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(n.Node,"luminance",0,(0,e.getNumberValidator)(),t.Factory.afterSetFilter);const i=function(a){const r=a.data,s=r.length,o=1,c=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,l=this.luminance()*127,u=o*c*Math.cos(h*Math.PI/180),p=o*c*Math.sin(h*Math.PI/180),f=.299*o+.701*u+.167*p,g=.587*o-.587*u+.33*p,y=.114*o-.114*u-.497*p,S=.299*o-.299*u-.328*p,P=.587*o+.413*u+.035*p,m=.114*o-.114*u+.293*p,d=.299*o-.3*u+1.25*p,v=.587*o-.586*u-1.05*p,C=.114*o+.886*u-.2*p;let k,L,b,_;for(let x=0;x<s;x+=4)k=r[x+0],L=r[x+1],b=r[x+2],_=r[x+3],r[x+0]=f*k+g*L+y*b+l,r[x+1]=S*k+P*L+m*b+l,r[x+2]=d*k+v*L+C*b+l,r[x+3]=_};return _n.HSL=i,_n}var vn={},Xs;function Hl(){if(Xs)return vn;Xs=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.HSV=void 0;const t=nt(),n=ht(),e=it(),i=function(a){const r=a.data,s=r.length,o=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,l=o*c*Math.cos(h*Math.PI/180),u=o*c*Math.sin(h*Math.PI/180),p=.299*o+.701*l+.167*u,f=.587*o-.587*l+.33*u,g=.114*o-.114*l-.497*u,y=.299*o-.299*l-.328*u,S=.587*o+.413*l+.035*u,P=.114*o-.114*l+.293*u,m=.299*o-.3*l+1.25*u,d=.587*o-.586*l-1.05*u,v=.114*o+.886*l-.2*u;for(let C=0;C<s;C+=4){const k=r[C+0],L=r[C+1],b=r[C+2],_=r[C+3];r[C+0]=p*k+f*L+g*b,r[C+1]=y*k+S*L+P*b,r[C+2]=m*k+d*L+v*b,r[C+3]=_}};return vn.HSV=i,t.Factory.addGetterSetter(n.Node,"hue",0,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(n.Node,"saturation",0,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(n.Node,"value",0,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),vn}var wn={},Js;function zl(){if(Js)return wn;Js=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.Invert=void 0;const t=function(n){const e=n.data,i=e.length;for(let a=0;a<i;a+=4)e[a]=255-e[a],e[a+1]=255-e[a+1],e[a+2]=255-e[a+2]};return wn.Invert=t,wn}var Sn={},Qs;function jl(){if(Qs)return Sn;Qs=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.Kaleidoscope=void 0;const t=nt(),n=ht(),e=ct(),i=it(),a=function(o,c,h){const l=o.data,u=c.data,p=o.width,f=o.height,g=h.polarCenterX||p/2,y=h.polarCenterY||f/2;let S=Math.sqrt(g*g+y*y),P=p-g,m=f-y;const d=Math.sqrt(P*P+m*m);S=d>S?d:S;const v=f,C=p,k=360/C*Math.PI/180;for(let L=0;L<C;L+=1){const b=Math.sin(L*k),_=Math.cos(L*k);for(let x=0;x<v;x+=1){P=Math.floor(g+S*x/v*_),m=Math.floor(y+S*x/v*b);let A=(m*p+P)*4;const T=l[A+0],N=l[A+1],I=l[A+2],D=l[A+3];A=(L+x*p)*4,u[A+0]=T,u[A+1]=N,u[A+2]=I,u[A+3]=D}}},r=function(o,c,h){const l=o.data,u=c.data,p=o.width,f=o.height,g=h.polarCenterX||p/2,y=h.polarCenterY||f/2;let S=Math.sqrt(g*g+y*y),P=p-g,m=f-y;const d=Math.sqrt(P*P+m*m);S=d>S?d:S;const v=f,C=p,k=0;let L,b;for(P=0;P<p;P+=1)for(m=0;m<f;m+=1){const _=P-g,x=m-y,A=Math.sqrt(_*_+x*x)*v/S;let T=(Math.atan2(x,_)*180/Math.PI+360+k)%360;T=T*C/360,L=Math.floor(T),b=Math.floor(A);let N=(b*p+L)*4;const I=l[N+0],D=l[N+1],H=l[N+2],w=l[N+3];N=(m*p+P)*4,u[N+0]=I,u[N+1]=D,u[N+2]=H,u[N+3]=w}},s=function(o){const c=o.width,h=o.height;let l,u,p,f,g,y,S,P,m,d,v=Math.round(this.kaleidoscopePower());const C=Math.round(this.kaleidoscopeAngle()),k=Math.floor(c*(C%360)/360);if(v<1)return;const L=e.Util.createCanvasElement();L.width=c,L.height=h;const b=L.getContext("2d").getImageData(0,0,c,h);e.Util.releaseCanvas(L),a(o,b,{polarCenterX:c/2,polarCenterY:h/2});let _=c/Math.pow(2,v);for(;_<=8;)_=_*2,v-=1;_=Math.ceil(_);let x=_,A=0,T=x,N=1;for(k+_>c&&(A=x,T=0,N=-1),u=0;u<h;u+=1)for(l=A;l!==T;l+=N)p=Math.round(l+k)%c,m=(c*u+p)*4,g=b.data[m+0],y=b.data[m+1],S=b.data[m+2],P=b.data[m+3],d=(c*u+l)*4,b.data[d+0]=g,b.data[d+1]=y,b.data[d+2]=S,b.data[d+3]=P;for(u=0;u<h;u+=1)for(x=Math.floor(_),f=0;f<v;f+=1){for(l=0;l<x+1;l+=1)m=(c*u+l)*4,g=b.data[m+0],y=b.data[m+1],S=b.data[m+2],P=b.data[m+3],d=(c*u+x*2-l-1)*4,b.data[d+0]=g,b.data[d+1]=y,b.data[d+2]=S,b.data[d+3]=P;x*=2}r(b,o,{})};return Sn.Kaleidoscope=s,t.Factory.addGetterSetter(n.Node,"kaleidoscopePower",2,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(n.Node,"kaleidoscopeAngle",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Sn}var Cn={},Zs;function $l(){if(Zs)return Cn;Zs=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.Mask=void 0;const t=nt(),n=ht(),e=it();function i(p,f,g){let y=(g*p.width+f)*4;const S=[];return S.push(p.data[y++],p.data[y++],p.data[y++],p.data[y++]),S}function a(p,f){return Math.sqrt(Math.pow(p[0]-f[0],2)+Math.pow(p[1]-f[1],2)+Math.pow(p[2]-f[2],2))}function r(p){const f=[0,0,0];for(let g=0;g<p.length;g++)f[0]+=p[g][0],f[1]+=p[g][1],f[2]+=p[g][2];return f[0]/=p.length,f[1]/=p.length,f[2]/=p.length,f}function s(p,f){const g=i(p,0,0),y=i(p,p.width-1,0),S=i(p,0,p.height-1),P=i(p,p.width-1,p.height-1),m=f||10;if(a(g,y)<m&&a(y,P)<m&&a(P,S)<m&&a(S,g)<m){const d=r([y,g,P,S]),v=[];for(let C=0;C<p.width*p.height;C++){const k=a(d,[p.data[C*4],p.data[C*4+1],p.data[C*4+2]]);v[C]=k<m?0:255}return v}}function o(p,f){for(let g=0;g<p.width*p.height;g++)p.data[4*g+3]=f[g]}function c(p,f,g){const y=[1,1,1,1,0,1,1,1,1],S=Math.round(Math.sqrt(y.length)),P=Math.floor(S/2),m=[];for(let d=0;d<g;d++)for(let v=0;v<f;v++){const C=d*f+v;let k=0;for(let L=0;L<S;L++)for(let b=0;b<S;b++){const _=d+L-P,x=v+b-P;if(_>=0&&_<g&&x>=0&&x<f){const A=_*f+x,T=y[L*S+b];k+=p[A]*T}}m[C]=k===255*8?255:0}return m}function h(p,f,g){const y=[1,1,1,1,1,1,1,1,1],S=Math.round(Math.sqrt(y.length)),P=Math.floor(S/2),m=[];for(let d=0;d<g;d++)for(let v=0;v<f;v++){const C=d*f+v;let k=0;for(let L=0;L<S;L++)for(let b=0;b<S;b++){const _=d+L-P,x=v+b-P;if(_>=0&&_<g&&x>=0&&x<f){const A=_*f+x,T=y[L*S+b];k+=p[A]*T}}m[C]=k>=255*4?255:0}return m}function l(p,f,g){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],S=Math.round(Math.sqrt(y.length)),P=Math.floor(S/2),m=[];for(let d=0;d<g;d++)for(let v=0;v<f;v++){const C=d*f+v;let k=0;for(let L=0;L<S;L++)for(let b=0;b<S;b++){const _=d+L-P,x=v+b-P;if(_>=0&&_<g&&x>=0&&x<f){const A=_*f+x,T=y[L*S+b];k+=p[A]*T}}m[C]=k}return m}const u=function(p){const f=this.threshold();let g=s(p,f);return g&&(g=c(g,p.width,p.height),g=h(g,p.width,p.height),g=l(g,p.width,p.height),o(p,g)),p};return Cn.Mask=u,t.Factory.addGetterSetter(n.Node,"threshold",0,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),Cn}var xn={},to;function ql(){if(to)return xn;to=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.Noise=void 0;const t=nt(),n=ht(),e=it(),i=function(a){const r=this.noise()*255,s=a.data,o=s.length,c=r/2;for(let h=0;h<o;h+=4)s[h+0]+=c-2*c*Math.random(),s[h+1]+=c-2*c*Math.random(),s[h+2]+=c-2*c*Math.random()};return xn.Noise=i,t.Factory.addGetterSetter(n.Node,"noise",.2,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),xn}var Pn={},eo;function Wl(){if(eo)return Pn;eo=1,Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.Pixelate=void 0;const t=nt(),n=ct(),e=ht(),i=it(),a=function(r){let s=Math.ceil(this.pixelSize()),o=r.width,c=r.height,h=Math.ceil(o/s),l=Math.ceil(c/s),u=r.data;if(s<=0){n.Util.error("pixelSize value can not be <= 0");return}for(let p=0;p<h;p+=1)for(let f=0;f<l;f+=1){let g=0,y=0,S=0,P=0;const m=p*s,d=m+s,v=f*s,C=v+s;let k=0;for(let L=m;L<d;L+=1)if(!(L>=o))for(let b=v;b<C;b+=1){if(b>=c)continue;const _=(o*b+L)*4;g+=u[_+0],y+=u[_+1],S+=u[_+2],P+=u[_+3],k+=1}g=g/k,y=y/k,S=S/k,P=P/k;for(let L=m;L<d;L+=1)if(!(L>=o))for(let b=v;b<C;b+=1){if(b>=c)continue;const _=(o*b+L)*4;u[_+0]=g,u[_+1]=y,u[_+2]=S,u[_+3]=P}}};return Pn.Pixelate=a,t.Factory.addGetterSetter(e.Node,"pixelSize",8,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Pn}var kn={},no;function Kl(){if(no)return kn;no=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.Posterize=void 0;const t=nt(),n=ht(),e=it(),i=function(a){const r=Math.round(this.levels()*254)+1,s=a.data,o=s.length,c=255/r;for(let h=0;h<o;h+=1)s[h]=Math.floor(s[h]/c)*c};return kn.Posterize=i,t.Factory.addGetterSetter(n.Node,"levels",.5,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),kn}var Rn={},io;function Yl(){if(io)return Rn;io=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.RGB=void 0;const t=nt(),n=ht(),e=it(),i=function(a){const r=a.data,s=r.length,o=this.red(),c=this.green(),h=this.blue();for(let l=0;l<s;l+=4){const u=(.34*r[l]+.5*r[l+1]+.16*r[l+2])/255;r[l]=u*o,r[l+1]=u*c,r[l+2]=u*h,r[l+3]=r[l+3]}};return Rn.RGB=i,t.Factory.addGetterSetter(n.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),t.Factory.addGetterSetter(n.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),t.Factory.addGetterSetter(n.Node,"blue",0,e.RGBComponent,t.Factory.afterSetFilter),Rn}var An={},ro;function Xl(){if(ro)return An;ro=1,Object.defineProperty(An,"__esModule",{value:!0}),An.RGBA=void 0;const t=nt(),n=ht(),e=it(),i=function(a){const r=a.data,s=r.length,o=this.red(),c=this.green(),h=this.blue(),l=this.alpha();for(let u=0;u<s;u+=4){const p=1-l;r[u]=o*l+r[u]*p,r[u+1]=c*l+r[u+1]*p,r[u+2]=h*l+r[u+2]*p}};return An.RGBA=i,t.Factory.addGetterSetter(n.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),t.Factory.addGetterSetter(n.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),t.Factory.addGetterSetter(n.Node,"blue",0,e.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(n.Node,"alpha",1,function(a){return this._filterUpToDate=!1,a>1?1:a<0?0:a}),An}var Tn={},so;function Jl(){if(so)return Tn;so=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.Sepia=void 0;const t=function(n){const e=n.data,i=e.length;for(let a=0;a<i;a+=4){const r=e[a+0],s=e[a+1],o=e[a+2];e[a+0]=Math.min(255,r*.393+s*.769+o*.189),e[a+1]=Math.min(255,r*.349+s*.686+o*.168),e[a+2]=Math.min(255,r*.272+s*.534+o*.131)}};return Tn.Sepia=t,Tn}var En={},oo;function Ql(){if(oo)return En;oo=1,Object.defineProperty(En,"__esModule",{value:!0}),En.Solarize=void 0;const t=function(n){const e=n.data,i=n.width,a=n.height,r=i*4;let s=a;do{const o=(s-1)*r;let c=i;do{const h=o+(c-1)*4;let l=e[h],u=e[h+1],p=e[h+2];l>127&&(l=255-l),u>127&&(u=255-u),p>127&&(p=255-p),e[h]=l,e[h+1]=u,e[h+2]=p}while(--c)}while(--s)};return En.Solarize=t,En}var Mn={},ao;function Zl(){if(ao)return Mn;ao=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Threshold=void 0;const t=nt(),n=ht(),e=it(),i=function(a){const r=this.threshold()*255,s=a.data,o=s.length;for(let c=0;c<o;c+=1)s[c]=s[c]<r?0:255};return Mn.Threshold=i,t.Factory.addGetterSetter(n.Node,"threshold",.5,(0,e.getNumberValidator)(),t.Factory.afterSetFilter),Mn}var lo;function tc(){if(lo)return je;lo=1,Object.defineProperty(je,"__esModule",{value:!0}),je.Konva=void 0;const t=vl(),n=wl(),e=Cl(),i=xl(),a=Pl(),r=kl(),s=Rl(),o=xs(),c=Qi(),h=Ls(),l=Al(),u=Tl(),p=El(),f=Ml(),g=Bs(),y=Fl(),S=Ll(),P=Ol(),m=Nl(),d=Dl(),v=Gl(),C=Il(),k=Bl(),L=Ul(),b=Vl(),_=Hl(),x=zl(),A=jl(),T=$l(),N=ql(),I=Wl(),D=Kl(),H=Yl(),w=Xl(),R=Jl(),F=Ql(),E=Zl();return je.Konva=t.Konva.Util._assign(t.Konva,{Arc:n.Arc,Arrow:e.Arrow,Circle:i.Circle,Ellipse:a.Ellipse,Image:r.Image,Label:s.Label,Tag:s.Tag,Line:o.Line,Path:c.Path,Rect:h.Rect,RegularPolygon:l.RegularPolygon,Ring:u.Ring,Sprite:p.Sprite,Star:f.Star,Text:g.Text,TextPath:y.TextPath,Transformer:S.Transformer,Wedge:P.Wedge,Filters:{Blur:m.Blur,Brighten:d.Brighten,Contrast:v.Contrast,Emboss:C.Emboss,Enhance:k.Enhance,Grayscale:L.Grayscale,HSL:b.HSL,HSV:_.HSV,Invert:x.Invert,Kaleidoscope:A.Kaleidoscope,Mask:T.Mask,Noise:N.Noise,Pixelate:I.Pixelate,Posterize:D.Posterize,RGB:H.RGB,RGBA:w.RGBA,Sepia:R.Sepia,Solarize:F.Solarize,Threshold:E.Threshold}}),je}var ec=ri.exports,co;function nc(){if(co)return ri.exports;co=1,Object.defineProperty(ec,"__esModule",{value:!0});const t=tc();return ri.exports=t.Konva,ri.exports}var ic=nc();const ke=Ka(ic);var rc=Nt("<svg stroke-width=0>");function ai(t,n){const e=pe(t.a,n),[i,a]=gr(e,["src"]),[r,s]=kt(""),o=dt(()=>n.title?`${t.c}<title>${n.title}</title>`:t.c);return Zt(()=>s(o())),de(()=>{s("")}),(()=>{var c=rc();return br(c,pe({get stroke(){var h;return(h=t.a)==null?void 0:h.stroke},get color(){return n.color||"currentColor"},get fill(){return n.color||"currentColor"},get style(){return{...n.style,overflow:"visible"}}},a,{get height(){return n.size||"1em"},get width(){return n.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return r()}}),!0,!0),Rt(c,()=>Jo),c})()}function sc(t){return ai({a:{viewBox:"0 0 512 512"},c:'<path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v242.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64v-32c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/>'},t)}function oc(t){return ai({a:{viewBox:"0 0 320 512"},c:'<path d="M16 144a144 144 0 1 1 288 0 144 144 0 1 1-288 0zm144-64c8.8 0 16-7.2 16-16s-7.2-16-16-16c-53 0-96 43-96 96 0 8.8 7.2 16 16 16s16-7.2 16-16c0-35.3 28.7-64 64-64zm-32 400V317.1a177.984 177.984 0 0 0 64 0V480c0 17.7-14.3 32-32 32s-32-14.3-32-32z"/>'},t)}function ac(t){return ai({a:{viewBox:"0 0 448 512"},c:'<path d="M135.2 17.7 128 32H32C14.3 32 0 46.3 0 64s14.3 32 32 32h384c17.7 0 32-14.3 32-32s-14.3-32-32-32h-96l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32l21.2 339c1.6 25.3 22.6 45 47.9 45h245.8c25.3 0 46.3-19.7 47.9-45L416 128z"/>'},t)}function lc(t){return ai({a:{viewBox:"0 0 512 512"},c:'<path d="M288 109.3V352c0 17.7-14.3 32-32 32s-32-14.3-32-32V109.3l-73.4 73.4c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L288 109.3zM64 352h128c0 35.3 28.7 64 64 64s64-28.7 64-64h128c35.3 0 64 28.7 64 64v32c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64v-32c0-35.3 28.7-64 64-64zm368 104a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"/>'},t)}var cc=Nt('<section class="w-full h-full bg-base-100 max-w-64 flex flex-col items-center p-4 gap-4 rounded-lg shadow-xl"><h2 class="text-xl font-bold">Drawing Tools</h2><div class="flex flex-col gap-2 w-full"><button> Pin Tool</button><button>Disable Tool</button></div><div class=divider>Color</div><label class="form-control w-full"><div class=label><span class=label-text>Pin Color</span></div><input type=color class="input input-bordered w-full h-10">'),hc=Nt('<section class="flex-1 h-full max-w-[calc(100svw-560px)] shadow-2xl overflow-hidden relative rounded-lg"><div class="absolute inset-0 w-full h-full cursor-grab">'),dc=Nt('<section class="w-full h-full bg-base-100 max-w-64 flex flex-col items-center p-4 gap-4 rounded-lg shadow-xl"><h2 class="text-xl font-bold">Image Tools</h2><button class="btn btn-primary w-full"> Upload Image</button><div class=divider>Canvas Actions</div><button class="btn btn-warning w-full"> Clear All</button><button class="btn btn-success w-full"> Export Image (PNG)'),uc=Nt('<main class="h-svh w-svw relative bg-base-300 p-2 sm:p-4 md:p-8 flex items-center justify-center overflow-hidden gap-2">');const[Gt,le]=Br({activeTool:"none",pinColor:"#FF0000",backgroundImage:null,pins:[]});function fc(){return(()=>{var t=cc(),n=t.firstChild,e=n.nextSibling,i=e.firstChild,a=i.firstChild,r=i.nextSibling,s=e.nextSibling,o=s.nextSibling,c=o.firstChild,h=c.nextSibling;return i.$$click=()=>le(oe(l=>{l.activeTool="pin"})),Rt(i,K(oc,{class:"w-5 h-5"}),a),r.$$click=()=>le(oe(l=>{l.activeTool="none"})),h.$$input=l=>le(oe(u=>{u.pinColor=l.currentTarget.value})),mt(l=>{var u=ts("btn btn-info w-full",Gt.activeTool==="pin"&&"btn-active"),p=ts("btn btn-error w-full",Gt.activeTool==="none"&&"btn-active");return u!==l.e&&_i(i,l.e=u),p!==l.t&&_i(r,l.t=p),l},{e:void 0,t:void 0}),mt(()=>h.value=Gt.pinColor),t})()}function gc(){let t,n,e,i,a;const r=new Image;r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAOUlEQVQ4y2NgoBAwMjAwMDAwMDAw/g9lYGBggH/+/gdjMzMzGBmYmZmRloEBAQYGYmRkZGBgoGNgYAAAE0rWw5k8M7IAAAAASUVORK5CYII=",ar(()=>{if(!n||!t)return;e=new ke.Stage({container:n,width:t.clientWidth,height:t.clientHeight}),i=new ke.Layer,e.add(i),a=new ke.Image({x:0,y:0,image:r,width:r.width,height:r.height,listening:!1}),i.add(a),s(r),e.on("wheel",l=>{l.evt.preventDefault();const u=1.1,p=i.scaleX(),f=e.getPointerPosition();if(!f)return;const g={x:(f.x-i.x())/p,y:(f.y-i.y())/p},y=l.evt.deltaY<0?p*u:p/u;i.scale({x:y,y});const S={x:f.x-g.x*y,y:f.y-g.y*y};i.position(S),i.batchDraw()}),e.on("mousedown",l=>{if(Gt.activeTool==="pin"){const u=i.getRelativePointerPosition();u&&o(u.x,u.y,Gt.pinColor)}else i==null||i.draggable(!0)}),e.on("mouseup",()=>{i==null||i.draggable(!1)});const h=new ResizeObserver(()=>{e&&t&&(e.width(t.clientWidth),e.height(t.clientHeight),s(Gt.backgroundImage||r))});h.observe(t),de(()=>{e==null||e.destroy(),h.disconnect()})}),Zt(()=>{const h=Gt.backgroundImage;a&&(h?(a.image(h),a.width(h.naturalWidth),a.height(h.naturalHeight),s(h)):(a.image(r),a.width(r.width),a.height(r.height),s(r)),i==null||i.batchDraw())}),Zt(()=>{if(!i)return;const h=new Set(Gt.pins.map(l=>l.id));i.find(".pin").forEach(l=>{h.has(l.id())||l.destroy()}),Gt.pins.forEach(l=>{if(!i.findOne(`#${l.id}`)){const u=new ke.Circle({x:l.x,y:l.y,radius:8,fill:l.color,stroke:"black",strokeWidth:1,id:l.id,name:"pin"}),p=new ke.Text({x:l.x,y:l.y,text:l.id.split("-")[1],fontSize:10,fill:"white",align:"center",verticalAlign:"middle"});p.offsetX(p.width()/2),p.offsetY(p.height()/2),u.on("dblclick",()=>{c(l.id)}),i.add(u,p)}}),i.batchDraw()});const s=h=>{if(!e||!i)return;const l=e.width(),u=e.height(),p=h.naturalWidth/h.naturalHeight,f=l/u;let g=1,y=0,S=0;p>f?(g=l/h.naturalWidth,S=(u-h.naturalHeight*g)/2):(g=u/h.naturalHeight,y=(l-h.naturalWidth*g)/2),g=Math.min(g,1),i.scale({x:g,y:g}),i.position({x:y,y:S}),i.batchDraw()},o=(h,l,u)=>{const p={id:`pin-${Gt.pins.length+1}`,x:h,y:l,color:u};le(oe(f=>{f.pins.push(p)}))},c=h=>{le(oe(l=>{l.pins=l.pins.filter(u=>u.id!==h)}))};return(()=>{var h=hc(),l=h.firstChild,u=t;typeof u=="function"?vi(u,h):t=h;var p=n;return typeof p=="function"?vi(p,l):n=l,h})()}function pc(){const t=()=>{const i=document.createElement("input");i.type="file",i.accept="image/*",i.onchange=a=>{const r=a.target;if(r.files&&r.files.length>0){const s=r.files[0];if(s.type.startsWith("image/")){const o=URL.createObjectURL(s),c=new Image;c.onload=()=>{le(oe(h=>{h.backgroundImage=c}))},c.src=o}}},i.click()},n=()=>{le(oe(i=>{i.backgroundImage=null,i.pins=[]}))},e=()=>{const i=ke.stages[0];if(!i)return;const a=i.toDataURL({mimeType:"image/png",quality:1}),r=document.createElement("a");r.href=a,r.download="edited_map.png",document.body.appendChild(r),r.click(),document.body.removeChild(r)};return(()=>{var i=dc(),a=i.firstChild,r=a.nextSibling,s=r.firstChild,o=r.nextSibling,c=o.nextSibling,h=c.firstChild,l=c.nextSibling,u=l.firstChild;return r.$$click=t,Rt(r,K(lc,{class:"w-5 h-5"}),s),c.$$click=n,Rt(c,K(ac,{class:"w-5 h-5"}),h),l.$$click=e,Rt(l,K(sc,{class:"w-5 h-5"}),u),i})()}const mc=function(){return(()=>{var n=uc();return Rt(n,K(fc,{}),null),Rt(n,K(gc,{}),null),Rt(n,K(pc,{}),null),n})()};yi(["click","input"]);const yc=Object.freeze(Object.defineProperty({__proto__:null,component:mc},Symbol.toStringTag,{value:"Module"}))});
